/*! jQuery v2.0.3 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery-2.0.3.min.map
*/

/**
 * @license
 * Lo-Dash 2.2.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./dist/lodash.js`
 */

/*
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @version 0.6.11
 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/** @license
 * RequireJS plugin for loading JSON files
 * - depends on Text plugin and it was HEAVILY "inspired" by it as well.
 * Author: Miller Medeiros
 * Version: 0.3.1 (2013/02/04)
 * Released under the MIT license
 */

/*!
 *  howler.js v1.1.25
 *  howlerjs.com
 *
 *  (c) 2013-2014, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */

/*
 * popcorn.js version 1.5.6
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(e,undefined){var t,n,r=typeof undefined,i=e.location,o=e.document,s=o.documentElement,a=e.jQuery,u=e.$,l={},c=[],p="2.0.3",f=c.concat,h=c.push,d=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,x=function(e,n){return new x.fn.init(e,n,t)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^-ms-/,N=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()},S=function(){o.removeEventListener("DOMContentLoaded",S,!1),e.removeEventListener("load",S,!1),x.ready()};x.fn=x.prototype={jquery:p,constructor:x,init:function(e,t,n){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),C.test(r[1])&&x.isPlainObject(t))for(r in t)x.isFunction(this
[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=o.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?n.ready(e):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call
(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2),"object"==typeof s||x.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(x.isPlainObject(r)||(i=x.isArray(r)))?(i?(i=!1,o=n&&x.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},s[t]=x.extend(l,o,r)):r!==undefined&&(s[t]=r));return s},x.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=a),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(e===!0?--x.readyWait:x.isReady)||(x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(o,[x]),x.fn.trigger&&x(o).trigger("ready").off("ready")))},isFunction:function(e){return"function"===
x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&
x.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;e=x.trim(e),e&&(1===e.indexOf("use strict")?(t=o.createElement("script"),t.text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(k,"ms-").replace(N,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,s=j(e);if(n){if(s){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(s){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":v.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;n>i;i++)e[r++]=t[i];else while(t[i]!==undefined)e
[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[],o=0,s=e.length;for(n=!!n;s>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,s=j(e),a=[];if(s)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(a[a.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(a[a.length]=r);return f.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),x.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):undefined},access:function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===x.type(n)){i=!0;for(a in n)x.access(e,t,a,n[a],!0,o,s)}else if(r!==undefined&&(i=!0,x.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(x(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o},now:Date.now,swap:function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o]
;i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i}}),x.ready.promise=function(t){return n||(n=x.Deferred(),"complete"===o.readyState?setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",S,!1),e.addEventListener("load",S,!1))),n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function j(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}t=x(o),function(e,undefined){var t,n,r,i,o,s,a,u,l,c,p,f,h,d,g,m,y,v="sizzle"+ -(new Date),b=e.document,w=0,T=0,C=st(),k=st(),N=st(),E=!1,S=function(e,t){return e===t?(E=!0,0):0},j=typeof undefined,D=1<<31,A={}.hasOwnProperty,L=[],q=L.pop,H=L.push,O=L.push,F=L.slice,P=L.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped"
,M="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",$=W.replace("w","w#"),B="\\["+M+"*("+W+")"+M+"*(?:([*^$|!~]?=)"+M+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+$+")|)|)"+M+"*\\]",I=":("+W+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+B.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=RegExp("^"+M+"*,"+M+"*"),X=RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=RegExp(M+"*[+~]"),Y=RegExp("="+M+"*([^\\]'\"]*)"+M+"*\\]","g"),V=RegExp(I),G=RegExp("^"+$+"$"),J={ID:RegExp("^#("+W+")"),CLASS:RegExp("^\\.("+W+")"),TAG:RegExp("^("+W.replace("w","w*")+")"),ATTR:RegExp("^"+B),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:RegExp("^(?:"+R+")$","i"),needsContext:RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/
,Z=/^(?:input|select|textarea|button)$/i,et=/^h\d$/i,tt=/'|\\/g,nt=RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{O.apply(L=F.call(b.childNodes),b.childNodes),L[b.childNodes.length].nodeType}catch(it){O={apply:L.length?function(e,t){H.apply(e,F.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function ot(e,t,r,i){var o,s,a,u,l,f,g,m,x,w;if((t?t.ownerDocument||t:b)!==p&&c(t),t=t||p,r=r||[],!e||"string"!=typeof e)return r;if(1!==(u=t.nodeType)&&9!==u)return[];if(h&&!i){if(o=K.exec(e))if(a=o[1]){if(9===u){if(s=t.getElementById(a),!s||!s.parentNode)return r;if(s.id===a)return r.push(s),r}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&y(t,s)&&s.id===a)return r.push(s),r}else{if(o[2])return O.apply(r,t.getElementsByTagName(e)),r;if((a=o[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply
(r,t.getElementsByClassName(a)),r}if(n.qsa&&(!d||!d.test(e))){if(m=g=v,x=t,w=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=gt(e),(g=t.getAttribute("id"))?m=g.replace(tt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=f.length;while(l--)f[l]=m+mt(f[l]);x=U.test(e)&&t.parentNode||t,w=f.join(",")}if(w)try{return O.apply(r,x.querySelectorAll(w)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,r,i)}function st(){var e=[];function t(n,r){return e.push(n+=" ")>i.cacheLength&&delete t[e.shift()],t[n]=r}return t}function at(e){return e[v]=!0,e}function ut(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)i.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function pt(e){return function(
t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return at(function(t){return t=+t,at(function(n,r){var i,o=e([],n.length,t),s=o.length;while(s--)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},n=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:b,r=t.defaultView;return t!==p&&9===t.nodeType&&t.documentElement?(p=t,f=t.documentElement,h=!s(t),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){c()}),n.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ut(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i"
,2===e.getElementsByClassName("i").length}),n.getById=ut(function(e){return f.appendChild(e).id=v,!t.getElementsByName||!t.getElementsByName(v).length}),n.getById?(i.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==j?t.getElementsByTagName(e):undefined}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==j&&h?t.getElementsByClassName(e):undefined},g=[],d=[],(n.qsa=Q.test(t.querySelectorAll))&&(ut(function(
e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ut(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(n.matchesSelector=Q.test(m=f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",I)}),d=d.length&&RegExp(d.join("|")),g=g.length&&RegExp(g.join("|")),y=Q.test(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition
(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},S=f.compareDocumentPosition?function(e,r){if(e===r)return E=!0,0;var i=r.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(r);return i?1&i||!n.sortDetached&&r.compareDocumentPosition(e)===i?e===t||y(b,e)?-1:r===t||y(b,r)?1:l?P.call(l,e)-P.call(l,r):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,o=e.parentNode,s=n.parentNode,a=[e],u=[n];if(e===n)return E=!0,0;if(!o||!s)return e===t?-1:n===t?1:o?-1:s?1:l?P.call(l,e)-P.call(l,n):0;if(o===s)return ct(e,n);r=e;while(r=r.parentNode)a.unshift(r);r=n;while(r=r.parentNode)u.unshift(r);while(a[i]===u[i])i++;return i?ct(a[i],u[i]):a[i]===b?-1:u[i]===b?1:0},t):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Y,"='$1']"),!(!n.matchesSelector||!h||g&&g.test(t)||d&&d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document
.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&c(e);var r=i.attrHandle[t.toLowerCase()],o=r&&A.call(i.attrHandle,t.toLowerCase())?r(e,t,!h):undefined;return o===undefined?n.attributes||!h?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,o=0;if(E=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(S),E){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=ot.selectors={cacheLength:50,createPseudo:at,match:J,attrHandle:{},find:{}
,relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return J.CHILD.test(e[0])?null:(e[3]&&e[4]!==undefined?e[2]=e[4]:n&&V.test(n)&&(t=gt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&C(e,function(e){return t.test("string"==typeof 
e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,h,d,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),x=!u&&!a;if(m){if(o){while(g){p=t;while(p=p[g])if(a?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&x){c=m[v]||(m[v]={}),l=c[e]||[],h=l[0]===w&&l[1],f=l[0]===w&&l[2],p=h&&m.childNodes[h];while(p=++h&&p&&p[g]||(f=h=0)||d.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[w,
h,f];break}}else if(x&&(l=(t[v]||(t[v]={}))[e])&&l[0]===w)f=l[1];else while(p=++h&&p&&p[g]||(f=h=0)||d.pop())if((a?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(x&&((p[v]||(p[v]={}))[e]=[w,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[v]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,o=r(e,t),s=o.length;while(s--)i=P.call(e,o[s]),e[i]=!(n[i]=o[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(z,"$1"));return r[v]?at(function(e,t,n,i){var o,s=r(e,null,i,[]),a=e.length;while(a--)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return G.test(e||""
)||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return et.test(e.nodeName)},input:function(e)
{return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},i.pseudos.nth=i.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ft(t);function dt(){}dt.prototype=i.filters=i.pseudos,i.setFilters=new dt;function gt(e,t){var n,r,o,s,a,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);a=e,u=[],l=i.preFilter;while(a){(!n||(r=_.exec(a
)))&&(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=X.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(z," ")}),a=a.slice(n.length));for(s in i.filter)!(r=J[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ot.error(e):k(e,u).slice(0)}function mt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var i=t.dir,o=n&&"parentNode"===i,s=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var u,l,c,p=w+" "+s;if(a){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,a))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[v]||(t[v]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,a)||r,l[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){var o,s=[],a=0,u=e.length,l=null!=t;for(;u>
a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function bt(e,t,n,r,i,o){return r&&!r[v]&&(r=bt(r)),i&&!i[v]&&(i=bt(i,o)),at(function(o,s,a,u){var l,c,p,f=[],h=[],d=s.length,g=o||Ct(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:xt(g,f,e,a,u),y=n?i||(o?e:d||r)?[]:s:m;if(n&&n(m,y,a,u),r){l=xt(y,h),r(l,[],a,u),c=l.length;while(c--)(p=l[c])&&(y[h[c]]=!(m[h[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?P.call(o,p):f[c])>-1&&(o[l]=!(s[l]=p))}}else y=xt(y===s?y.splice(d,y.length):y),i?i(null,s,y,u):O.apply(s,y)})}function wt(e){var t,n,r,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,c=yt(function(e){return e===t},a,!0),p=yt(function(e){return P.call(t,e)>-1},a,!0),f=[function(e,n,r){return!s&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>l;l++)if(n=i.relative[e[l].type])f=[yt(vt(f),n)];else{if(n=i.filter[e[l].type].apply(null,e[l].matches),n[v]){for(r=++l;o>r;r++)if(
i.relative[e[r].type])break;return bt(l>1&&vt(f),l>1&&mt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&wt(e.slice(l,r)),o>r&&wt(e=e.slice(r)),o>r&&mt(e))}f.push(n)}return vt(f)}function Tt(e,t){var n=0,o=t.length>0,s=e.length>0,a=function(a,l,c,f,h){var d,g,m,y=[],v=0,x="0",b=a&&[],T=null!=h,C=u,k=a||s&&i.find.TAG("*",h&&l.parentNode||l),N=w+=null==C?1:Math.random()||.1;for(T&&(u=l!==p&&l,r=n);null!=(d=k[x]);x++){if(s&&d){g=0;while(m=e[g++])if(m(d,l,c)){f.push(d);break}T&&(w=N,r=++n)}o&&((d=!m&&d)&&v--,a&&b.push(d))}if(v+=x,o&&x!==v){g=0;while(m=t[g++])m(b,y,l,c);if(a){if(v>0)while(x--)b[x]||y[x]||(y[x]=q.call(f));y=xt(y)}O.apply(f,y),T&&!a&&y.length>0&&v+t.length>1&&ot.uniqueSort(f)}return T&&(w=N,u=C),b};return o?at(a):a}a=ot.compile=function(e,t){var n,r=[],i=[],o=N[e+" "];if(!o){t||(t=gt(e)),n=t.length;while(n--)o=wt(t[n]),o[v]?r.push(o):i.push(o);o=N(e,Tt(i,r))}return o};function Ct(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function kt
(e,t,r,o){var s,u,l,c,p,f=gt(e);if(!o&&1===f.length){if(u=f[0]=f[0].slice(0),u.length>2&&"ID"===(l=u[0]).type&&n.getById&&9===t.nodeType&&h&&i.relative[u[1].type]){if(t=(i.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return r;e=e.slice(u.shift().value.length)}s=J.needsContext.test(e)?0:u.length;while(s--){if(l=u[s],i.relative[c=l.type])break;if((p=i.find[c])&&(o=p(l.matches[0].replace(nt,rt),U.test(u[0].type)&&t.parentNode||t))){if(u.splice(s,1),e=o.length&&mt(u),!e)return O.apply(r,o),r;break}}}return a(e,f)(o,t,!h,r,U.test(e)),r}n.sortStable=v.split("").sort(S).join("")===v,n.detectDuplicates=E,c(),n.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?undefined:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value"
,""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?undefined:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||lt(R,function(e,t,n){var r;return n?undefined:(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),x.find=ot,x.expr=ot.selectors,x.expr[":"]=x.expr.pseudos,x.unique=ot.uniqueSort,x.text=ot.getText,x.isXMLDoc=ot.isXML,x.contains=ot.contains}(e);var D={};function A(e){var t=D[e]={};return x.each(e.match(w)||[],function(e,n){t[n]=!0}),t}x.Callbacks=function(e){e="string"==typeof e?D[e]||A(e):x.extend({},e);var t,n,r,i,o,s,a=[],u=!e.once&&[],l=function(p){for(t=e.memory&&p,n=!0,s=i||0,i=0,o=a.length,r=!0;a&&o>s;s++)if(a[s].apply(p[0],p[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,a&&(u?u.length&&l(u.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var n=a.length;(function s(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&
n.length&&"string"!==r&&s(n)})})(arguments),r?o=a.length:t&&(i=n,l(t))}return this},remove:function(){return a&&x.each(arguments,function(e,t){var n;while((n=x.inArray(t,a,n))>-1)a.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?x.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=u=t=undefined,this},disabled:function(){return!a},lock:function(){return u=undefined,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!a||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=
arguments;return x.Deferred(function(n){x.each(t,function(t,o){var s=o[0],a=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),s=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},a,u,l;if(r>1)for(a=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].
promise().done(s(t,l,n)).fail(o.reject).progress(s(t,u,a)):--i;return i||o.resolveWith(l,n),o.promise()}}),x.support=function(t){var n=o.createElement("input"),r=o.createDocumentFragment(),i=o.createElement("div"),s=o.createElement("select"),a=s.appendChild(o.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=a.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!a.disabled,n=o.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,x(function(){var n,r,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box"
,a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",x.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(o.createElement("div")),r.style.cssText=i.style.cssText=s,r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var L,q,H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,O=/([A-Z])/g;function F(){Object.defineProperty(this.cache={},0,{get:function(){return{
}}}),this.expando=x.expando+Math.random()}F.uid=1,F.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=F.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,x.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(x.isEmptyObject(o))x.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&"string"==typeof t&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,x.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(t===undefined)this.cache[o]={};else{x.isArray(t)?r=t.concat(t.map(x.camelCase)):(i=x.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:
r.match(w)||[])),n=r.length;while(n--)delete s[r[n]]}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},L=new F,q=new F,x.extend({acceptData:F.accepts,hasData:function(e){return L.hasData(e)||q.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return q.access(e,t,n)},_removeData:function(e,t){q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i=this[0],o=0,s=null;if(e===undefined){if(this.length&&(s=L.get(i),1===i.nodeType&&!q.get(i,"hasDataAttrs"))){for(n=i.attributes;n.length>o;o++)r=n[o].name,0===r.indexOf("data-")&&(r=x.camelCase(r.slice(5)),P(i,r,s[r]));q.set(i,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){L.set(this,e)}):x.access(this,function(t){var n,r=x.camelCase(e);if(i&&t===undefined){if(n=L.get(i,e),n!==undefined)return n;if(n=L.get(i,r),n!==undefined)return n;if(n=P(i,r,undefined
),n!==undefined)return n}else this.each(function(){var n=L.get(this,r);L.set(this,r,t),-1!==e.indexOf("-")&&n!==undefined&&L.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){L.remove(this,e)})}});function P(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(O,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:H.test(n)?JSON.parse(n):n}catch(i){}L.set(e,t,n)}else n=undefined;return n}x.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=q.get(e,t),n&&(!r||x.isArray(n)?r=q.access(e,t,x.makeArray(n)):r.push(n)),r||[]):undefined},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),s=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q.
get(e,n)||q.access(e,n,{empty:x.Callbacks("once memory").add(function(){q.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?x.queue(this[0],e):t===undefined?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=undefined),e=e||"fx";while(s--)n=q.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var R,M,W=/[\t\r\n\f]/g,$=/\r/g,B=/^(?:input|select|textarea|button)$/i;x.fn.extend({attr:function(e,t){return x
.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})},addClass:function(e){var t,n,r,i,o,s=0,a=this.length,u="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):"")){o=0;while(
i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,i=0,o=x(this),s=e.match(w)||[];while(t=s[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else(n===r||"boolean"===n)&&(this.className&&q.set(this,"__className__",this.className),this.className=this.className||e===!1?"":q.get(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(W," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=x.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,x(this).val()):e,null==i?i="":"number"==typeof i?i+="":x.isArray
(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,i,"value")!==undefined||(this.value=i))});if(i)return t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),x.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;for(;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=x.makeArray(t),s=i.length;while(s--)r=i[s],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},
attr:function(e,t,n){var i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===r?x.prop(e,t,n):(1===s&&x.isXMLDoc(e)||(t=t.toLowerCase(),i=x.attrHooks[t]||(x.expr.match.bool.test(t)?M:R)),n===undefined?i&&"get"in i&&null!==(o=i.get(e,t))?o:(o=x.find.attr(e,t),null==o?undefined:o):null!==n?i&&"set"in i&&(o=i.set(e,n,t))!==undefined?o:(e.setAttribute(t,n+""),n):(x.removeAttr(e,t),undefined))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!x.isXMLDoc(e),o&&(t=x.propFix[t]||t,i=x.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in 
i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||B.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),M={set:function(e,t,n){return t===!1?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=x.expr.attrHandle[t]||x.find.attr;x.expr.attrHandle[t]=function(e,t,r){var i=x.expr.attrHandle[t],o=r?undefined:(x.expr.attrHandle[t]=undefined)!=n(e,t,r)?t.toLowerCase():null;return x.expr.attrHandle[t]=i,o}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){return x.isArray(t)?e.checked=x.inArray(x(e).val(),t)>=0:undefined}},x.support.checkOn||(x.valHooks
[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var I=/^key/,z=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;function U(){return!0}function Y(){return!1}function V(){try{return o.activeElement}catch(e){}}x.event={global:{},add:function(e,t,n,i,o){var s,a,u,l,c,p,f,h,d,g,m,y=q.get(e);if(y){n.handler&&(s=n,n=s.handler,o=s.selector),n.guid||(n.guid=x.guid++),(l=y.events)||(l=y.events={}),(a=y.handle)||(a=y.handle=function(e){return typeof x===r||e&&x.event.triggered===e.type?undefined:x.event.dispatch.apply(a.elem,arguments)},a.elem=e),t=(t||"").match(w)||[""],c=t.length;while(c--)u=X.exec(t[c])||[],d=m=u[1],g=(u[2]||"").split(".").sort(),d&&(f=x.event.special[d]||{},d=(o?f.delegateType:f.bindType)||d,f=x.event.special[d]||{},p=x.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:g.join(".")},s),(h=l[d])||(h=l[d]=[],h.delegateCount=0,f.setup&&
f.setup.call(e,i,g,a)!==!1||e.addEventListener&&e.addEventListener(d,a,!1)),f.add&&(f.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,p):h.push(p),x.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var o,s,a,u,l,c,p,f,h,d,g,m=q.hasData(e)&&q.get(e);if(m&&(u=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(a=X.exec(t[l])||[],h=g=a[1],d=(a[2]||"").split(".").sort(),h){p=x.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,f=u[h]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;while(o--)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,p.remove&&p.remove.call(e,c));s&&!f.length&&(p.teardown&&p.teardown.call(e,d,m.handle)!==!1||x.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)x.event.remove(e,h+t[l],n,r,!0);x.isEmptyObject(u)&&(delete m.handle,q.remove(e,"events"))}},trigger:function(t
,n,r,i){var s,a,u,l,c,p,f,h=[r||o],d=y.call(t,"type")?t.type:t,g=y.call(t,"namespace")?t.namespace.split("."):[];if(a=u=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!_.test(d+x.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),c=0>d.indexOf(":")&&"on"+d,t=t[x.expando]?t:new x.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:x.makeArray(n,[t]),f=x.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!x.isWindow(r)){for(l=f.delegateType||d,_.test(l+d)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(r.ownerDocument||o)&&h.push(u.defaultView||u.parentWindow||e)}s=0;while((a=h[s++])&&!t.isPropagationStopped())t.type=s>1?l:f.bindType||d,p=(q.get(a,"events")||{})[t.type]&&q.get(a,"handle"),p&&p.apply(a,n),p=c&&a[c],p&&x.acceptData(a)&&p.apply&&p.apply(a,n)===!1&&t.preventDefault
();return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!x.acceptData(r)||c&&x.isFunction(r[d])&&!x.isWindow(r)&&(u=r[c],u&&(r[c]=null),x.event.triggered=d,r[d](),x.event.triggered=undefined,u&&(r[c]=u)),t.result}},dispatch:function(e){e=x.event.fix(e);var t,n,r,i,o,s=[],a=d.call(arguments),u=(q.get(this,"events")||{})[e.type]||[],l=x.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),t=0;while((i=s[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount
,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",r[i]===undefined&&(r[i]=o.needsContext?x(i,this).index(u)>=0:x.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return t.length>a&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||o,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&
r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||s===undefined||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,s=e,a=this.fixHooks[i];a||(this.fixHooks[i]=a=z.test(i)?this.mouseHooks:I.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new x.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==V()&&this.focus?(this.focus(),!1):undefined},delegateType:"focusin"},blur:{trigger:function(){return this===V()&&this.blur?(this.blur(),!1):undefined},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):undefined},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch
:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},x.Event=function(e,t){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?U:Y):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,undefined):new x.Event(e,t)},x.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=U,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=U,e&&e.stopPropagation&&e.stopPropagation
()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=U,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=undefined);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=undefined):null==r&&("string"==typeof t?(r=n,n=undefined):(r=n,n=t,t=undefined)),r===!1)r=Y;else if(!r)return this;return 1===i&&(o=r,r=function(
e){return x().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=x.guid++)),this.each(function(){x.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=undefined),n===!1&&(n=Y),this.each(function(){x.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?x.event.trigger(e,t,n,!0):undefined}});var G=/^.[^:#\[\.,]*$/,J=/^(?:parents|prev(?:Until|All))/,Q=x.expr.match.needsContext,K={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains
(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){var e=0;for(;n>e;e++)if(x.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(et(this,e||[],!0))},filter:function(e){return this.pushStack(et(this,e||[],!1))},is:function(e){return!!et(this,"string"==typeof e&&Q.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,o=[],s=Q.test(e)||"string"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(x(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray
(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function Z(e,t){while((e=e[t])&&1!==e.nodeType);return e}x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return Z(e,"nextSibling")},prev:function(e){return Z(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==
e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(K[e]||x.unique(i),J.test(e)&&i.reverse()),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function et(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(G.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return g.call(t,e)>=0!==n})}var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,nt=/<([\w:]+)/,rt=/<|&#?\w+;/,it=/<(?:script|style|link)/i
,ot=/^(?:checkbox|radio)$/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,ut=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===undefined?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.insertBefore
(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(mt(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&dt(mt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(mt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!ct[(nt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(tt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{
},1===t.nodeType&&(x.cleanData(mt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=f.apply([],e);var r,i,o,s,a,u,l=0,c=this.length,p=this,h=c-1,d=e[0],g=x.isFunction(d);if(g||!(1>=c||"string"!=typeof d||x.support.checkClone)&&st.test(d))return this.each(function(r){var i=p.eq(r);g&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=x.map(mt(r,"script"),ft),s=o.length;c>l;l++)a=r,l!==h&&(a=x.clone(a,!0,!0),s&&x.merge(o,mt(a,"script"))),t.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,x.map
(o,ht),l=0;s>l;l++)a=o[l],at.test(a.type||"")&&!q.access(a,"globalEval")&&x.contains(u,a)&&(a.src?x._evalUrl(a.src):x.globalEval(a.textContent.replace(lt,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,r=[],i=x(e),o=i.length-1,s=0;for(;o>=s;s++)n=s===o?this:this.clone(!0),x(i[s])[t](n),h.apply(r,n.get());return this.pushStack(r)}}),x.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=x.contains(e.ownerDocument,e);if(!(x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(s=mt(a),o=mt(e),r=0,i=o.length;i>r;r++)yt(o[r],s[r]);if(t)if(n)for(o=o||mt(e),s=s||mt(a),r=0,i=o.length;i>r;r++)gt(o[r],s[r]);else gt(e,a);return s=mt(a,"script"),s.length>0&&dt(s,!u&&mt(e,"script")),a},buildFragment:function(e,t,n,r){var i,o,s,a,u,l,c=0,p=e.length,f=t.createDocumentFragment(),h=[];for(;p>c;c++)if(i=e[c],i||0===i)if("object"===x.type(i))x.merge
(h,i.nodeType?[i]:i);else if(rt.test(i)){o=o||f.appendChild(t.createElement("div")),s=(nt.exec(i)||["",""])[1].toLowerCase(),a=ct[s]||ct._default,o.innerHTML=a[1]+i.replace(tt,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;x.merge(h,o.childNodes),o=f.firstChild,o.textContent=""}else h.push(t.createTextNode(i));f.textContent="",c=0;while(i=h[c++])if((!r||-1===x.inArray(i,r))&&(u=x.contains(i.ownerDocument,i),o=mt(f.appendChild(i),"script"),u&&dt(o),n)){l=0;while(i=o[l++])at.test(i.type||"")&&n.push(i)}return f},cleanData:function(e){var t,n,r,i,o,s,a=x.event.special,u=0;for(;(n=e[u])!==undefined;u++){if(F.accepts(n)&&(o=n[q.expando],o&&(t=q.cache[o]))){if(r=Object.keys(t.events||{}),r.length)for(s=0;(i=r[s])!==undefined;s++)a[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);q.cache[o]&&delete q.cache[o]}delete L.cache[n[L.expando]]}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});function pt(e,t){return x.nodeName(e,"table")&&
x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ht(e){var t=ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function dt(e,t){var n=e.length,r=0;for(;n>r;r++)q.set(e[r],"globalEval",!t||q.get(t[r],"globalEval"))}function gt(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(q.hasData(e)&&(o=q.access(e),s=q.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)x.event.add(t,i,l[i][n])}L.hasData(e)&&(a=L.access(e),u=x.extend({},a),L.set(t,u))}}function mt(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&x.nodeName(e,t)?x.merge([e],n):n}function yt(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ot.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue
)}x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var vt,xt,bt=/^(none|table(?!-c[ea]).+)/,wt=/^margin/,Tt=RegExp("^("+b+")(.*)$","i"),Ct=RegExp("^("+b+")(?!px)[a-z%]+$","i"),kt=RegExp("^([+-])=("+b+")","i"),Nt={BODY:"block"},Et={position:"absolute",visibility:"hidden",display:"block"},St={letterSpacing
:0,fontWeight:400},jt=["Top","Right","Bottom","Left"],Dt=["Webkit","O","Moz","ms"];function At(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Dt.length;while(i--)if(t=Dt[i]+n,t in e)return t;return r}function Lt(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function qt(t){return e.getComputedStyle(t,null)}function Ht(e,t){var n,r,i,o=[],s=0,a=e.length;for(;a>s;s++)r=e[s],r.style&&(o[s]=q.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Lt(r)&&(o[s]=q.access(r,"olddisplay",Rt(r.nodeName)))):o[s]||(i=Lt(r),(n&&"none"!==n||!i)&&q.set(r,"olddisplay",i?n:x.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}x.fn.extend({css:function(e,t){return x.access(this,function(e,t,n){var r,i,o={},s=0;if(x.isArray(t)){for(r=qt(e),i=t.length;i>s;s++)o[t[s]]=x.css(e,t[s],!1,r);return o}return n!==undefined?
x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Lt(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=vt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=x.camelCase(t),u=e.style;return t=x.cssProps[a]||(x.cssProps[a]=At(u,a)),s=x.cssHooks[t]||x.cssHooks[a],n===undefined?s&&"get"in s&&(i=s.get(e,!1,r))!==undefined?i:u[t]:(o=typeof n,"string"===o&&(i=kt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(x.css(e,t)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||x.cssNumber[a]||(n+="px"),x.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[
t]="inherit"),s&&"set"in s&&(n=s.set(e,n,r))===undefined||(u[t]=n)),undefined)}},css:function(e,t,n,r){var i,o,s,a=x.camelCase(t);return t=x.cssProps[a]||(x.cssProps[a]=At(e.style,a)),s=x.cssHooks[t]||x.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),i===undefined&&(i=vt(e,t,r)),"normal"===i&&t in St&&(i=St[t]),""===n||n?(o=parseFloat(i),n===!0||x.isNumeric(o)?o||0:i):i}}),vt=function(e,t,n){var r,i,o,s=n||qt(e),a=s?s.getPropertyValue(t)||s[t]:undefined,u=e.style;return s&&(""!==a||x.contains(e.ownerDocument,e)||(a=x.style(e,t)),Ct.test(a)&&wt.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=s.width,u.width=r,u.minWidth=i,u.maxWidth=o)),a};function Ot(e,t,n){var r=Tt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ft(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;for(;4>o;o+=2)"margin"===n&&(s+=x.css(e,n+jt[o],!0,i)),r?("content"===n&&(s-=x.css(e,"padding"+jt[o],!0,i)),"margin"!==n&&(s-=x.css(e,"border"+jt[o]+"Width",!0,i)))
:(s+=x.css(e,"padding"+jt[o],!0,i),"padding"!==n&&(s+=x.css(e,"border"+jt[o]+"Width",!0,i)));return s}function Pt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=qt(e),s=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=vt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ct.test(i))return i;r=s&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+Ft(e,t,n||(s?"border":"content"),r,o)+"px"}function Rt(e){var t=o,n=Nt[e];return n||(n=Mt(e,t),"none"!==n&&n||(xt=(xt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(xt[0].contentWindow||xt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=Mt(e,t),xt.detach()),Nt[e]=n),n}function Mt(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&bt.
test(x.css(e,"display"))?x.swap(e,Et,function(){return Pt(e,t,r)}):Pt(e,t,r):undefined},set:function(e,n,r){var i=r&&qt(e);return Ot(e,n,r?Ft(e,t,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,t){return t?x.swap(e,{display:"inline-block"},vt,[e,"marginRight"]):undefined}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,t){x.cssHooks[t]={get:function(e,n){return n?(n=vt(e,t),Ct.test(n)?x(e).position()[t]+"px":n):undefined}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+jt[r]+t]=o[r]||o[r-2]||o[0];return i}},wt.test(e)||(x.cssHooks[e+t].set=Ot)});var Wt=/%20/g,$t=/\[\]$/
,Bt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&zt.test(this.nodeName)&&!It.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),x.param=function(e,t){var n,r=[],i=function(e,t){t=x.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)_t(n,e[n],t,i);return r.join("&").replace(Wt,"+")};function _t(e,
t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||$t.test(e)?r(e,i):_t(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Xt,Ut,Yt=x.now(),Vt=/\?/,Gt=/#.*$/,Jt=/([?&])_=[^&]*/,Qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zt=/^(?:GET|HEAD)$/
,en=/^\/\//,tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,nn=x.fn.load,rn={},on={},sn="*/".concat("*");try{Ut=i.href}catch(an){Ut=o.createElement("a"),Ut.href="",Ut=Ut.href}Xt=tn.exec(Ut.toLowerCase())||[];function un(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(x.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ln(e,t,n,r){var i={},o=e===on;function s(a){var u;return i[a]=!0,x.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):undefined:(t.dataTypes.unshift(l),s(l),!1)}),u}return s(t.dataTypes[0])||!i["*"]&&s("*")}function cn(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}x.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=e.slice(a),e=e.slice(0,a)),x.isFunction
(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),s.length>0&&x.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut,type:"GET",isLocal:Kt.test(Xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?
cn(cn(e,x.ajaxSettings),t):cn(x.ajaxSettings,e)},ajaxPrefilter:un(rn),ajaxTransport:un(on),ajax:function(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,i,o,s,a,u,l,c=x.ajaxSetup({},t),p=c.context||c,f=c.context&&(p.nodeType||p.jquery)?x(p):x.event,h=x.Deferred(),d=x.Callbacks("once memory"),g=c.statusCode||{},m={},y={},v=0,b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!o){o={};while(t=Qt.exec(i))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return v||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return v||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)g[t]=[g[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),k(0,t),this}};if(h.promise(T).complete=d.add,T.success=T.done,T.error=T.fail,c.url=((e||c.url||Ut)+"").replace(Gt,"").replace
(en,Xt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=x.trim(c.dataType||"*").toLowerCase().match(w)||[""],null==c.crossDomain&&(a=tn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===Xt[1]&&a[2]===Xt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(Xt[3]||("http:"===Xt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=x.param(c.data,c.traditional)),ln(rn,c,t,T),2===v)return T;u=c.global,u&&0===x.active++&&x.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Zt.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Vt.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Jt.test(r)?r.replace(Jt,"$1_="+Yt++):r+(Vt.test(r)?"&":"?")+"_="+Yt++)),c.ifModified&&(x.lastModified[r]&&T.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&T.setRequestHeader("If-None-Match",x.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",c.contentType),T.setRequestHeader("Accept",c.dataTypes
[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+sn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)T.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(p,T,c)!==!1&&2!==v){b="abort";for(l in{success:1,error:1,complete:1})T[l](c[l]);if(n=ln(on,c,t,T)){T.readyState=1,u&&f.trigger("ajaxSend",[T,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){T.abort("timeout")},c.timeout));try{v=1,n.send(m,k)}catch(C){if(!(2>v))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,t,o,a){var l,m,y,b,w,C=t;2!==v&&(v=2,s&&clearTimeout(s),n=undefined,i=a||"",T.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(b=pn(c,T,o)),b=fn(c,b,T,l),l?(c.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(x.lastModified[r]=w),w=T.getResponseHeader("etag"),w&&(x.etag[r]=w)),204===e||"HEAD"===c.type?C="nocontent":304===e?C="notmodified":(C=b.state,m=b.data,y=b.error,l=!y)):(y=C,(e||!C)&&(C="error",0>e&&(e=0))),T.status=e,T.statusText=(t||C)+"",l?h.resolveWith(p,[
m,C,T]):h.rejectWith(p,[T,C,y]),T.statusCode(g),g=undefined,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[T,c,l?m:y]),d.fireWith(p,[T,C]),u&&(f.trigger("ajaxComplete",[T,c]),--x.active||x.event.trigger("ajaxStop")))}return T}return T.abort()},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return x.isFunction(n)&&(i=i||r,r=n,n=undefined),x.ajax({url:e,type:t,dataType:i,data:n,success:r})}});function pn(e,t,n){var r,i,o,s,a=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):undefined}function fn(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];
o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=x("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error"
,n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}});var hn=[],dn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=hn.pop()||x.expando+"_"+Yt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=x.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(dn,"$1"+i):t.jsonp!==!1&&(t.url+=(Vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||x.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,hn.push(i)),s&&x.isFunction(o)&&o(s[0]),s=o=undefined}),"script"):undefined}),x.ajaxSettings.xhr=function(
){try{return new XMLHttpRequest}catch(e){}};var gn=x.ajaxSettings.xhr(),mn={0:200,1223:204},yn=0,vn={};e.ActiveXObject&&x(e).on("unload",function(){for(var e in vn)vn[e]();vn=undefined}),x.support.cors=!!gn&&"withCredentials"in gn,x.support.ajax=gn=!!gn,x.ajaxTransport(function(e){var t;return x.support.cors||gn&&!e.crossDomain?{send:function(n,r){var i,o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete vn[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status||404,s.statusText):r(mn[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:undefined,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=vn[o=yn++]=t("abort"),s.send(e.hasContent&&
e.data||null)},abort:function(){t&&t()}}:undefined});var xn,bn,wn=/^(?:toggle|show|hide)$/,Tn=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),Cn=/queueHooks$/,kn=[An],Nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Tn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),s=(x.cssNumber[e]||"px"!==o&&+r)&&Tn.exec(x.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,x.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};function En(){return setTimeout(function(){xn=undefined}),xn=x.now()}function Sn(e,t,n){var r,i=(Nn[t]||[]).concat(Nn["*"]),o=0,s=i.length;for(;s>o;o++)if(r=i[o].call(n,t,e))return r}function jn(e,t,n){var r,i,o=0,s=kn.length,a=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=xn||En(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;for(;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,
n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:xn||En(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Dn(c,l.opts.specialEasing);s>o;o++)if(r=kn[o].call(l,e,c,l.opts))return r;return x.map(c,Sn,l),x.isFunction(l.opts.start)&&l.opts.start.call(e,l),x.fx.timer(x.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function Dn(e,t){var n,r,i,o,s;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=x.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete 
e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}x.Animation=x.extend(jn,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Nn[n]=Nn[n]||[],Nn[n].unshift(t)},prefilter:function(e,t){t?kn.unshift(e):kn.push(e)}});function An(e,t,n){var r,i,o,s,a,u,l=this,c={},p=e.style,f=e.nodeType&&Lt(e),h=q.get(e,"fxshow");n.queue||(a=x._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,l.always(function(){l.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",l.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],wn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"
)){if("show"!==i||!h||h[r]===undefined)continue;f=!0}c[r]=h&&h[r]||x.style(e,r)}if(!x.isEmptyObject(c)){h?"hidden"in h&&(f=h.hidden):h=q.access(e,"fxshow",{}),o&&(h.hidden=!f),f?x(e).show():l.done(function(){x(e).hide()}),l.done(function(){var t;q.remove(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)s=Sn(f?h[r]:0,r,l),r in h||(h[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function Ln(e,t,n,r,i){return new Ln.prototype.init(e,t,n,r,i)}x.Tween=Ln,Ln.prototype={constructor:Ln,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ln.propHooks[this.prop];return e&&e.get?e.get(this):Ln.propHooks._default.get(this)},run:function(e){var t,n=Ln.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this
.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ln.propHooks._default.set(this),this}},Ln.prototype.init.prototype=Ln.prototype,Ln.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ln.propHooks.scrollTop=Ln.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(qn(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e
),o=x.speed(t,n,r),s=function(){var t=jn(this,x.extend({},e),o);(i||q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,s=q.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&Cn.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,s=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}})
;function qn(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=jt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}x.each({slideDown:qn("show"),slideUp:qn("hide"),slideToggle:qn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=Ln.prototype.init,x.fx.tick=function(){var e,t=x.timers,n=0;for(xn=x.now();t.length>
n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||x.fx.stop(),xn=undefined},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){bn||(bn=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(bn),bn=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;if(s)return t=s.documentElement,x.contains(t,i)?(typeof i.getBoundingClientRect!==r&&(o=i.getBoundingClientRect()),n=Hn(s),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},x.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=x.css(e,"position"),p=x(e),f={};"static"===c&&(e.style.position="relative"),a=p.offset(),o=x.css(e,"top")
,u=x.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=p.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),x.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):p.css(f)}},x.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(r=e.offset()),r.top+=x.css(e[0],"borderTopWidth",!0),r.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;x.fn[t]=function(i){return x.access
(this,function(t,i,o){var s=Hn(t);return o===undefined?s?s[n]:t[i]:(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o,undefined)},t,i,arguments.length,null)}});function Hn(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return x.access(this,function(t,n,r){var i;return x.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?x.css(t,n,s):x.style(t,n,r,s)},t,o?r:undefined,o,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}),"object"==typeof 
e&&"object"==typeof e.document&&(e.jQuery=e.$=x)})(window),function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:_+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:_+n,t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=!0}}function r(n){return n.charCodeAt(0)}function u(n,t){var e=n.m,r=t.m;if(e!==r){if(e>r||typeof e=="undefined")return 1;if(e<r||typeof r=="undefined")return-1}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[0|r/2],a=n[r-1];if(u&&typeof u=="object"&&o&&typeof o=="object"&&a&&typeof a=="object")return!1;for(u=f(),u["false"]=u["null"]=u["true"]=u.undefined=!1,o=f(),o.k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function a
(n){return"\\"+G[n]}function i(){return g.pop()||[]}function f(){return y.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,"undefined":!1,o:null}}function l(){}function c(n){n.length=0,g.length<d&&g.push(n)}function p(n){var t=n.l;t&&p(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,y.length<d&&y.push(n)}function s(n,t,e){t||(t=0),typeof e=="undefined"&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(0>e?0:e);++r<e;)u[r]=n[t+r];return u}function v(e){function g(n){if(!n||je.call(n)!=z)return!1;var t=n.valueOf,e=typeof t=="function"&&(e=ge(t))&&ge(e);return e?n==e||ge(n)==e:st(n)}function y(n,t,e){if(!n||!V[typeof n])return n;t=t&&typeof e=="undefined"?t:et(t,e,3);for(var r=-1,u=V[typeof n]&&Ke(n),o=u?u.length:0;++r<o&&(e=u[r],!1!==t(n[e],e,n)););return n}function d(n,t,e){var r;if(!n||!V[typeof n])return n;t=t&&typeof e=="undefined"?t:et(t,e,3);for(r in n)if(!1===t(n[r],r,n))break;return n}function G(n,t,e){var r,u=n,o=u
;if(!u)return o;for(var a=arguments,i=0,f=typeof e=="number"?2:a.length;++i<f;)if((u=a[i])&&V[typeof u])for(var l=-1,c=V[typeof u]&&Ke(u),p=c?c.length:0;++l<p;)r=c[l],"undefined"==typeof o[r]&&(o[r]=u[r]);return o}function J(n,t,e){var r,u=n,o=u;if(!u)return o;var a=arguments,i=0,f=typeof e=="number"?2:a.length;if(3<f&&"function"==typeof a[f-2])var l=et(a[--f-1],a[f--],2);else 2<f&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if((u=a[i])&&V[typeof u])for(var c=-1,p=V[typeof u]&&Ke(u),s=p?p.length:0;++c<s;)r=p[c],o[r]=l?l(o[r],u[r]):u[r];return o}function Q(n){var t,e=[];if(!n||!V[typeof n])return e;for(t in n)ye.call(n,t)&&e.push(t);return e}function Y(n){return n&&typeof n=="object"&&!Pe(n)&&ye.call(n,"__wrapped__")?n:new nt(n)}function nt(n,t){this.__chain__=!!t,this.__wrapped__=n}function tt(n,t,e,r,u){if(e){var o=e(n);if(typeof o!="undefined")return o}if(!bt(n))return n;var a=je.call(n);if(!L[a])return n;var f=We[a];switch(a){case F:case T:return new f(+n);case q:case K:return new 
f(n);case P:return o=f(n.source,O.exec(n)),o.lastIndex=n.lastIndex,o}if(a=Pe(n),t){var l=!r;r||(r=i()),u||(u=i());for(var p=r.length;p--;)if(r[p]==n)return u[p];o=a?f(n.length):{}}else o=a?s(n):J({},n);return a&&(ye.call(n,"index")&&(o.index=n.index),ye.call(n,"input")&&(o.input=n.input)),t?(r.push(n),u.push(o),(a?It:y)(n,function(n,a){o[a]=tt(n,t,e,r,u)}),l&&(c(r),c(u)),o):o}function et(n,t,e){if(typeof n!="function")return Gt;if(typeof t=="undefined")return n;var r=n.__bindData__||qe.funcNames&&!n.name;if(typeof r=="undefined"){var u=R&&he.call(n);qe.funcNames||!u||I.test(u)||(r=!0),(qe.funcNames||!r)&&(r=!qe.funcDecomp||R.test(u),ze(n,r))}if(!0!==r&&r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function rt(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var a=n[r];if(a&&typeof 
a=="object"&&typeof a.length=="number"&&(Pe(a)||ht(a))){t||(a=rt(a,t,e));var i=-1,f=a.length,l=o.length;for(o.length+=f;++i<f;)o[l++]=a[i]}else e||o.push(a)}return o}function ut(n,t,e,r,u,o){if(e){var a=e(n,t);if(typeof a!="undefined")return!!a}if(n===t)return 0!==n||1/n==1/t;if(n===n&&!(n&&V[typeof n]||t&&V[typeof t]))return!1;if(null==n||null==t)return n===t;var f=je.call(n),l=je.call(t);if(f==B&&(f=z),l==B&&(l=z),f!=l)return!1;switch(f){case F:case T:return+n==+t;case q:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case P:case K:return n==oe(t)}if(l=f==$,!l){if(ye.call(n,"__wrapped__")||ye.call(t,"__wrapped__"))return ut(n.__wrapped__||n,t.__wrapped__||t,e,r,u,o);if(f!=z)return!1;var f=n.constructor,p=t.constructor;if(f!=p&&!(_t(f)&&f instanceof f&&_t(p)&&p instanceof p))return!1}for(p=!u,u||(u=i()),o||(o=i()),f=u.length;f--;)if(u[f]==n)return o[f]==t;var s=0,a=!0;if(u.push(n),o.push(t),l){if(f=n.length,s=t.length,a=s==n.length,!a&&!r)return a;for(;s--;)if(l=f,p=t[s],r)for(;l--&&!(a=ut(n[l]
,p,e,r,u,o)););else if(!(a=ut(n[s],p,e,r,u,o)))break;return a}return d(t,function(t,i,f){return ye.call(f,i)?(s++,a=ye.call(n,i)&&ut(n[i],t,e,r,u,o)):void 0}),a&&!r&&d(n,function(n,t,e){return ye.call(e,t)?a=-1<--s:void 0}),p&&(c(u),c(o)),a}function ot(n,t,e,r,u){(Pe(t)?It:y)(t,function(t,o){var a,i,f=t,l=n[o];if(t&&((i=Pe(t))||g(t))){for(f=r.length;f--;)if(a=r[f]==t){l=u[f];break}if(!a){var c;e&&(f=e(l,t),c=typeof f!="undefined")&&(l=f),c||(l=i?Pe(l)?l:[]:g(l)?l:{}),r.push(t),u.push(l),c||ot(l,t,e,r,u)}}else e&&(f=e(l,t),typeof f=="undefined"&&(f=t)),typeof f!="undefined"&&(l=f);n[o]=l})}function at(e,r,u){var a=-1,f=pt(),l=e?e.length:0,s=[],v=!r&&l>=b&&f===n,h=u||v?i():s;if(v){var g=o(h);g?(f=t,h=g):(v=!1,h=u?h:(c(h),s))}for(;++a<l;){var g=e[a],y=u?u(g,a,e):g;(r?!a||h[h.length-1]!==y:0>f(h,y))&&((u||v)&&h.push(y),s.push(g))}return v?(c(h.k),p(h)):u&&c(h),s}function it(n){return function(t,e,r){var u={};e=Y.createCallback(e,r,3),r=-1;var o=t?t.length:0;if(typeof o=="number")for(;++r<o;
){var a=t[r];n(u,a,e(a,r,t),t)}else y(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function ft(n,t,e,r,u,o){var a=1&t,i=2&t,f=4&t,l=8&t,c=16&t,p=32&t,s=n;if(!i&&!_t(n))throw new ae;c&&!e.length&&(t&=-17,c=e=!1),p&&!r.length&&(t&=-33,p=r=!1);var v=n&&n.__bindData__;if(v)return!a||1&v[1]||(v[4]=u),!a&&1&v[1]&&(t|=8),!f||4&v[1]||(v[5]=o),c&&_e.apply(v[2]||(v[2]=[]),e),p&&_e.apply(v[3]||(v[3]=[]),r),v[1]|=t,ft.apply(null,v);if(!a||i||f||p||!(qe.fastBind||Ce&&c))g=function(){var v=arguments,h=a?u:this;return(f||c||p)&&(v=$e.call(v),c&&ke.apply(v,e),p&&_e.apply(v,r),f&&v.length<o)?(t|=16,ft(n,l?t:-4&t,v,null,u,o)):(i&&(n=h[s]),this instanceof g?(h=lt(n.prototype),v=n.apply(h,v),bt(v)?v:h):n.apply(h,v))};else{if(c){var h=[u];_e.apply(h,e)}var g=c?Ce.apply(n,h):Ce.call(n,u)}return ze(g,$e.call(arguments)),g}function lt(n){return bt(n)?Oe(n):{}}function ct(n){return Le[n]}function pt(){var t=(t=Y.indexOf)===Wt?n:t;return t}function st(n){var t,e;return n&&je.call(n)==z&&(t=n.constructor,!_t(t
)||t instanceof t)?(d(n,function(n,t){e=t}),typeof e=="undefined"||ye.call(n,e)):!1}function vt(n){return Me[n]}function ht(n){return n&&typeof n=="object"&&typeof n.length=="number"&&je.call(n)==B||!1}function gt(n,t,e){var r=Ke(n),u=r.length;for(t=et(t,e,3);u--&&(e=r[u],!1!==t(n[e],e,n)););return n}function yt(n){var t=[];return d(n,function(n,e){_t(n)&&t.push(e)}),t.sort()}function mt(n){for(var t=-1,e=Ke(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function _t(n){return typeof n=="function"}function bt(n){return!!n&&!!V[typeof n]}function dt(n){return typeof n=="number"||je.call(n)==q}function wt(n){return typeof n=="string"||je.call(n)==K}function jt(n){for(var t=-1,e=Ke(n),r=e.length,u=Xt(r);++t<r;)u[t]=n[e[t]];return u}function kt(n,t,e){var r=-1,u=pt(),o=n?n.length:0,a=!1;return e=(0>e?Re(0,o+e):e)||0,Pe(n)?a=-1<u(n,t,e):typeof o=="number"?a=-1<(wt(n)?n.indexOf(t,e):u(n,t,e)):y(n,function(n){return++r<e?void 0:!(a=n===t)}),a}function xt(n,t,e){var r=!0;t=Y.createCallback
(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u&&(r=!!t(n[e],e,n)););else y(n,function(n,e,u){return r=!!t(n,e,u)});return r}function Ct(n,t,e){var r=[];t=Y.createCallback(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}else y(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function Ot(n,t,e){t=Y.createCallback(t,e,3),e=-1;var r=n?n.length:0;if(typeof r!="number"){var u;return y(n,function(n,e,r){return t(n,e,r)?(u=n,!1):void 0}),u}for(;++e<r;){var o=n[e];if(t(o,e,n))return o}}function It(n,t,e){var r=-1,u=n?n.length:0;if(t=t&&typeof e=="undefined"?t:et(t,e,3),typeof u=="number")for(;++r<u&&!1!==t(n[r],r,n););else y(n,t);return n}function Nt(n,t,e){var r=n?n.length:0;if(t=t&&typeof e=="undefined"?t:et(t,e,3),typeof r=="number")for(;r--&&!1!==t(n[r],r,n););else{var u=Ke(n),r=u.length;y(n,function(n,e,o){return e=u?u[--r]:--r,t(o[e],e,o)})}return n}function Et(n,t,e){var r=-1,u=n?n.length:0;if(t=Y.createCallback(t,e,3),typeof 
u=="number")for(var o=Xt(u);++r<u;)o[r]=t(n[r],r,n);else o=[],y(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function St(n,t,e){var u=-1/0,o=u;if(!t&&Pe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i>o&&(o=i)}}else t=!t&&wt(n)?r:Y.createCallback(t,e,3),It(n,function(n,e,r){e=t(n,e,r),e>u&&(u=e,o=n)});return o}function Rt(n,t){var e=-1,r=n?n.length:0;if(typeof r=="number")for(var u=Xt(r);++e<r;)u[e]=n[e][t];return u||Et(n,t)}function At(n,t,e,r){if(!n)return e;var u=3>arguments.length;t=et(t,r,4);var o=-1,a=n.length;if(typeof a=="number")for(u&&(e=n[++o]);++o<a;)e=t(e,n[o],o,n);else y(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)});return e}function Dt(n,t,e,r){var u=3>arguments.length;return t=et(t,r,4),Nt(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function Bt(n){var t=-1,e=n?n.length:0,r=Xt(typeof e=="number"?e:0);return It(n,function(n){var e=Jt(++t);r[t]=r[e],r[e]=n}),r}function $t(n,t,e){var r;t=Y.createCallback(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u&&!(r=t
(n[e],e,n)););else y(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function Ft(e){var r=-1,u=pt(),a=e?e.length:0,i=rt(arguments,!0,!0,1),f=[],l=a>=b&&u===n;if(l){var c=o(i);c?(u=t,i=c):l=!1}for(;++r<a;)c=e[r],0>u(i,c)&&f.push(c);return l&&p(i),f}function Tt(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=-1;for(t=Y.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[0]:h;return s(n,0,Ae(Re(0,r),u))}function Wt(t,e,r){if(typeof r=="number"){var u=t?t.length:0;r=0>r?Re(0,u+r):r||0}else if(r)return r=zt(t,e),t[r]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if(typeof t!="number"&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=Y.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Re(0,t);return s(n,r)}function zt(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?Y.createCallback(e,r,1):Gt,t=e(t);u<o;)r=u+o>>>1,e(n[r])<t?u=r+1:o=r;return u}function Pt(n,t,e,r){return typeof t!="boolean"&&null!=t&&(e=(r=e)&&r[t]===n?null:t,t=!1),null!=e&&(e=Y
.createCallback(e,r,3)),at(n,t,e)}function Kt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?St(Rt(n,"length")):0,r=Xt(0>e?0:e);++t<e;)r[t]=Rt(n,t);return r}function Lt(n,t){for(var e=-1,r=n?n.length:0,u={};++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?ft(n,17,$e.call(arguments,2),null,t):ft(n,1,null,null,t)}function Ut(n,t,e){function r(){c&&se(c),a=c=p=h,(g||v!==t)&&(s=me(),i=n.apply(l,o))}function u(){var e=t-(me()-f);0<e?c=de(u,e):(a&&se(a),e=p,a=c=p=h,e&&(s=me(),i=n.apply(l,o)))}var o,a,i,f,l,c,p,s=0,v=!1,g=!0;if(!_t(n))throw new ae;if(t=Re(0,t)||0,!0===e)var y=!0,g=!1;else bt(e)&&(y=e.leading,v="maxWait"in e&&(Re(t,e.maxWait)||0),g="trailing"in e?e.trailing:g);return function(){if(o=arguments,f=me(),l=this,p=g&&(c||!y),!1===v)var e=y&&!c;else{a||y||(s=f);var h=v-(f-s);0<h?a||(a=de(r,h)):(a&&(a=se(a)),s=f,i=n.apply(l,o))}return c||t===v||(c=de(u,t)),e&&(i=n.apply(l,o)),i}}function Vt(n){if(!_t(n))throw new ae;var t=
$e.call(arguments,1);return de(function(){n.apply(h,t)},1)}function Gt(n){return n}function Ht(n,t){var e=n,r=!t||_t(e);t||(e=nt,t=n,n=Y),It(yt(t),function(u){var o=n[u]=t[u];r&&(e.prototype[u]=function(){var t=this.__wrapped__,r=[t];return _e.apply(r,arguments),r=o.apply(n,r),t&&typeof t=="object"&&t===r?this:(r=new e(r),r.__chain__=this.__chain__,r)})})}function Jt(n,t,e){var r=null==n,u=null==t;return null==e&&(typeof n=="boolean"&&u?(e=n,n=1):u||typeof t!="boolean"||(e=t,u=!0)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,r=Be(),e||n%1||t%1?Ae(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t):n+ve(r*(t-n+1))}function Qt(){return this.__wrapped__}e=e?Z.defaults(H.Object(),e,Z.pick(H,D)):H;var Xt=e.Array,Yt=e.Boolean,Zt=e.Date,ne=e.Function,te=e.Math,ee=e.Number,re=e.Object,ue=e.RegExp,oe=e.String,ae=e.TypeError,ie=[],fe=re.prototype,le=e._,ce=ue("^"+oe(fe.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),pe=te.ceil,se=e.clearTimeout,ve=te.floor,he=ne.
prototype.toString,ge=ce.test(ge=re.getPrototypeOf)&&ge,ye=fe.hasOwnProperty,me=ce.test(me=Zt.now)&&me||function(){return+(new Zt)},_e=ie.push,be=e.setImmediate,de=e.setTimeout,we=ie.splice,je=fe.toString,ke=ie.unshift,xe=function(){try{var n={},t=ce.test(t=re.defineProperty)&&t,e=t(n,n,n)&&t}catch(r){}return e}(),Ce=ce.test(Ce=je.bind)&&Ce,Oe=ce.test(Oe=re.create)&&Oe,Ie=ce.test(Ie=Xt.isArray)&&Ie,Ne=e.isFinite,Ee=e.isNaN,Se=ce.test(Se=re.keys)&&Se,Re=te.max,Ae=te.min,De=e.parseInt,Be=te.random,$e=ie.slice,Fe=ce.test(e.attachEvent),Te=Ce&&!/\n|true/.test(Ce+Fe),We={};We[$]=Xt,We[F]=Yt,We[T]=Zt,We[W]=ne,We[z]=re,We[q]=ee,We[P]=ue,We[K]=oe,nt.prototype=Y.prototype;var qe=Y.support={};qe.fastBind=Ce&&!Te,qe.funcDecomp=!ce.test(e.a)&&R.test(v),qe.funcNames=typeof ne.name=="string",Y.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:Y}},Oe||(lt=function(n){if(bt(n)){l.prototype=n;var t=new l;l.prototype=null}return t||{}});var ze=xe?
function(n,t){U.value=t,xe(n,"__bindData__",U)}:l,Pe=Ie||function(n){return n&&typeof n=="object"&&typeof n.length=="number"&&je.call(n)==$||!1},Ke=Se?function(n){return bt(n)?Se(n):[]}:Q,Le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Me=mt(Le),Ue=ue("("+Ke(Me).join("|")+")","g"),Ve=ue("["+Ke(Le).join("")+"]","g"),Ge=it(function(n,t,e){ye.call(n,e)?n[e]++:n[e]=1}),He=it(function(n,t,e){(ye.call(n,e)?n[e]:n[e]=[]).push(t)}),Je=it(function(n,t,e){n[e]=t});Te&&X&&typeof be=="function"&&(Vt=function(n){if(!_t(n))throw new ae;return be.apply(e,arguments)});var Qe=8==De(w+"08")?De:function(n,t){return De(wt(n)?n.replace(E,""):n,t||0)};return Y.after=function(n,t){if(!_t(t))throw new ae;return function(){return 1>--n?t.apply(this,arguments):void 0}},Y.assign=J,Y.at=function(n){for(var t=arguments,e=-1,r=rt(t,!0,!1,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Xt(t);++e<t;)u[e]=n[r[e]];return u},Y.bind=Mt,Y.bindAll=function(n){for(var t=1<arguments.length?rt(arguments,!0,!1,1):yt(n),e=-1
,r=t.length;++e<r;){var u=t[e];n[u]=ft(n[u],1,null,null,n)}return n},Y.bindKey=function(n,t){return 2<arguments.length?ft(t,19,$e.call(arguments,2),null,n):ft(t,3,null,null,n)},Y.chain=function(n){return n=new nt(n),n.__chain__=!0,n},Y.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},Y.compose=function(){for(var n=arguments,t=n.length;t--;)if(!_t(n[t]))throw new ae;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},Y.countBy=Ge,Y.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return et(n,t,e);if("object"!=r)return function(t){return t[n]};var u=Ke(n),o=u[0],a=n[o];return 1!=u.length||a!==a||bt(a)?function(t){for(var e=u.length,r=!1;e--&&(r=ut(t[u[e]],n[u[e]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},Y.curry=function(n,t){return t=typeof t=="number"?t:+t||n.length,ft(n,4,null,null,null,t)},Y.debounce=Ut,Y.defaults=G,Y.defer=Vt,Y.delay=function(n,
t){if(!_t(n))throw new ae;var e=$e.call(arguments,2);return de(function(){n.apply(h,e)},t)},Y.difference=Ft,Y.filter=Ct,Y.flatten=function(n,t,e,r){return typeof t!="boolean"&&null!=t&&(e=(r=e)&&r[t]===n?null:t,t=!1),null!=e&&(n=Et(n,e,r)),rt(n,t)},Y.forEach=It,Y.forEachRight=Nt,Y.forIn=d,Y.forInRight=function(n,t,e){var r=[];d(n,function(n,t){r.push(t,n)});var u=r.length;for(t=et(t,e,3);u--&&!1!==t(r[u--],r[u],n););return n},Y.forOwn=y,Y.forOwnRight=gt,Y.functions=yt,Y.groupBy=He,Y.indexBy=Je,Y.initial=function(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=u;for(t=Y.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return s(n,0,Ae(Re(0,u-r),u))},Y.intersection=function(e){for(var r=arguments,u=r.length,a=-1,f=i(),l=-1,s=pt(),v=e?e.length:0,h=[],g=i();++a<u;){var y=r[a];f[a]=s===n&&(y?y.length:0)>=b&&o(a?r[a]:g)}n:for(;++l<v;){var m=f[0],y=e[l];if(0>(m?t(m,y):s(g,y))){for(a=u,(m||g).push(y);--a;)if(m=f[a],0>(m?t(m,y):s(r[a],y)))continue n;h.push(
y)}}for(;u--;)(m=f[u])&&p(m);return c(f),c(g),h},Y.invert=mt,Y.invoke=function(n,t){var e=$e.call(arguments,2),r=-1,u=typeof t=="function",o=n?n.length:0,a=Xt(typeof o=="number"?o:0);return It(n,function(n){a[++r]=(u?t:n[t]).apply(n,e)}),a},Y.keys=Ke,Y.map=Et,Y.max=St,Y.memoize=function(n,t){function e(){var r=e.cache,u=t?t.apply(this,arguments):_+arguments[0];return ye.call(r,u)?r[u]:r[u]=n.apply(this,arguments)}if(!_t(n))throw new ae;return e.cache={},e},Y.merge=function(n){var t=arguments,e=2;if(!bt(n))return n;if("number"!=typeof t[2]&&(e=t.length),3<e&&"function"==typeof t[e-2])var r=et(t[--e-1],t[e--],2);else 2<e&&"function"==typeof t[e-1]&&(r=t[--e]);for(var t=$e.call(arguments,1,e),u=-1,o=i(),a=i();++u<e;)ot(n,t[u],r,o,a);return c(o),c(a),n},Y.min=function(n,t,e){var u=1/0,o=u;if(!t&&Pe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i<o&&(o=i)}}else t=!t&&wt(n)?r:Y.createCallback(t,e,3),It(n,function(n,e,r){e=t(n,e,r),e<u&&(u=e,o=n)});return o},Y.omit=function(n,t,e){var r=pt(),
u=typeof t=="function",o={};if(u)t=Y.createCallback(t,e,3);else var a=rt(arguments,!0,!1,1);return d(n,function(n,e,i){(u?!t(n,e,i):0>r(a,e))&&(o[e]=n)}),o},Y.once=function(n){var t,e;if(!_t(n))throw new ae;return function(){return t?e:(t=!0,e=n.apply(this,arguments),n=null,e)}},Y.pairs=function(n){for(var t=-1,e=Ke(n),r=e.length,u=Xt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u},Y.partial=function(n){return ft(n,16,$e.call(arguments,1))},Y.partialRight=function(n){return ft(n,32,null,$e.call(arguments,1))},Y.pick=function(n,t,e){var r={};if(typeof t!="function")for(var u=-1,o=rt(arguments,!0,!1,1),a=bt(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else t=Y.createCallback(t,e,3),d(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},Y.pluck=Rt,Y.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,a=t[e];++o<u;)n[o]===a&&(we.call(n,o--,1),u--);return n},Y.range=function(n,t,e){n=+n||0,e=typeof e=="number"?e:+e||1,null==t&&(t=n,n=0);var r=-1;t=Re(0,pe
((t-n)/(e||1)));for(var u=Xt(t);++r<t;)u[r]=n,n+=e;return u},Y.reject=function(n,t,e){return t=Y.createCallback(t,e,3),Ct(n,function(n,e,r){return!t(n,e,r)})},Y.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=Y.createCallback(t,e,3);++r<u;)e=n[r],t(e,r,n)&&(o.push(e),we.call(n,r--,1),u--);return o},Y.rest=qt,Y.shuffle=Bt,Y.sortBy=function(n,t,e){var r=-1,o=n?n.length:0,a=Xt(typeof o=="number"?o:0);for(t=Y.createCallback(t,e,3),It(n,function(n,e,u){var o=a[++r]=f();o.m=t(n,e,u),o.n=r,o.o=n}),o=a.length,a.sort(u);o--;)n=a[o],a[o]=n.o,p(n);return a},Y.tap=function(n,t){return t(n),n},Y.throttle=function(n,t,e){var r=!0,u=!0;if(!_t(n))throw new ae;return!1===e?r=!1:bt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),M.leading=r,M.maxWait=t,M.trailing=u,Ut(n,t,M)},Y.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Xt(n);for(t=et(t,e,1);++r<n;)u[r]=t(r);return u},Y.toArray=function(n){return n&&typeof n.length=="number"?s(n):jt(n)},Y.transform=function(n,t,e,r){var u=
Pe(n);return t=et(t,r,4),null==e&&(u?e=[]:(r=n&&n.constructor,e=lt(r&&r.prototype))),(u?It:y)(n,function(n,r,u){return t(e,n,r,u)}),e},Y.union=function(){return at(rt(arguments,!0,!0))},Y.uniq=Pt,Y.values=jt,Y.where=Ct,Y.without=function(n){return Ft(n,$e.call(arguments,1))},Y.wrap=function(n,t){if(!_t(t))throw new ae;return function(){var e=[n];return _e.apply(e,arguments),t.apply(this,e)}},Y.zip=Kt,Y.zipObject=Lt,Y.collect=Et,Y.drop=qt,Y.each=It,Y.b=Nt,Y.extend=J,Y.methods=yt,Y.object=Lt,Y.select=Ct,Y.tail=qt,Y.unique=Pt,Y.unzip=Kt,Ht(Y),Y.clone=function(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=t,t=!1),tt(n,t,typeof e=="function"&&et(e,r,1))},Y.cloneDeep=function(n,t,e){return tt(n,!0,typeof t=="function"&&et(t,e,1))},Y.contains=kt,Y.escape=function(n){return null==n?"":oe(n).replace(Ve,ct)},Y.every=xt,Y.find=Ot,Y.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=Y.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},Y.findKey=function(n,t,e){var r;return t=
Y.createCallback(t,e,3),y(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},Y.findLast=function(n,t,e){var r;return t=Y.createCallback(t,e,3),Nt(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r},Y.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=Y.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},Y.findLastKey=function(n,t,e){var r;return t=Y.createCallback(t,e,3),gt(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},Y.has=function(n,t){return n?ye.call(n,t):!1},Y.identity=Gt,Y.indexOf=Wt,Y.isArguments=ht,Y.isArray=Pe,Y.isBoolean=function(n){return!0===n||!1===n||je.call(n)==F},Y.isDate=function(n){return n?typeof n=="object"&&je.call(n)==T:!1},Y.isElement=function(n){return n?1===n.nodeType:!1},Y.isEmpty=function(n){var t=!0;if(!n)return t;var e=je.call(n),r=n.length;return e==$||e==K||e==B||e==z&&typeof r=="number"&&_t(n.splice)?!r:(y(n,function(){return t=!1}),t)},Y.isEqual=function(n,t,e,r){return ut(n,t,typeof e=="function"&&et(e,r,2))},Y.isFinite=function(
n){return Ne(n)&&!Ee(parseFloat(n))},Y.isFunction=_t,Y.isNaN=function(n){return dt(n)&&n!=+n},Y.isNull=function(n){return null===n},Y.isNumber=dt,Y.isObject=bt,Y.isPlainObject=g,Y.isRegExp=function(n){return n?typeof n=="object"&&je.call(n)==P:!1},Y.isString=wt,Y.isUndefined=function(n){return typeof n=="undefined"},Y.lastIndexOf=function(n,t,e){var r=n?n.length:0;for(typeof e=="number"&&(r=(0>e?Re(0,r+e):Ae(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},Y.mixin=Ht,Y.noConflict=function(){return e._=le,this},Y.parseInt=Qe,Y.random=Jt,Y.reduce=At,Y.reduceRight=Dt,Y.result=function(n,t){if(n){var e=n[t];return _t(e)?n[t]():e}},Y.runInContext=v,Y.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:Ke(n).length},Y.some=$t,Y.sortedIndex=zt,Y.template=function(n,t,e){var r=Y.templateSettings;n||(n=""),e=G({},e,r);var u,o=G({},e.imports,r.imports),r=Ke(o),o=jt(o),i=0,f=e.interpolate||S,l="__p+='",f=ue((e.escape||S).source+"|"+f.source+"|"+(f===N?C:S).source+"|"+(e.evaluate||S).source+"|$"
,"g");n.replace(f,function(t,e,r,o,f,c){return r||(r=o),l+=n.slice(i,c).replace(A,a),e&&(l+="'+__e("+e+")+'"),f&&(u=!0,l+="';"+f+";__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),i=c+t.length,t}),l+="';\n",f=e=e.variable,f||(e="obj",l="with("+e+"){"+l+"}"),l=(u?l.replace(j,""):l).replace(k,"$1").replace(x,"$1;"),l="function("+e+"){"+(f?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}";try{var c=ne(r,"return "+l).apply(h,o)}catch(p){throw p.source=l,p}return t?c(t):(c.source=l,c)},Y.unescape=function(n){return null==n?"":oe(n).replace(Ue,vt)},Y.uniqueId=function(n){var t=++m;return oe(null==n?"":n)+t},Y.all=xt,Y.any=$t,Y.detect=Ot,Y.findWhere=Ot,Y.foldl=At,Y.foldr=Dt,Y.include=kt,Y.inject=At,y(Y,function(n,t){Y.prototype[t]||(Y.prototype[t]=function(){var t=[this.__wrapped__],e=this.__chain__;return _e.apply(t,arguments),t=n.apply(Y,t),e?new nt(t,e):t})}),Y.first=Tt,Y.last=function(n,t
,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=u;for(t=Y.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[u-1]:h;return s(n,Re(0,u-r))},Y.sample=function(n,t,e){var r=n?n.length:0;return typeof r!="number"&&(n=jt(n)),null==t||e?n?n[Jt(r-1)]:h:(n=Bt(n),n.length=Ae(Re(0,t),n.length),n)},Y.take=Tt,Y.head=Tt,y(Y,function(n,t){var e="sample"!==t;Y.prototype[t]||(Y.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r);return u||null!=t&&(!r||e&&typeof t=="function")?new nt(o,u):o})}),Y.VERSION="2.2.1",Y.prototype.chain=function(){return this.__chain__=!0,this},Y.prototype.toString=function(){return oe(this.__wrapped__)},Y.prototype.value=Qt,Y.prototype.valueOf=Qt,It(["join","pop","shift"],function(n){var t=ie[n];Y.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);return n?new nt(e,n):e}}),It(["push","reverse","sort","unshift"],function(n){var t=ie[n];Y.prototype[n]=function(){return t.apply(this
.__wrapped__,arguments),this}}),It(["concat","slice","splice"],function(n){var t=ie[n];Y.prototype[n]=function(){return new nt(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Y}var h,g=[],y=[],m=0,_=+(new Date)+"",b=75,d=40,w=" 	\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",j=/\b__p\+='';/g,k=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,O=/\w*$/,I=/^function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,E=RegExp("^["+w+"]*0+(?=.$)"),S=/($^)/,R=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,D="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),B="[object Arguments]",$="[object Array]",F="[object Boolean]",T="[object Date]",W="[object Function]",q="[object Number]",z="[object Object]",P="[object RegExp]",K="[object String]",L={};L[W]=!1,L[B]=L[$]=L[F]=L[T]=L[q]=L[z]=L[P]=L[K]=!0;var M=
{leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=V[typeof window]&&window||this,J=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(H=Y);var Z=v();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(H._=Z,define("underscore",[],function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:H._=Z}.call(this),function(){var t=this,e=t.Backbone,i=[],r=i.push,s=i.slice,n=i.splice,a;typeof exports!="undefined"?a=exports:a=t.Backbone={},a.VERSION="1.1.0";var h=t._;!h&&typeof require!="undefined"&&(h=require("underscore")),a.$=t.jQuery||t.Zepto||t.ender||t.$,a.noConflict=function(){return t.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1;var o=a.Events=
{on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this,s=h.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var r,s,n,a,o,u,c,f;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;a=t?[t]:h.keys(this._events);for(o=0,u=a.length;o<u;o++){t=a[o];if(n=this._events[t]){this._events[t]=r=[];if(e||i)for(c=0,f=n.length;c<f;c++)s=n[c],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&r.push(s);r.length||delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;return i&&c(i,e),r&&c(r,arguments),this},stopListening:function(t,e,i){var r=this
._listeningTo;if(!r)return this;var s=!e&&!i;!i&&typeof e=="object"&&(i=this),t&&((r={})[t._listenId]=t);for(var n in r)t=r[n],t.off(e,i,this),(s||h.isEmpty(t._events))&&delete this._listeningTo[n];return this}},u=/\s+/,l=function(t,e,i,r){if(!i)return!0;if(typeof i=="object"){for(var s in i)t[e].apply(t,[s,i[s]].concat(r));return!1}if(u.test(i)){var n=i.split(u);for(var a=0,h=n.length;a<h;a++)t[e].apply(t,[n[a]].concat(r));return!1}return!0},c=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,h);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};h.each(f,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={}),n=e._listenId||(e._listenId=h.uniqueId("l"));return s[n]=
e,!r&&typeof i=="object"&&(r=this),e[t](i,r,this),this}}),o.bind=o.on,o.unbind=o.off,h.extend(a,o);var d=a.Model=function(t,e){var i=t||{};e||(e={}),this.cid=h.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=h.defaults({},i,h.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};h.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return h.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,i){var r,s,n,a,o,u,l,c;if(t==null)return this;typeof t=="object"?(s=t,i=e):(s={})[t]=e,i||(i={});if(!this._validate(s,i))return!1;n=i.unset,o=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=h.clone(this.attributes),this.changed={})
,c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],h.isEqual(c[r],e)||a.push(r),h.isEqual(l[r],e)?delete this.changed[r]:this.changed[r]=e,n?delete c[r]:c[r]=e;if(!o){a.length&&(this._pending=!0);for(var f=0,d=a.length;f<d;f++)this.trigger("change:"+a[f],this,c[a[f]],i)}if(u)return this;if(!o)while(this._pending)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,h.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,h.extend({},t,{unset:!0}))},hasChanged:function(t){return t==null?!h.isEmpty(this.changed):h.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?h.clone(this.changed):!1;var e,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t){if(h.isEqual(r[s],e=t[s]))continue;(i||(i={}))[s]=e}return i},previous:function(t)
{return t==null||!this._previousAttributes?null:this._previousAttributes[t]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(t){t=t?h.clone(t):{},t.parse===void 0&&(t.parse=!0);var e=this,i=t.success;return t.success=function(r){if(!e.set(e.parse(r,t),t))return!1;i&&i(e,r,t),e.trigger("sync",e,r,t)},M(this,t),this.sync("read",this,t)},save:function(t,e,i){var r,s,n,a=this.attributes;t==null||typeof t=="object"?(r=t,i=e):(r={})[t]=e,i=h.extend({validate:!0},i);if(r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=h.extend({},a,r)),i.parse===void 0&&(i.parse=!0);var o=this,u=i.success;return i.success=function(t){o.attributes=a;var e=o.parse(t,i);i.wait&&(e=h.extend(r||{},e));if(h.isObject(e)&&!o.set(e,i))return!1;u&&u(o,t,i),o.trigger("sync",o,t,i)},M(this,i),s=this.isNew()?"create":i.patch?"patch":"update",s==="patch"&&(i.attrs=r),n=this.sync(s,this,i),r&&i.wait&&(this.attributes=a),n},destroy:function(
t){t=t?h.clone(t):{};var e=this,i=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(s){(t.wait||e.isNew())&&r(),i&&i(e,s,t),e.isNew()||e.trigger("sync",e,s,t)};if(this.isNew())return t.success(),!1;M(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=h.result(this,"urlRoot")||h.result(this.collection,"url")||U();return this.isNew()?t:t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},h.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=h.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,h.extend(e,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(t){d.prototype[t]=function(
){var e=s.call(arguments);return e.unshift(this.attributes),h[t].apply(h,e)}});var v=a.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),e.comparator!==void 0&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,h.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};h.extend(v.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,h.extend({merge:!1},e,m))},remove:function(t,e){var i=!h.isArray(t);t=i?[t]:h.clone(t),e||(e={});var r,s,n,a;for(r=0,s=t.length;r<s;r++){a=t[r]=this.get(t[r]);if(!a)continue;delete this._byId[a.id],delete this._byId[a.cid],n=this.indexOf(a),this.models.splice(n,1),this.length--,e.silent||(e.index=n,a.trigger("remove",a,this,e)),this._removeReference(a)}return i?t[0]:t},set:function(t,e){e=h.defaults({},e,g),e.parse&&(t=this.parse(t,
e));var i=!h.isArray(t);t=i?t?[t]:[]:h.clone(t);var r,s,n,a,o,u,l,c=e.at,f=this.model,p=this.comparator&&c==null&&e.sort!==!1,v=h.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},w=e.add,b=e.merge,x=e.remove,E=!p&&w&&x?[]:!1;for(r=0,s=t.length;r<s;r++){o=t[r],o instanceof d?n=a=o:n=o[f.prototype.idAttribute];if(u=this.get(n))x&&(_[u.cid]=!0),b&&(o=o===a?a.attributes:o,e.parse&&(o=u.parse(o,e)),u.set(o,e),p&&!l&&u.hasChanged(v)&&(l=!0)),t[r]=u;else if(w){a=t[r]=this._prepareModel(o,e);if(!a)continue;m.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,a.id!=null&&(this._byId[a.id]=a)}E&&E.push(u||a)}if(x){for(r=0,s=this.length;r<s;++r)_[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,e)}if(m.length||E&&E.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(r=0,s=m.length;r<s;r++)this.models.splice(c+r,0,m[r]);else{E&&(this.models.length=0);var T=E||m;for(r=0,s=T.length;r<s;r++)this.models.push(T[r])}}l&&this.sort({silent:!0});if(!e.silent){for(r=0,s=
m.length;r<s;r++)(a=m[r]).trigger("add",a,this,e);(l||E&&E.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;i<r;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),t=this.add(t,h.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,h.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,h.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return t==null?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return h.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(
t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),h.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return h.invoke(this.models,"get",t)},fetch:function(t){t=t?h.clone(t):{},t.parse===void 0&&(t.parse=!0);var e=t.success,i=this;return t.success=function(r){var s=t.reset?"reset":"set";i[s](r,t),e&&e(i,r,t),i.trigger("sync",i,r,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){e=e?h.clone(e):{};if(!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,r=e.success;return e.success=function(t,e,s){s.wait&&i.add(t,s),r&&r(t,e,s)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t.collection||
(t.collection=this),t;e=e?h.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;t==="destroy"&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],e.id!=null&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(y,function(t){v.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),h[t].apply(h,
e)}});var _=["groupBy","countBy","sortBy"];h.each(_,function(t){v.prototype[t]=function(e,i){var r=h.isFunction(e)?e:function(t){return t.get(e)};return h[t](this.models,r,i)}});var w=a.View=function(t){this.cid=h.uniqueId("view"),t||(t={}),h.extend(this,h.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(w.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=h.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];h.isFunction(i)||(i=this[t[e]]);if(!i)continue;var r=e.match(b),s=r
[1],n=r[2];i=h.bind(i,this),s+=".delegateEvents"+this.cid,n===""?this.$el.on(s,i):this.$el.on(s,n,i)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var t=h.extend({},h.result(this,"attributes"));this.id&&(t.id=h.result(this,"id")),this.className&&(t["class"]=h.result(this,"className"));var e=a.$("<"+h.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}else this.setElement(h.result(this,"el"),!1)}}),a.sync=function(t,e,i){var r=T[t];h.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:r,dataType:"json"};i.url||(s.url=h.result(e,"url")||U()),i.data==null&&e&&(t==="create"||t==="update"||t==="patch")&&(s.contentType="application/json",s.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{});if(i.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){s.type="POST",i.emulateJSON&&(
s.data._method=r);var n=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r);if(n)return n.apply(this,arguments)}}s.type!=="GET"&&!i.emulateJSON&&(s.processData=!1),s.type==="PATCH"&&E&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var o=i.xhr=a.ajax(h.extend(s,i));return e.trigger("request",e,o,i),o};var E=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var k=a.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,H=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(k.prototype,o,{initialize:function(){},route:function(t,e,i){h.isRegExp(t)||(t=this._routeToRegExp(t)),h.isFunction(e)&&(i=e,e=""),i||(i=this[e]);var r=this;return a.history.route(t,function(
s){var n=r._extractParameters(t,s);i&&i.apply(r,n),r.trigger.apply(r,["route:"+e].concat(n)),r.trigger("route",e,n),a.history.trigger("route",r,e,n)}),this},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(!this.routes)return;this.routes=h.result(this,"routes");var t,e=h.keys(this.routes);while((t=e.pop())!=null)this.route(t,this.routes[t])},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(S,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return h.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,P=/msie [\w.]+/,C=/\/$/,j=/[?#].*$/;I.started=!1,h.extend(I.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match
(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=h.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),i=document.documentMode,r=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(O,"/"),r&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in 
window&&!r?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var s=this.location,n=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!n)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&n&&s.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe)));if(e===this.fragment)return!1;this.iframe&&
this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),h.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!I.started)return!1;if(!e||e===!0)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(j,"");if(this.fragment===t)return;this.fragment=t,t===""&&i!=="/"&&(i=i.slice(0,-1));if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),a.history=new I;var R=function(t,e){var i=this,r;t&&h.has(t,"constructor")?r=t.constructor:
r=function(){return i.apply(this,arguments)},h.extend(r,i,e);var s=function(){this.constructor=r};return s.prototype=i.prototype,r.prototype=new s,t&&h.extend(r.prototype,t),r.__super__=i.prototype,r};d.extend=v.extend=k.extend=w.extend=I.extend=R;var U=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var i=e.error;e.error=function(r){i&&i(t,r,e),t.trigger("error",t,r,e)}}}.call(this),define("backbone",["underscore","jquery"],function(global){return function(){var ret,fn;return fn=function(){Backbone.$=window.$},ret=fn.apply(global,arguments),ret||global.Backbone}}(this));function FastClick(a){var c,b=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0,this.touchBoundary=10,this.layer=a;if(!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(b,arguments)},this.onMouse=function()
{return FastClick.prototype.onMouse.apply(b,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(b,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(b,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(b,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(b,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(c,b,e){var f=Node.prototype.removeEventListener;"click"===c?f.call(a,c,b
.hijacked||b,e):f.call(a,c,b,e)},a.addEventListener=function(c,b,e){var f=Node.prototype.addEventListener;"click"===c?f.call(a,c,b.hijacked||(b.hijacked=function(a){a.propagationStopped||b(a)}),e):f.call(a,c,b,e)}),"function"==typeof a.onclick&&(c=a.onclick,a.addEventListener("click",function(a){c(a)},!1),a.onclick=null))}FastClick.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className
)},FastClick.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,c){var b,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=c.changedTouches[0],b=document.createEvent("MouseEvents"),b.initMouseEvent("click",!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),b.forwardedTouchEvent=!0,a.dispatchEvent(b)},FastClick.prototype.focus=function(a){var c;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(c=a.value.length,a.setSelectionRange(c,c)):a.focus()},FastClick.prototype.updateScrollParent=function(a){var c,b;c=a.fastClickScrollParent;if(!c||!c.contains(a)){b=a;do{if(b.scrollHeight>b.offsetHeight){c=b,a.fastClickScrollParent=
b;break}b=b.parentElement}while(b)}c&&(c.fastClickLastScrollTop=c.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){var c,b,d;if(1<a.targetTouches.length)return!0;c=this.getTargetElementFromEventTarget(a.target),b=a.targetTouches[0];if(this.deviceIsIOS){d=window.getSelection();if(d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(b.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=b.identifier,this.updateScrollParent(c)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=c,this.touchStartX=b.pageX,this.touchStartY=b.pageY,200>a.timeStamp-this.lastClickTime&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){a=a.changedTouches[0];var c=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>c||Math.abs(a.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=
function(a){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0},FastClick.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){var c,b,d=this.targetElement;if(!this.trackingClick)return!0;if(200>a.timeStamp-this.lastClickTime)return this.cancelNextClick=!0;this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(b=a.changedTouches[0],d=document.elementFromPoint(b.pageX-window.pageXOffset,b.pageY-window.pageYOffset)||d,d.fastClickScrollParent=this.targetElement.fastClickScrollParent),b=d.tagName.toLowerCase();if("label"===b){if(c=this.findControl(d)){this.focus(d);if(this.deviceIsAndroid
)return!1;d=c}}else if(this.needsFocus(d))return 100<a.timeStamp-c||this.deviceIsIOS&&window.top!==window&&"input"===b?(this.targetElement=null,!1):(this.focus(d),this.deviceIsIOS4&&"select"===b||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(c=d.fastClickScrollParent)&&c.fastClickLastScrollTop!==c.scrollTop?!0:(this.needsClick(d)||(a.preventDefault(),this.sendClick(d,a)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){return this.targetElement&&!a.forwardedTouchEvent&&a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(a=this.onMouse(a),a||(this.
targetElement=null),a)},FastClick.prototype.destroy=function(){var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){var c;if("undefined"==typeof window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if((c=document.querySelector("meta[name=viewport]"))&&-1!==c.content.indexOf("user-scalable=no"))return!0}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){return new FastClick(a)},"undefined"!=typeof define&&define.amd?define("fastclick",[],function(){return FastClick
}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("utils/Logger",[],function(){var Logger={modeDebug:!1,debug:function(text){this.modeDebug&&console.log(text)},error:function(text){console.error(text)},exception:function(text){console.error(text)}};return Logger}),define("utils/AppView",["jquery","underscore","backbone","utils/Logger"],function($,_,Backbone,LOGGER){var AppView={init:function(){var self=this},show:function(view){return this.currentView&&(this.currentView.onClose(),this.lastView=this.currentView),this.currentView=view,this.currentView.prepare(),view},changePage:function(view){this.lastView&&this.lastView.$el.hide(),view.$el.show()}};return _.extend(AppView,Backbone.Events),AppView}),define("utils/LocalParams",[],function(){var LocalParams={init:function(){var self=this;_.isNull(self.isFirstLaunch())&&self.setFirstLaunch("true")},setParam:function(name,value){localStorage&&localStorage
.setItem(name,value)},getParam:function(name){var param=localStorage.getItem(name);return param=="true"?param=!0:param=="false"?param=!1:param=="null"&&(param=null),param},setFirstLaunch:function(firstLaunch){return this.setParam("PREGO.firstLaunch",firstLaunch)},isFirstLaunch:function(){return this.getParam("PREGO.firstLaunch")},setUserTranslationLang:function(lang){this.setParam("PREGO.translation",lang)},getUserTranslationLang:function(){return this.getParam("PREGO.translation")},setBonusUnlocked:function(){this.setParam("PREGO.bonusUnlocked","true")},getBonusUnlocked:function(){return this.getParam("PREGO.bonusUnlocked")}};return LocalParams}),define("utils/Localization",["underscore","backbone","utils/LocalParams"],function(_,Backbone,LocalParams){var Localization={init:function(lang){var self=this;if(lang&&self.isLangInSupportedTranslation(lang)){self.loadTranslation(lang,!0);return}if(_.isNull(LocalParams.getUserTranslationLang())){var navigatorLang=self.getNavigatorLang();self.isLangInSupportedTranslation
(navigatorLang)?self.loadTranslation(navigatorLang,!0):self.isLangInSupportedTranslation("en")&&self.loadTranslation("en",!0)}else self.loadTranslation(LocalParams.getUserTranslationLang(),!0)},loadTranslation:function(translation,firstLoad){var self=this;$.ajax({url:self.getPath(translation),async:!0,success:function(data){self.STR=data,self.translationLoaded=translation,LocalParams.setUserTranslationLang(translation),firstLoad?self.trigger("STRSuccess STRLoaded"):self.trigger("STRSuccess STRChanged")},error:function(e){console.log("Error while loading : "+self.getPath(translation))}})},getPath:function(translation){var self=this,path="data/content/string_"+translation+".json";return path},getSupportedTranslation:function(){return["en","fr","es"]},isLangInSupportedTranslation:function(lang){return _.contains(this.getSupportedTranslation(),lang)},getNavigatorLang:function(){var language=window.navigator.language,lang="";return language&&(lang=language.substring(0,2)),lang}};return _.extend
(Localization,Backbone.Events),Localization}),define("models/Still",["jquery","underscore","backbone","utils/Logger"],function($,_,Backbone,LOGGER){var Still=Backbone.Model.extend({loaded:!1,initialize:function(){var self=this;self.set({img:new Image,imgHighRes:new Image});var img=self.get("img");img.onload=function(){LOGGER.debug("Img :"+img.src),self.trigger("imgloaded")},img.src=self.get("srcLowRes")},loadHighRes:function(callbackLoaded){var imgHighRes=this.get("imgHighRes");imgHighRes.src=this.get("srcHighRes"),imgHighRes.loaded&&callbackLoaded(),imgHighRes.onload=function(){callbackLoaded(),imgHighRes.loaded=!0}},clear:function(){self.set({img:null,imgHighRes:null})}});return Still}),define("utils/GeoUtils",["underscore","utils/Logger"],function(_,LOGGER){Math.toRadians=function(degrees){return degrees*Math.PI/180},Math.toDegrees=function(radians){return radians*180/Math.PI};var GeoUtils={distance:function(point1,point2){var R=6378137,dLat=Math.toRadians(point2[0]-point1[0]),dLong=
Math.toRadians(point2[1]-point1[1]),a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(Math.toRadians(point1[0]))*Math.cos(Math.toRadians(point2[0]))*Math.sin(dLong/2)*Math.sin(dLong/2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),d=R*c;return d},getBearing:function(point1,point2){startLat=Math.toRadians(point1[0]),startLong=Math.toRadians(point1[1]),endLat=Math.toRadians(point2[0]),endLong=Math.toRadians(point2[1]);var dLong=endLong-startLong,dPhi=Math.log(Math.tan(endLat/2+Math.PI/4)/Math.tan(startLat/2+Math.PI/4));return Math.abs(dLong)>Math.PI&&(dLong>0?dLong=-(2*Math.PI-dLong):dLong=2*Math.PI+dLong),(Math.toDegrees(Math.atan2(dLong,dPhi))+360)%360},_midpointcoordinates:function(point1,point2){var lat1=point1[0],lon1=point1[1],lat2=point2[0],lon2=point2[1],dLon=Math.toRadians(lon2-lon1);lat1=Math.toRadians(lat1),lat2=Math.toRadians(lat2),lon1=Math.toRadians(lon1);var Bx=Math.cos(lat2)*Math.cos(dLon),By=Math.cos(lat2)*Math.sin(dLon),lat3=Math.atan2(Math.sin(lat1)+Math.sin(lat2),Math.sqrt((Math
.cos(lat1)+Bx)*(Math.cos(lat1)+Bx)+By*By)),lon3=lon1+Math.atan2(By,Math.cos(lat1)+Bx);return[Math.toDegrees(lat3),Math.toDegrees(lon3)]},generateIntermediateSegments:function(arraySegments,arrayPoints,nbTotalPoints){var self=this,newArraySegments=[];return $.each(arraySegments,function(index,segment){var midPointCoordinates=self._midpointcoordinates(segment[0].coordinates,segment[1].coordinates),segmentFirstPoint=segment[0],segmentLastPoint=segment[1],positionMidPoint=Math.round((segmentLastPoint.position-segmentFirstPoint.position)/2+segmentFirstPoint.position);arrayPoints[positionMidPoint]&&(arrayPoints[positionMidPoint+1]?arrayPoints[positionMidPoint-1]?LOGGER.debug("UNABLE TO FIND A SLOT FOR "+midPointCoordinates+" position : "+positionMidPoint):positionMidPoint-=1:positionMidPoint+=1);var midPoint={coordinates:midPointCoordinates,position:positionMidPoint};newArraySegments.push([segmentFirstPoint,midPoint]),arrayPoints[positionMidPoint]=midPoint.coordinates,newArraySegments.push([midPoint
,segmentLastPoint])}),newArraySegments.length+1>=nbTotalPoints?(_.size(arrayPoints)>nbTotalPoints&&(arrayPoints=_.reject(arrayPoints,function(point,index){return parseInt(index,10)>=nbTotalPoints})),arrayPoints):self.generateIntermediateSegments(newArraySegments,arrayPoints,nbTotalPoints)},generateIntermediatePoints:function(pointA,pointB,nbTotalPoints){var self=this;if(nbTotalPoints==2)return{0:pointA,1:pointB};var objectPointA={coordinates:pointA,position:0},objectPointB={coordinates:pointB,position:nbTotalPoints-1},arraySegments=[[objectPointA,objectPointB]],collectionPoints={};collectionPoints[objectPointA.position]=objectPointA.coordinates,collectionPoints[objectPointB.position]=objectPointB.coordinates;var allIntermediatesPoints=self.generateIntermediateSegments(arraySegments,collectionPoints,nbTotalPoints);return allIntermediatesPoints},generateIntermediatePointsOfArray:function(arrayPoints,nbTotalPoints){var self=this;if(_.isUndefined(nbTotalPoints)){LOGGER.debug("ERROR nbTotalPoints undefined"
);return}var allIntermediatesPoints={},collectionOfSingleSegments=[],individualSegment={},nbPointsOnThisSegment=0,distanceTotal=0,nbTotalPointsGenerated=0;if(arrayPoints.length<3)allIntermediatesPoints=self.generateIntermediatePoints(arrayPoints[0],arrayPoints[1],nbTotalPoints);else{for(var i=0;i<arrayPoints.length-1;i++)individualSegment={},individualSegment.pointStart=arrayPoints[i],individualSegment.pointEnd=arrayPoints[i+1],individualSegment.distance=self.distance(individualSegment.pointStart,individualSegment.pointEnd),distanceTotal+=individualSegment.distance,collectionOfSingleSegments.push(individualSegment);for(var j=0;j<collectionOfSingleSegments.length;j++)individualSegment=collectionOfSingleSegments[j],nbPointsOnThisSegment=Math.round(individualSegment.distance*nbTotalPoints/distanceTotal),j==collectionOfSingleSegments.length-1&&(nbPointsOnThisSegment=nbTotalPoints-nbTotalPointsGenerated),individualSegment.intermediatePoints=self.generateIntermediatePoints(individualSegment.pointStart
,individualSegment.pointEnd,nbPointsOnThisSegment),$.each(individualSegment.intermediatePoints,function(index,intermediatePoint,index2){allIntermediatesPoints[nbTotalPointsGenerated+parseInt(index,10)]=intermediatePoint}),nbTotalPointsGenerated+=nbPointsOnThisSegment}return allIntermediatesPoints},invertArrayLongLatToLatLong:function(lonLatArray){var latLonArray=[];return $.each(lonLatArray,function(lonLatIndex,lonLat){latLonArray.push([lonLat[1],lonLat[0]])}),latLonArray},prepareWayPathFromGeoJSONLine:function(geoJsonLinePath,nbPoints){var self=this;geoJsonLinePath=self.invertArrayLongLatToLatLong(geoJsonLinePath);var path=self.generateIntermediatePointsOfArray(geoJsonLinePath,nbPoints);return path}};return window.GeoUtils=GeoUtils,GeoUtils}),define("models/Stills",["jquery","underscore","backbone","models/Still","utils/GeoUtils"],function($,_,Backbone,Still,GeoUtils){var Stills=Backbone.Collection.extend({model:Still,init:function(params){var self=this;self.nbImages=params.nbStills,self
.pathToStills=params.wayName,self.stillsPath=params.wayPath,self.nbImgLoaded=0,self.percentageLoaded=0,self.loadingStopped=!1,self.stillLoaded=[]},fetch:function(){var self=this,accurate=2;$.each([20,10,5,2,1],function(index,val){for(var i=0;i<self.nbImages;i+=val){if(self.loadingStopped)break;if(self.get(i)===undefined){var still=new Still({id:i,srcLowRes:"data/"+self.pathToStills+"/lowres/way"+self.lpad(i,2)+".jpg",srcHighRes:"data/"+self.pathToStills+"/highres/way"+self.lpad(i,2)+".jpg"});still.on("imgloaded",function(){this.loaded=!0,self.stillLoaded.push(this.id),self.nbImgLoaded++,self.percentageLoaded=Math.floor(self.nbImgLoaded*accurate/(self.nbImages+1)*100),self.trigger("updatePercentageLoaded"),self.nbImgLoaded==parseInt(self.nbImages/accurate,10)&&self.trigger("loadingFinished")}),self.add(still)}}})},lpad:function(value,padding){var zeroes=(new Array(padding+1)).join("0");return(zeroes+value).slice(-padding)},clear:function(){self=this,self.loadingStopped=!0,window.stop(),_
.each(self.models,function(still){self.remove(still)}),self.stillLoaded=[]}});return Stills}),define("models/Way",["jquery","underscore","backbone","models/Stills","utils/GeoUtils"],function($,_,Backbone,Stills){var Way=Backbone.Model.extend({nbStills:null,wayStills:null,percentageLoaded:null,loadingFinished:!1,wayPath:null,wayName:null,wayConnectionsStart:null,wayConnectionsEnd:null,initialize:function(params){var self=this;self.nbStills=params.nbStills,self.wayName=params.wayName,params.wayPath=GeoUtils.prepareWayPathFromGeoJSONLine(params.wayPath,self.nbStills),self.wayPath=params.wayPath,self.wayConnectionsEnd=params.wayConnectionsEnd,self.wayStills=new Stills,self.wayStills.init(params),self.wayStills.on("updatePercentageLoaded",function(){self.percentageLoaded=self.wayStills.percentageLoaded,self.trigger("updatePercentageLoaded")}),self.wayStills.on("loadingFinished",function(){self.loadingFinished=!0,self.trigger("loadingFinished")})},fetch:function(){var self=this;self.wayStills
.fetch()},clear:function(){var self=this;self.wayStills.clear()}});return Way}),define("text",["module"],function(module){var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation=typeof location!="undefined"&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||undefined),buildMap={},masterConfig=module.config&&module.config()||{};text={version:"2.0.10",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace
(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.indexOf("."),isRelative=name.indexOf("./")===0||name.indexOf("../")===0;return index!==-1&&(!isRelative||index>1)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,temp=ext||modName,index=temp.indexOf("!"),index!==-1&&(strip=temp.substring(index+1)==="strip",temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return match?(uProtocol=match[2],uHostName=
match[3],uHostName=uHostName.split(":"),uPort=uHostName[1],uHostName=uHostName[0],(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName.toLowerCase()===hostname.toLowerCase())&&(!uPort&&!uHostName||uPort===port)):!0},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config.isBuild&&!config.inlineText){onLoad();return}masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;if(url.indexOf("empty:")===0){onLoad();return}!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed
.strip,content,onLoad)})},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}};if(masterConfig.env==="node"||!masterConfig.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync
(url,"utf8");file.indexOf("\ufeff")===0&&(file=file.substring(1)),callback(file)}catch(e){errback(e)}};else if(masterConfig.env==="xhr"||!masterConfig.env&&text.createXhr())text.get=function(url,callback,errback,headers){var xhr=text.createXhr(),header;xhr.open("GET",url,!0);if(headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;xhr.readyState===4&&(status=xhr.status,status>399&&status<600?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)};else if(masterConfig.env==="rhino"||!masterConfig.env&&typeof Packages!="undefined"&&typeof java!="undefined")text.get=function(url,callback){var stringBuffer,line,encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"
),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),content="";try{stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&line.charAt(0)===65279&&(line=line.substring(1)),line!==null&&stringBuffer.append(line);while((line=input.readLine())!==null)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)};else if(masterConfig.env==="xpconnect"||!masterConfig.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)Cc=Components.classes,Ci=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance
(Ci.nsIFileInputStream),inStream.init(fileObj,1,0,!1),convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream),convertStream.init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}};return text}),define("json",["text"],function(text){var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse=typeof JSON!="undefined"&&typeof JSON.parse=="function"?JSON.parse:function(val){return eval("("+val+")")},buildMap={};function cacheBust(url){return url=url.replace(CACHE_BUST_FLAG,""),url+=url.indexOf("?")<0?"?":"&",url+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}return{load:function(name,req,onLoad,config){!config.isBuild||config.inlineJSON!==!1&&name.indexOf(CACHE_BUST_QUERY_PARAM+"=")===-1?text.
get(req.toUrl(name),function(data){config.isBuild?(buildMap[name]=data,onLoad(data)):onLoad(jsonParse(data))},onLoad.error,{accept:"application/json"}):onLoad(null)},normalize:function(name,normalize){return name.indexOf(CACHE_BUST_FLAG)===-1?name:cacheBust(name)},write:function(pluginName,moduleName,write){if(moduleName in buildMap){var content=buildMap[moduleName];write('define("'+pluginName+"!"+moduleName+'", function(){ return '+content+";});\n")}}}}),define("json!data/ways.json",function(){return[{wayName:"casapare",nbStills:74,wayPath:[[-75.61152577400208,6.257881845167216],[-75.61136752367018,6.257825854403986]],wayConnectionsEnd:[]}]}),define("models/Ways",["jquery","underscore","backbone","models/Way","json!data/ways.json"],function($,_,Backbone,Way,WAYS){var Ways=Backbone.Collection.extend({model:Way,initialize:function(params){var self=this;_.each(WAYS,function(wayParams){self.add(new Way(wayParams))})}});return new Ways}),!function(){var e={},t=null,n=!0,r=!1;try{"undefined"!=typeof 
AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:n=!1}catch(i){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(i){r=!0}else r=!0;if(n){var s=void 0===t.createGain?t.createGainNode():t.createGain();s.gain.value=1,s.connect(t.destination)}var o=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=n,this.ctx=t,this.noAudio=r,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};o.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&1>=e){t._volume=e,n&&(s.gain.value=e);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var i=0;i<t._howls[r]._audioNode.length;i++)t._howls[r]._audioNode[i].volume=t._howls[r]._volume*t._volume;return t}return n?s.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,n&&(s.gain.value=e?0:t._volume);for(var r in t._howls)if(t._howls.hasOwnProperty
(r)&&t._howls[r]._webAudio===!1)for(var i=0;i<t._howls[r]._audioNode.length;i++)t._howls[r]._audioNode[i].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var n=function(){var r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r,i.connect(t.destination),void 0===i.start?i.noteOn(0):i.start(0),setTimeout(function(){(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",n,!1))},0)};return window.addEventListener("touchstart",n,!1),e}}};var u=null,a={};r||(u=new Audio,a={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace
(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var f=new o(a),l=function(e){var r=this;r._autoplay=e.autoplay||!1,r._buffer=e.buffer||!1,r._duration=e.duration||0,r._format=e.format||null,r._loop=e.loop||!1,r._loaded=!1,r._sprite=e.sprite||{},r._src=e.src||"",r._pos3d=e.pos3d||[0,0,-0.5],r._volume=void 0!==e.volume?e.volume:1,r._urls=e.urls||[],r._rate=e.rate||1,r._model=e.model||null,r._onload=[e.onload||function(){}],r._onloaderror=[e.onloaderror||function(){}],r._onend=[e.onend||function(){}],r._onpause=[e.onpause||function(){}],r._onplay=[e.onplay||function(){}],r._onendTimer=[],r._webAudio=n&&!r._buffer,r._audioNode=[],r._webAudio&&r._setupAudioNode(),void 0!==t&&t&&f.iOSAutoEnable&&f._enableiOSAudio(),f._howls.push(r)
,r.load()};if(l.prototype={load:function(){var e=this,t=null;if(r)return void e.on("loaderror");for(var n=0;n<e._urls.length;n++){var i,s;if(e._format)i=e._format;else{if(s=e._urls[n],i=/^data:audio\/([^;,]+);/i.exec(s),i||(i=/\.([^.]+)$/.exec(s.split("?",1)[0])),!i)return void e.on("loaderror");i=i[1].toLowerCase()}if(a[i]){t=e._urls[n];break}}if(!t)return void e.on("loaderror");if(e._src=t,e._webAudio)c(e,t);else{var u=new Audio;u.addEventListener("error",function(){u.error&&4===u.error.code&&(o.noAudio=!0),e.on("loaderror",{type:u.error?u.error.code:0})},!1),e._audioNode.push(u),u.src=t,u._pos=0,u.preload="auto",u.volume=f._muted?0:e._volume*f.volume();var l=function(){e._duration=Math.ceil(10*u.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),u.removeEventListener("canplaythrough",l,!1)};u.addEventListener("canplaythrough",l,!1),u.load()}return e},urls:function(e){var t=
this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,n){var r=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),r._loaded?r._sprite[e]?(r._inactiveNode(function(i){i._sprite=e;var s=i._pos>0?i._pos:r._sprite[e][0]/1e3,o=0;r._webAudio?(o=r._sprite[e][1]/1e3-i._pos,i._pos>0&&(s=r._sprite[e][0]/1e3+s)):o=r._sprite[e][1]/1e3-(s-r._sprite[e][0]/1e3);var u,a=!!r._loop||!!r._sprite[e][2],l="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:l,sprite:e,loop:a};u=setTimeout(function(){!r._webAudio&&a&&r.stop(t.id).play(e,t.id),r._webAudio&&!a&&(r._nodeById(t.id).paused=!0,r._nodeById(t.id)._pos=0,r._clearEndTimer(t.id)),r._webAudio||a||r.stop(t.id),r.on("end",l)},1e3*o),r._onendTimer.push({timer:u,id:t.id})}(),r._webAudio){var c=r._sprite[e][0]/1e3,h=r._sprite[e][1]/1e3;i.id=l,i.paused=!1,d(r,[a,c,h],l),r._playStart=t.currentTime,i.gain.value=r._volume,void 0===i.bufferSource.start?
i.bufferSource.noteGrainOn(0,s,o):i.bufferSource.start(0,s,o)}else{if(4!==i.readyState&&(i.readyState||!navigator.isCocoonJS))return r._clearEndTimer(l),function(){var t=r,s=e,o=n,u=i,a=function(){t.play(s,o),u.removeEventListener("canplaythrough",a,!1)};u.addEventListener("canplaythrough",a,!1)}(),r;i.readyState=4,i.id=l,i.currentTime=s,i.muted=f._muted||i.muted,i.volume=r._volume*f.volume(),setTimeout(function(){i.play()},0)}return r.on("play"),"function"==typeof n&&n(l),r}),r):("function"==typeof n&&n(),r):(r.on("load",function(){r.play(e,n)}),r)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=t.pos(null,e),t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,void 0===n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t.
_clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=0,t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,void 0===n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.muted=!1),t},volume:function(e,t){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;var r=t?n._nodeById(t):n._activeNode();return r&&(n._webAudio?r.gain.value=e:r.volume=e*f.volume()),n}return n._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=
this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,n){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(e)}),"number"==typeof e?r:r._pos||0;e=parseFloat(e);var i=n?r._nodeById(n):r._activeNode();if(i)return e>=0?(r.pause(n),i._pos=e,r.play(i._sprite,n),r):r._webAudio?i._pos+(t.currentTime-r._playStart):i.currentTime;if(e>=0)return r;for(var s=0;s<r._audioNode.length;s++)if(r._audioNode[s].paused&&4===r._audioNode[s].readyState)return r._webAudio?r._audioNode[s]._pos:r._audioNode[s].currentTime},pos3d:function(e,t,n,r){var i=this;if(t=void 0!==t&&t?t:0,n=void 0!==n&&n?n:-0.5,!i._loaded)return i.on("play",function(){i.pos3d(e,t,n,r)}),i;if(e>=0||0>e){if(i._webAudio){var s=r?i._nodeById(r):i._activeNode();s&&(i._pos3d=[e,t,n],s.panner.setPosition(e,t,n),s.panner.panningModel=i._model||"HRTF")}return i}return i._pos3d},fade:function(e,t,n,r,i){var s=this,o=Math.abs(e-t),u=e>t?"down":"up",a=o/.01,f=n/a;if(!s._loaded)return s.on("load",function(){s.fade(e,t,n,r
,i)}),s;s.volume(e,i);for(var l=1;a>=l;l++)!function(){var e=s._volume+("up"===u?.01:-0.01)*l,n=Math.round(1e3*e)/1e3,o=t;setTimeout(function(){s.volume(n,i),n===o&&r&&r()},f*l)}()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,r){var i=this;return i.fade(i._volume,e,t,function(){n&&n(),i.pause(r),i.on("end")},r)},_nodeById:function(e){for(var t=this,n=t._audioNode[0],r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){n=t._audioNode[r];break}return n},_activeNode:function(){for(var e=this,t=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,n=null,r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&4===t._audioNode[r].readyState){e(t._audioNode[r]),n=!0;break}if(t._drainPool(),!n){var i;if(t._webAudio)i=t._setupAudioNode(),e(i);else{t.load(),i=t._audioNode[t._audioNode.length-1];var s=navigator.isCocoonJS?"canplaythrough":"loadedmetadata"
,o=function(){i.removeEventListener(s,o,!1),e(i)};i.addEventListener(s,o,!1)}}},_drainPool:function(){var e,t=this,n=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&n++;for(e=t._audioNode.length-1;e>=0&&!(5>=n);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),n--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,n=0,r=0;r<t._onendTimer.length;r++)if(t._onendTimer[r].id===e){n=r;break}var i=t._onendTimer[n];i&&(clearTimeout(i.timer),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;return n[r]=void 0===t.createGain?t.createGainNode():t.createGain(),n[r].gain.value=e._volume,n[r].paused=!0,n[r]._pos=0,n[r].readyState=4,n[r].connect(s),n[r].panner=t.createPanner(),n[r].panner.panningModel=e._model||"equalpower",n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[r].panner.connect(n[r]),n[r]},on:function(e,t){var n=this,r=n["_on"+e];if("function"==typeof t)r.push(t);else for(
var i=0;i<r.length;i++)t?r[i].call(n,t):r[i].call(n);return n},off:function(e,t){var n=this,r=n["_on"+e],i=t?""+t:null;if(i){for(var s=0;s<r.length;s++)if(i===""+r[s]){r.splice(s,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var t=this,n=t._audioNode,r=0;r<t._audioNode.length;r++)n[r].paused||(t.stop(n[r].id),t.on("end",n[r].id)),t._webAudio?n[r].disconnect(0):n[r].src="";for(r=0;r<t._onendTimer.length;r++)clearTimeout(t._onendTimer[r].timer);var i=f._howls.indexOf(t);null!==i&&i>=0&&f._howls.splice(i,1),delete e[t._src],t=null}},n)var c=function(t,n){if(n in e)return t._duration=e[n].duration,void p(t);if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);h(i.buffer,t,n)}else{var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer",o.onload=function(){h(o.response,t,n)},o.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[n]
,t.load())};try{o.send()}catch(u){o.onerror()}}},h=function(n,r,i){t.decodeAudioData(n,function(t){t&&(e[i]=t,p(r,t))},function(){r.on("loaderror")})},p=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},d=function(n,r,i){var s=n._nodeById(i);s.bufferSource=t.createBufferSource(),s.bufferSource.buffer=e[n._src],s.bufferSource.connect(s.panner),s.bufferSource.loop=r[0],r[0]&&(s.bufferSource.loopStart=r[1],s.bufferSource.loopEnd=r[1]+r[2]),s.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define("howl",[],function(){return{Howler:f,Howl:l}}),"undefined"!=typeof exports&&(exports.Howler=f,exports.Howl=l),"undefined"!=typeof window&&(window.Howler=f,window.Howl=l)}(),define("models/Sound",["jquery","underscore","backbone","utils/GeoUtils","howl"],function($,_,Backbone,GeoUtils){var Sound=Backbone.Model.extend
({position:undefined,vol:undefined,initialize:function(){var self=this;self.set({img:new Image,imgHighRes:new Image});var name=self.get("name");self.position=self.get("position"),self.db=self.get("db"),self.sound=new Howl({urls:["data/sounds/"+name+".mp3"],loop:!0,volume:0}),self.sound.play()},updateVolume:function(newUserPosition){var self=this,distance=GeoUtils.distance(self.position,newUserPosition);self.vol=self.calculateVolume(distance),self.sound.volume(self.vol)},updatePan:function(newUserPosition){var self=this,xDiff=self.position[0]-newUserPosition[0],yDiff=self.position[1]-newUserPosition[1],angle=Math.atan2(yDiff,xDiff)*(180/Math.PI);angle-=GeoUtils.getBearing([6.258111140611143,-75.61215072870255],[6.257839185538634,-75.61139702796936]),console.log("Bearing "+GeoUtils.getBearing(newUserPosition,self.position)),angle<-180?angle+=360:angle>180&&(angle-=360),console.log("ANGLE: "+angle);var panPosition=angle/90;if(Math.abs(panPosition)>1){var x=Math.abs(panPosition)-1;panPosition=
panPosition>0?1-x:-1+x}console.log("PANPOSITION "+panPosition),self.sound.pos3d(panPosition,1,1)},updateSound:function(newUserPosition){var self=this;self.updateVolume(newUserPosition)},calculateVolume:function(distance){var self=this,vol=1/(distance*distance);return vol=Math.min(vol*self.db,1),vol}});return Sound}),define("models/Sounds",["jquery","underscore","backbone","models/Sound"],function($,_,Backbone,Sound){var Sounds=Backbone.Collection.extend({model:Sound,init:function(params){var self=this;self.add([{position:[6.257865847806911,-75.61148554086685],name:"streetambient",db:40},{position:[6.257825854403986,-75.61136752367018],name:"pregonlimonpajarito",db:30}])},updateSounds:function(newUserPosition){var self=this;_.each(self.models,function(sound){sound.updateSound(newUserPosition)})},addMarkersToMap:function(map){var self=this;_.each(self.models,function(sound){L.marker(sound.position).addTo(map)})},mute:function(){Howler.mute()},unmute:function(){Howler.unmute()}});return Sounds
}),define("text!templates/streetwalk/streetWalkViewTemplate.html",[],function(){return'<img id="streetwalkImg" class="streetwalkImg" src="<%= pathFirstStill %>" >\n<div class="trame-video"></div>\n\n<div class="streetwalk-title">\n    <img class="logo" src="images/logo.png" alt="">\n    <div class="description">\n        <h2><%= STR.teaserDescriptionHeadline %></h2>\n        <p><%= STR.teaserDescriptionParagraph %></p>\n    </div>\n    \n    <div class="scrolltostart">\n        \n    </div>\n</div>\n\n<div class="launching">\n    <div class="launching-content">\n        <img class="launchinglogo" src="images/launchinglogo_<%= lang %>.svg" alt="">\n        \n        <div class="launching-signup">\n            <form action="<%= STR.teaserFormSubscribeAction %>" method="post" id="signup-mailchimp-form" name="mc-embedded-subscribe-form" class="validate" novalidate>\n                <div class="launching-emailgroup">\n                    <h2 class="launching-emailinput-label"><%= STR.teaserEmailLabelRegisterMailChimp %></h2>\n                    <input type="email" value="" name="EMAIL" class="required email launching-emailinput" id="mce-EMAIL" placeholder="<%= STR.teaserEmailPlaceholderRegisterMailChimp %>" required>\n                    <h2 class="launching-emailinput-label launching-unlocklabel"><%= STR.teaserBonusTeaser %></h2>\n                </div>\n                <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->\n                <div style="position: absolute; left: -5000px;"><input type="text" name="<%= STR.teaserFormSubscribeHiddenId %>" tabindex="-1" value=""></div>\n                <div class="clear">\n                    <input type="submit" value="<%= STR.teaserButtonRegisterMailChimp %>" name="subscribe" id="mc-embedded-subscribe" class="button launching-button launching-button-subscribe">\n                </div>\n            </form>\n            \n        </div>\n        \n        <div class="launching-signup-thanks">\n            <h2><%= STR.teaserSignupThanks %></h2>\n            <div class="launching-bonusvideo">\n            </div>\n        </div>\n        \n        <svg class="launching-separatorline" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             viewBox="0 0 616.7 8.1" style="enable-background:new 0 0 616.7 8.1;" xml:space="preserve">\n            <g>\n                <g>\n                    <path class="launching-separatorline" d="M2.4,7.5c132.1,2.1,264.1-1.3,396.2-2.3C470.5,4.7,542.4,5,614.3,7.3c3.2,0.1,3.2-4.9,0-5\n                        c-132-4.3-264.1-1.6-396.1,0C146.2,3.1,74.3,3.6,2.4,2.5C-0.8,2.4-0.8,7.4,2.4,7.5L2.4,7.5z"/>\n                </g>\n        </svg>\n        \n        <div class="launchingfacebook">\n            <h2><%= STR.teaserFollowOnFacebook %></h2>\n            <a href="https://www.facebook.com/pregonerosdemedellin"><img class="launching-facebookicon" src="images/facebookicon.png"></a>\n        </div>\n        <a class="launching-button launching-button-share" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.pregonerosdemedellin.com">\n            <%= STR.teaserButtonShareThisExperience %></a>\n        \n        \n</div>\n\n<!--End mc_embed_signup-->\n</div>\n\n<div id="streetwalk-control" class="streetwalk-control">\n    <div class="toggle-sounds" data-state="normal"></div>\n    <img src="images/mutesound.svg" style="display:none" alt="" />\n</div>'
}),function(p,e){function l(a){C.put.call(this,a)}function d(a){this.parent=a,this.byStart=[{start:-1,end:-1}],this.byEnd=[{start:-1,end:-1}],this.animating=[],this.endIndex=this.startIndex=0,this.previousUpdateTime=-1,this.count=1}function b(a,c){return function(){if(f.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(n){f.plugin.errors.push({plugin:c,thrown:n,source:a.toString()}),this.emit("pluginerror",f.plugin.errors)}}}if(e.addEventListener){var h=Array.prototype,i=Object.prototype,g=h.forEach,k=h.slice,r=i.hasOwnProperty,m=i.toString,t=p.Popcorn,q=[],o=!1,u={events:{hash:{},apis:{}}},E=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(a){p.setTimeout(a,16)}}(),C={put:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}},f=function(a,c){return new f.p.init(a,c||null)};f.version="1.5.6",f.isSupported=!0,f.instances=[],f.p=f.
prototype={init:function(a,c){var n,j=this;if(typeof a!="function"){if(typeof a=="string")try{n=e.querySelector(a)}catch(x){throw Error("Popcorn.js Error: Invalid media element selector: "+a)}this.media=n||a,n=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[n]=this.media,this.options=f.extend({},c)||{},this.id=this.options.id||f.guid(n);if(f.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:f.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new d(this)},f.instances.push(this);var z=function(){j.media.currentTime<0&&(j.media.currentTime=0),j.media.removeEventListener("loadedmetadata",z,!1);var F,v,L,y,s;F=j.media.duration,F=F!=F?Number.MAX_VALUE:F+1,f.addTrackEvent(j,{start:F,end:F}),j.isDestroyed||(j.data.durationChange=function(){var B=j.media.duration,Q=B+1,K=j.data.trackEvents.byStart,M=j.data.trackEvents.byEnd;K.pop
(),M.pop();for(var D=M.length-1;D>0;D--)M[D].end>B&&j.removeTrackEvent(M[D]._id);for(M=0;M<K.length;M++)K[M].end>B&&j.removeTrackEvent(K[M]._id);j.data.trackEvents.byEnd.push({start:Q,end:Q}),j.data.trackEvents.byStart.push({start:Q,end:Q})},j.media.addEventListener("durationchange",j.data.durationChange,!1)),j.options.frameAnimation?(j.data.timeUpdate=function(){f.timeUpdate(j,{}),f.forEach(f.manifest,function(B,Q){if(v=j.data.running[Q]){y=v.length;for(var K=0;K<y;K++)L=v[K],(s=L._natives)&&s.frame&&s.frame.call(j,{},L,j.currentTime())}}),j.emit("timeupdate"),!j.isDestroyed&&E(j.data.timeUpdate)},!j.isDestroyed&&E(j.data.timeUpdate)):(j.data.timeUpdate=function(B){f.timeUpdate(j,B)},j.isDestroyed||j.media.addEventListener("timeupdate",j.data.timeUpdate,!1))};return j.media.addEventListener("error",function(){j.error=j.media.error},!1),j.media.readyState>=1?z():j.media.addEventListener("loadedmetadata",z,!1),this}if(e.readyState==="complete")a(e,f);else{q.push(a);if(!o){o=!0;var w=function(
){e.removeEventListener("DOMContentLoaded",w,!1);for(var F=0,v=q.length;F<v;F++)q[F].call(e,f);q=null};e.addEventListener("DOMContentLoaded",w,!1)}}}},f.p.init.prototype=f.p,f.byId=function(a){for(var c=f.instances,n=c.length,j=0;j<n;j++)if(c[j].id===a)return c[j];return null},f.forEach=function(a,c,n){if(!a||!c)return{};n=n||this;var j,w;if(g&&a.forEach===g)return a.forEach(c,n);if(m.call(a)==="[object NodeList]"){j=0;for(w=a.length;j<w;j++)c.call(n,a[j],j,a);return a}for(j in a)r.call(a,j)&&c.call(n,a[j],j,a);return a},f.extend=function(a){var c=k.call(arguments,1);return f.forEach(c,function(n){for(var j in n)a[j]=n[j]}),a},f.extend(f,{noConflict:function(a){return a&&(p.Popcorn=t),f},error:function(a){throw Error(a)},guid:function(a){return f.guid.counter++,(a?a:"")+(+(new Date)+f.guid.counter)},sizeOf:function(a){var c=0,n;for(n in a)c++;return c},isArray:Array.isArray||function(a){return m.call(a)==="[object Array]"},nop:function(){},position:function(a){if(!a.parentNode)return null
;a=a.getBoundingClientRect();var c={},n=e.documentElement,j=e.body,w,x,z;w=n.clientTop||j.clientTop||0,x=n.clientLeft||j.clientLeft||0,z=p.pageYOffset&&n.scrollTop||j.scrollTop,n=p.pageXOffset&&n.scrollLeft||j.scrollLeft,w=Math.ceil(a.top+z-w),x=Math.ceil(a.left+n-x);for(var F in a)c[F]=Math.round(a[F]);return f.extend({},c,{top:w,left:x})},disable:function(a,c){if(!a.data.disabled[c]){a.data.disabled[c]=!0;if(c in f.registryByName&&a.data.running[c])for(var n=a.data.running[c].length-1,j;n>=0;n--)j=a.data.running[c][n],j._natives.end.call(a,null,j),a.emit("trackend",f.extend({},j,{plugin:j.type,type:"trackend"}));return a}},enable:function(a,c){if(a.data.disabled[c]){a.data.disabled[c]=!1;if(c in f.registryByName&&a.data.running[c])for(var n=a.data.running[c].length-1,j;n>=0;n--)j=a.data.running[c][n],j._natives.start.call(a,null,j),a.emit("trackstart",f.extend({},j,{plugin:j.type,type:"trackstart",track:j}));return a}},destroy:function(a){var c=a.data.events,n=a.data.trackEvents,j,w,x
,z;for(w in c){j=c[w];for(x in j)delete j[x];c[w]=null}for(z in f.registryByName)f.removePlugin(a,z);n.byStart.length=0,n.byEnd.length=0,a.isDestroyed||(a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,!1),a.isDestroyed=!0),f.instances.splice(f.instances.indexOf(a),1)}}),f.guid.counter=1,f.extend(f.p,function(){var a={};return f.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(c){a[c]=function(n){var j;return typeof this.media[c]=="function"?(n!=null&&/play|pause/.test(c)&&(this.media.currentTime=f.util.toSeconds(n)),this.media[c](),this):n!=null?(j=this.media[c],this.media[c]=n,j!==n&&this.emit("attrchange",{attribute:c,previousValue:j,currentValue:n}),this):this.media[c]}}),a}()),f.forEach("enable disable".split(" "),function(a){f.p[a]=function(c){return f[a](this,c)}}),f.extend(f.p,{roundTime:function(){return Math
.round(this.media.currentTime)},exec:function(a,c,n){var j=arguments.length,w="trackadded",x,z;try{z=f.util.toSeconds(a)}catch(F){}typeof z=="number"&&(a=z);if(typeof a=="number"&&j===2)n=c,c=a,a=f.guid("cue");else if(j===1)c=-1;else if(x=this.getTrackEvent(a))this.data.trackEvents.remove(a),l.end(this,x),f.removeTrackEvent.ref(this,a),w="cuechange",typeof a=="string"&&j===2&&(typeof c=="number"&&(n=x._natives.start),typeof c=="function"&&(n=c,c=x.start));else if(j>=2){if(typeof c=="string"){try{z=f.util.toSeconds(c)}catch(v){}c=z}typeof c=="number"&&(n=n||f.nop()),typeof c=="function"&&(n=c,c=-1)}return j={id:a,start:c,end:c+1,_running:!1,_natives:{start:n||f.nop,end:f.nop,type:"cue"}},x&&(j=f.extend(x,j)),w==="cuechange"?(j._id=j.id||j._id||f.guid(j._natives.type),this.data.trackEvents.add(j),l.start(this,j),this.timeUpdate(this,null,!0),f.addTrackEvent.ref(this,j),this.emit(w,f.extend({},j,{id:a,type:w,previousValue:{time:x.start,fn:x._natives.start},currentValue:{time:c,fn:n||f.nop}
,track:x}))):f.addTrackEvent(this,j),this},mute:function(a){return a=a==null||a===!0?"muted":"unmuted",a==="unmuted"&&(this.media.muted=!1,this.media.volume=this.data.state.volume),a==="muted"&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(a),this},unmute:function(a){return this.mute(a==null?!1:!a)},position:function(){return f.position(this.media)},toggle:function(a){return f[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,c){return f.isArray(a)?(f.forEach(a,function(n){for(var j in n)this.defaults(j,n[j])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[a]||(this.options.defaults[a]={}),f.extend(this.options.defaults[a],c),this)}}),f.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"
},f.Events.Natives=f.Events.UIEvents+" "+f.Events.MouseEvents+" "+f.Events.Events,u.events.apiTypes=["UIEvents","MouseEvents","Events"],function(a,c){for(var n=u.events.apiTypes,j=a.Natives.split(/\s+/g),w=0,x=j.length;w<x;w++)c.hash[j[w]]=!0;n.forEach(function(z){c.apis[z]={};for(var F=a[z].split(/\s+/g),v=F.length,L=0;L<v;L++)c.apis[z][F[L]]=!0})}(f.Events,u.events),f.events={isNative:function(a){return!!u.events.hash[a]},getInterface:function(a){if(!f.events.isNative(a))return!1;var c=u.events,n=c.apiTypes;c=c.apis;for(var j=0,w=n.length,x,z;j<w;j++){z=n[j];if(c[z][a]){x=z;break}}return x},all:f.Events.Natives.split(/\s+/g),fn:{trigger:function(a,c){var n,j=this.data.events[a];if(j){if(n=f.events.getInterface(a))return n=e.createEvent(n),n.initEvent(a,!0,!0,p,1),this.media.dispatchEvent(n),this;for(n=j.slice();n.length;)n.shift().call(this,c)}return this},listen:function(a,c){var n=this,j=!0,w=f.events.hooks[a],x,z;if(typeof c!="function")throw Error("Popcorn.js Error: Listener is not a function"
);return this.data.events[a]||(this.data.events[a]=[],j=!1),w&&(w.add&&w.add.call(this,{},c),w.bind&&(a=w.bind),w.handler&&(z=c,c=function(F){w.handler.call(n,F,z)}),j=!0,this.data.events[a]||(this.data.events[a]=[],j=!1)),this.data.events[a].push(c),!j&&f.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(F){if(n.data.events[a])for(x=n.data.events[a].slice();x.length;)x.shift().call(n,F)},!1),this},unlisten:function(a,c){var n,j=this.data.events[a];if(j){if(typeof c=="string"){for(n=0;n<j.length;n++)j[n].name===c&&j.splice(n--,1);return this}if(typeof c=="function"){for(;n!==-1;)n=j.indexOf(c),n!==-1&&j.splice(n,1);return this}return this.data.events[a]=null,this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,c){var n=!1;this.media.readyState&&(setTimeout(function(){c.call(this,a)}.bind(this),0),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(a,c){this.data.hooks.canplayall.fired||(c.call(this,a),this.data.hooks.canplayall.fired=!0)}}}},f.forEach(
[["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){f.p[a[0]]=f.p[a[1]]=f.events.fn[a[0]]}),l.start=function(a,c){c.end>a.media.currentTime&&c.start<=a.media.currentTime&&!c._running&&(c._running=!0,a.data.running[c._natives.type].push(c),a.data.disabled[c._natives.type]||(c._natives.start.call(a,null,c),a.emit("trackstart",f.extend({},c,{plugin:c._natives.type,type:"trackstart",track:c}))))},l.end=function(a,c){var n;(c.end<=a.media.currentTime||c.start>a.media.currentTime)&&c._running&&(n=a.data.running[c._natives.type],c._running=!1,n.splice(n.indexOf(c),1),a.data.disabled[c._natives.type]||(c._natives.end.call(a,null,c),a.emit("trackend",f.extend({},c,{plugin:c._natives.type,type:"trackend",track:c}))))},d.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(c){var n,j;if(!a)return!0;for(n in a){j=a[n];if(c[n]&&c[n]===j||c._natives[n]&&c._natives[n]===j)return!0}return!1})},d.prototype.add=function(a){var c=this.byStart,n=this.byEnd,j;
a&&a._id&&this.parent.data.history.push(a._id),a.start=f.util.toSeconds(a.start,this.parent.options.framerate),a.end=f.util.toSeconds(a.end,this.parent.options.framerate);for(j=c.length-1;j>=0;j--)if(a.start>=c[j].start){c.splice(j+1,0,a);break}for(c=n.length-1;c>=0;c--)if(a.end>n[c].end){n.splice(c+1,0,a);break}j<=this.parent.data.trackEvents.startIndex&&a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++,c<=this.parent.data.trackEvents.endIndex&&a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++,this.count++},d.prototype.remove=function(a){a instanceof l&&(a=a.id);if(typeof a=="object")return this.where(a).forEach(function(y){this.removeTrackEvent(y._id)},this.parent),this;var c,n,j;j=this.byStart.length;for(var w=0,x=0,z=[],F=[],v=[],L=[];--j>-1;)c=this.byStart[w],n=this.byEnd[w],c._id||(z.push(c),F.push(n)),c._id&&(c._id!==a&&z.push(c),n._id!==a&&F.push(n),c._id===a&&(x=w)),w++;j=this.animating
.length,w=0;if(j)for(;--j>-1;)c=this.animating[w],c._id||v.push(c),c._id&&c._id!==a&&v.push(c),w++;x<=this.startIndex&&this.startIndex--,x<=this.endIndex&&this.endIndex--,this.byStart=z,this.byEnd=F,this.animating=v,this.count--,j=this.parent.data.history.length;for(w=0;w<j;w++)this.parent.data.history[w]!==a&&L.push(this.parent.data.history[w]);this.parent.data.history=L},f.addTrackEvent=function(a,c){var n;c instanceof l||((c=new l(c))&&c._natives&&c._natives.type&&a.options.defaults&&a.options.defaults[c._natives.type]&&(n=f.extend({},c),f.extend(c,a.options.defaults[c._natives.type],n)),c._natives&&(c._id=c.id||c._id||f.guid(c._natives.type),c._natives._setup&&(c._natives._setup.call(a,c),a.emit("tracksetup",f.extend({},c,{plugin:c._natives.type,type:"tracksetup",track:c})))),a.data.trackEvents.add(c),l.start(a,c),this.timeUpdate(a,null,!0),c._id&&f.addTrackEvent.ref(a,c),a.emit("trackadded",f.extend({},c,c._natives?{plugin:c._natives.type}:{},{type:"trackadded",track:c})))},f.addTrackEvent
.ref=function(a,c){return a.data.trackRefs[c._id]=c,a},f.removeTrackEvent=function(a,c){var n=a.getTrackEvent(c);n&&(n._natives._teardown&&n._natives._teardown.call(a,n),a.data.trackEvents.remove(c),f.removeTrackEvent.ref(a,c),n._natives&&a.emit("trackremoved",f.extend({},n,{plugin:n._natives.type,type:"trackremoved",track:n})))},f.removeTrackEvent.ref=function(a,c){return delete a.data.trackRefs[c],a},f.getTrackEvents=function(a){var c=[];a=a.data.trackEvents.byStart;for(var n=a.length,j=0,w;j<n;j++)w=a[j],w._id&&c.push(w);return c},f.getTrackEvents.ref=function(a){return a.data.trackRefs},f.getTrackEvent=function(a,c){return a.data.trackRefs[c]},f.getTrackEvent.ref=function(a,c){return a.data.trackRefs[c]},f.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]},f.timeUpdate=function(a,c){var n=a.media.currentTime,j=a.data.trackEvents.previousUpdateTime,w=a.data.trackEvents,x=w.endIndex,z=w.startIndex,F=w.byStart.length,v=w.byEnd.length,L=f.registryByName,y,s,
B;if(j<=n){for(;w.byEnd[x]&&w.byEnd[x].end<=n;){y=w.byEnd[x],s=(j=y._natives)&&j.type;if(!(!j||L[s]||a[s])){f.removeTrackEvent(a,y._id);return}y._running===!0&&(y._running=!1,B=a.data.running[s],B.splice(B.indexOf(y),1),a.data.disabled[s]||(j.end.call(a,c,y),a.emit("trackend",f.extend({},y,{plugin:s,type:"trackend",track:y})))),x++}for(;w.byStart[z]&&w.byStart[z].start<=n;){y=w.byStart[z],s=(j=y._natives)&&j.type;if(!(!j||L[s]||a[s])){f.removeTrackEvent(a,y._id);return}y.end>n&&y._running===!1&&(y._running=!0,a.data.running[s].push(y),a.data.disabled[s]||(j.start.call(a,c,y),a.emit("trackstart",f.extend({},y,{plugin:s,type:"trackstart",track:y})))),z++}}else if(j>n){for(;w.byStart[z]&&w.byStart[z].start>n;){y=w.byStart[z],s=(j=y._natives)&&j.type;if(!(!j||L[s]||a[s])){f.removeTrackEvent(a,y._id);return}y._running===!0&&(y._running=!1,B=a.data.running[s],B.splice(B.indexOf(y),1),a.data.disabled[s]||(j.end.call(a,c,y),a.emit("trackend",f.extend({},y,{plugin:s,type:"trackend",track:y})))),
z--}for(;w.byEnd[x]&&w.byEnd[x].end>n;){y=w.byEnd[x],s=(j=y._natives)&&j.type;if(!(!j||L[s]||a[s])){f.removeTrackEvent(a,y._id);return}y.start<=n&&y._running===!1&&(y._running=!0,a.data.running[s].push(y),a.data.disabled[s]||(j.start.call(a,c,y),a.emit("trackstart",f.extend({},y,{plugin:s,type:"trackstart",track:y})))),x--}}w.endIndex=x,w.startIndex=z,w.previousUpdateTime=n,w.byStart.length<F&&w.startIndex--,w.byEnd.length<v&&w.endIndex--},f.extend(f.p,{getTrackEvents:function(){return f.getTrackEvents.call(null,this)},getTrackEvent:function(a){return f.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return f.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){return f.removeTrackEvent.call(null,this,a),this},removePlugin:function(a){return f.removePlugin.call(null,this,a),this},timeUpdate:function(a){return f.timeUpdate.call(null,this,a),this},destroy:function(){return f.destroy.call(null,this),this}}),f.manifest={},f.registry=[],f.registryByName={},f.plugin=
function(a,c,n){if(!(f.protect.natives.indexOf(a.toLowerCase())>=0)){var j=typeof c=="function",w=["start","end","type","manifest"],x=["_setup","_teardown","start","end","frame"],z={},F=function(y,s){return y=y||f.nop,s=s||f.nop,function(){y.apply(this,arguments),s.apply(this,arguments)}};f.manifest[a]=n=n||c.manifest||{},x.forEach(function(y){c[y]=b(c[y]||f.nop,a)});var v=function(y,s){if(!s)return this;if(s.ranges&&f.isArray(s.ranges))return f.forEach(s.ranges,function(M){M=f.extend({},s,M),delete M.ranges,this[a](M)},this),this;var B=s._natives={},Q="",K;return f.extend(B,y),s._natives.type=s._natives.plugin=a,s._running=!1,B.start=B.start||B["in"],B.end=B.end||B.out,s.once&&(B.end=F(B.end,function(){this.removeTrackEvent(s._id)})),B._teardown=F(function(){var M=k.call(arguments),D=this.data.running[B.type];M.unshift(null),M[1]._running&&D.splice(D.indexOf(s),1)&&B.end.apply(this,M),M[1]._running=!1,this.emit("trackend",f.extend({},s,{plugin:B.type,type:"trackend",track:f.getTrackEvent
(this,s.id||s._id)}))},B._teardown),B._teardown=F(B._teardown,function(){this.emit("trackteardown",f.extend({},s,{plugin:a,type:"trackteardown",track:f.getTrackEvent(this,s.id||s._id)}))}),s.compose=s.compose||[],typeof s.compose=="string"&&(s.compose=s.compose.split(" ")),s.effect=s.effect||[],typeof s.effect=="string"&&(s.effect=s.effect.split(" ")),s.compose=s.compose.concat(s.effect),s.compose.forEach(function(M){Q=f.compositions[M]||{},x.forEach(function(D){B[D]=F(B[D],Q[D])})}),s._natives.manifest=n,"start"in s||(s.start=s["in"]||0),!s.end&&s.end!==0&&(s.end=s.out||Number.MAX_VALUE),r.call(s,"toString")||(s.toString=function(){var M=["start: "+s.start,"end: "+s.end,"id: "+(s.id||s._id)];return s.target!=null&&M.push("target: "+s.target),a+" ( "+M.join(", ")+" )"}),s.target||(K="options"in n&&n.options,s.target=K&&"target"in K&&K.target),!s._id&&s._natives&&(s._id=f.guid(s._natives.type)),s instanceof l?(s._natives&&(s._id=s.id||s._id||f.guid(s._natives.type),s._natives._setup&&(s.
_natives._setup.call(this,s),this.emit("tracksetup",f.extend({},s,{plugin:s._natives.type,type:"tracksetup",track:s})))),this.data.trackEvents.add(s),l.start(this,s),this.timeUpdate(this,null,!0),s._id&&f.addTrackEvent.ref(this,s)):f.addTrackEvent(this,s),f.forEach(y,function(M,D){w.indexOf(D)===-1&&this.on(D,M)},this),this};f.p[a]=z[a]=function(y,s){var B,Q;if(y&&!s)s=y;else{if(B=this.getTrackEvent(y)){Q=s;var K={},M;for(M in B)r.call(Q,M)&&r.call(B,M)&&(K[M]=B[M]);return B._natives._update?(this.data.trackEvents.remove(B),r.call(s,"start")&&(B.start=s.start),r.call(s,"end")&&(B.end=s.end),l.end(this,B),j&&c.call(this,B),B._natives._update.call(this,B,s),this.data.trackEvents.add(B),l.start(this,B),B._natives.type!=="cue"&&this.emit("trackchange",{id:B.id,type:"trackchange",previousValue:K,currentValue:Q,track:B}),this):(f.extend(B,s),this.data.trackEvents.remove(y),B._natives._teardown&&B._natives._teardown.call(this,B),f.removeTrackEvent.ref(this,y),j?v.call(this,c.call(this,B),B):(B
._id=B.id||B._id||f.guid(B._natives.type),B._natives&&B._natives._setup&&(B._natives._setup.call(this,B),this.emit("tracksetup",f.extend({},B,{plugin:B._natives.type,type:"tracksetup",track:B}))),this.data.trackEvents.add(B),l.start(this,B),this.timeUpdate(this,null,!0),f.addTrackEvent.ref(this,B)),this.emit("trackchange",{id:B.id,type:"trackchange",previousValue:K,currentValue:B,track:B}),this)}s.id=y}return this.data.running[a]=this.data.running[a]||[],B=f.extend({},this.options.defaults&&this.options.defaults[a]||{},s),v.call(this,j?c.call(this,B):c,B),this},n&&f.extend(c,{manifest:n});var L={fn:z[a],definition:c,base:c,parents:[],name:a};return f.registry.push(f.extend(z,L,{type:a})),f.registryByName[a]=L,z}f.error("'"+a+"' is a protected function name")},f.plugin.errors=[],f.plugin.debug=f.version==="1.5.6",f.removePlugin=function(a,c){if(!c){c=a,a=f.p;if(f.protect.natives.indexOf(c.toLowerCase())>=0){f.error("'"+c+"' is a protected function name");return}var n=f.registry.length,j;
for(j=0;j<n;j++)if(f.registry[j].name===c){f.registry.splice(j,1),delete f.registryByName[c],delete f.manifest[c],delete a[c];return}}n=a.data.trackEvents.byStart,j=a.data.trackEvents.byEnd;var w=a.data.trackEvents.animating,x,z;x=0;for(z=n.length;x<z;x++)n[x]&&n[x]._natives&&n[x]._natives.type===c&&(n[x]._natives._teardown&&n[x]._natives._teardown.call(a,n[x]),n.splice(x,1),x--,z--,a.data.trackEvents.startIndex<=x&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--)),j[x]&&j[x]._natives&&j[x]._natives.type===c&&j.splice(x,1);x=0;for(z=w.length;x<z;x++)w[x]&&w[x]._natives&&w[x]._natives.type===c&&(w.splice(x,1),x--,z--)},f.compositions={},f.compose=function(a,c,n){f.manifest[a]=n||c.manifest||{},f.compositions[a]=c},f.plugin.effect=f.effect=f.compose;var G=/^(?:\.|#|\[)/;f.dom={debug:!1,find:function(a,c){var n=null;c=c||e;if(a){if(!G.test(a)){n=e.getElementById(a);if(n!==null)return n}try{n=c.querySelector(a)}catch(j){if(f.dom.debug)throw Error(j)}}return n}};var A=/\?/,O={
ajax:null,url:"",data:"",dataType:"",success:f.nop,type:"GET",async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};f.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(!a.dataType||a.dataType!=="jsonp"&&a.dataType!=="script"){a=f.extend({},O,a),a.ajax=new XMLHttpRequest;if(a.ajax)return a.type==="GET"&&a.data&&(a.url+=(A.test(a.url)?"&":"?")+a.data,a.data=null),a.ajax.open(a.type,a.url,a.async),a.type==="POST"&&a.ajax.setRequestHeader("Content-Type",a.contentType),a.ajax.send(a.data||null),f.xhr.httpData(a)}else f.xhr.getJSONP(a.url,a.success,a.dataType==="script")},f.xhr.httpData=function(a){var c,n=null,j,w=null;return a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{n=JSON.parse(a.ajax.responseText)}catch(x){}c={xml:a.ajax.responseXML,text:a.ajax.responseText,json:n};if(!c.xml||!c.xml.documentElement){c.xml=null;try{j=new DOMParser,w=j.parseFromString(a.ajax.responseText,"text/xml"),w.getElementsByTagName("parsererror").length||
(c.xml=w)}catch(z){}}a.dataType&&(c=c[a.dataType]),a.success.call(a.ajax,c)}},c},f.xhr.getJSONP=function(a,c,n){var j=e.head||e.getElementsByTagName("head")[0]||e.documentElement,w=e.createElement("script"),x=!1,z=[];z=/(=)\?(?=&|$)|\?\?/;var F,v;n||(v=a.match(/(callback=[^&]*)/),v!==null&&v.length?(z=v[1].split("=")[1],z==="?"&&(z="jsonp"),F=f.guid(z),a=a.replace(/(callback=[^&]*)/,"callback="+F)):(F=f.guid("jsonp"),z.test(a)&&(a=a.replace(z,"$1"+F)),z=a.split(/\?(.+)?/),a=z[0]+"?",z[1]&&(a+=z[1]+"&"),a+="callback="+F),window[F]=function(L){c&&c(L),x=!0}),w.addEventListener("load",function(){n&&c&&c(),x&&delete window[F],j.removeChild(w)},!1),w.addEventListener("error",function(L){c&&c({error:L}),n||delete window[F],j.removeChild(w)},!1),w.src=a,j.insertBefore(w,j.firstChild)},f.getJSONP=f.xhr.getJSONP,f.getScript=f.xhr.getScript=function(a,c){return f.xhr.getJSONP(a,c,!0)},f.util={toSeconds:function(a,c){var n=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,j,w,x;return typeof a=="number"?a:(typeof 
a=="string"&&!n.test(a)&&f.error("Invalid time format"),n=a.split(":"),j=n.length-1,w=n[j],w.indexOf(";")>-1&&(w=w.split(";"),x=0,c&&typeof c=="number"&&(x=parseFloat(w[1],10)/c),n[j]=parseInt(w[0],10)+x),j=n[0],{1:parseFloat(j,10),2:parseInt(j,10)*60+parseFloat(n[1],10),3:parseInt(j,10)*3600+parseInt(n[1],10)*60+parseFloat(n[2],10)}[n.length||1])}},f.p.cue=f.p.exec,f.protect={natives:function(a){return Object.keys?Object.keys(a):function(c){var n,j=[];for(n in c)r.call(c,n)&&j.push(n);return j}(a)}(f.p).map(function(a){return a.toLowerCase()})},f.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,c){var n=f.p[c];f.p[c]=function(){return typeof console!="undefined"&&console.warn&&(console.warn("Deprecated method '"+c+"', "+(a==null?"do not use.":"use '"+a+"' instead.")),f.p[c]=n),f.p[a].apply(this,[].slice.call(arguments))}}),p.Popcorn=f}else{p.Popcorn={isSupported:!1};for(h="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript"
.split(/\s+/);h.length;)p.Popcorn[h.shift()]=function(){}}}(window,window.document),function(p,e){var l=p.document,d=p.location,b=/:\/\//,h=d.href.replace(d.href.split("/").slice(-1)[0],""),i=function(k,r,m){k=k||0,r=(r||k||0)+1,m=m||1,r=Math.ceil((r-k)/m)||0;var t=0,q=[];for(q.length=r;t<r;)q[t++]=k,k+=m;return q};e.sequence=function(k,r){return new e.sequence.init(k,r)},e.sequence.init=function(k,r){this.parent=l.getElementById(k),this.seqId=e.guid("__sequenced"),this.queue=[],this.playlist=[],this.inOuts={ofVideos:[],ofClips:[]},this.dims={width:0,height:0},this.active=0,this.playing=this.cycling=!1,this.times={last:0},this.events={};var m=this,t=0;return e.forEach(r,function(q,o){var u=l.createElement("video");u.preload="auto",u.controls=!0,u.style.display=o&&"none"||"",u.id=m.seqId+"-"+o,m.queue.push(u);var E=q["in"],C=q.out;m.inOuts.ofVideos.push({"in":E!==undefined&&E||1,out:C!==undefined&&C||0}),m.inOuts.ofVideos[o].out=m.inOuts.ofVideos[o].out||m.inOuts.ofVideos[o]["in"]+2,u.src=
b.test(q.src)?q.src:h+q.src,u.setAttribute("data-sequence-owner",k),u.setAttribute("data-sequence-guid",m.seqId),u.setAttribute("data-sequence-id",o),u.setAttribute("data-sequence-clip",[m.inOuts.ofVideos[o]["in"],m.inOuts.ofVideos[o].out].join(":")),m.parent.appendChild(u),m.playlist.push(e("#"+u.id))}),m.inOuts.ofVideos.forEach(function(q){q={"in":t,out:t+(q.out-q["in"])},m.inOuts.ofClips.push(q),t=q.out+1}),e.forEach(this.queue,function(q,o){function u(){return o||(m.dims.width=q.videoWidth,m.dims.height=q.videoHeight),q.currentTime=m.inOuts.ofVideos[o]["in"]-.5,q.removeEventListener("canplaythrough",u,!1),!0}q.addEventListener("canplaythrough",u,!1),q.addEventListener("play",function(){m.playing=!0},!1),q.addEventListener("pause",function(){m.playing=!1},!1),q.addEventListener("timeupdate",function(E){E=E.srcElement||E.target,E=+(E.dataset&&E.dataset.sequenceId||E.getAttribute("data-sequence-id"));var C=Math.floor(q.currentTime);m.times.last!==C&&E===m.active&&(m.times.last=C,C===m.
inOuts.ofVideos[E].out&&e.sequence.cycle.call(m,E))},!1)}),this},e.sequence.init.prototype=e.sequence.prototype,e.sequence.cycle=function(k){this.queue||e.error("Popcorn.sequence.cycle is not a public method");var r=this.queue,m=this.inOuts.ofVideos,t=r[k],q=0,o;return r[k+1]&&(q=k+1),r[k+1]?(r=r[q],m=m[q],e.extend(r,{width:this.dims.width,height:this.dims.height}),o=this.playlist[q],t.pause(),this.active=q,this.times.last=m["in"]-1,o.currentTime(m["in"]),o[q?"play":"pause"](),this.trigger("cycle",{position:{previous:k,current:q}}),q&&(t.style.display="none",r.style.display=""),this.cycling=!1):this.playlist[k].pause(),this};var g=["timeupdate","play","pause"];e.extend(e.sequence.prototype,{eq:function(k){return this.playlist[k]},remove:function(){this.parent.innerHTML=null},clip:function(k){return this.inOuts.ofVideos[k]},duration:function(){for(var k=0,r=this.inOuts.ofClips,m=0;m<r.length;m++)k+=r[m].out-r[m]["in"]+1;return k-1},play:function(){return this.playlist[this.active].play()
,this},exec:function(k,r){var m=this.active;return this.inOuts.ofClips.forEach(function(t,q){k>=t["in"]&&k<=t.out&&(m=q)}),k+=this.inOuts.ofVideos[m]["in"]-this.inOuts.ofClips[m]["in"],e.addTrackEvent(this.playlist[m],{start:k-1,end:k,_running:!1,_natives:{start:r||e.nop,end:e.nop,type:"exec"}}),this},listen:function(k,r){var m=this,t=this.playlist,q=t.length,o=0;return r||(r=e.nop),e.Events.Natives.indexOf(k)>-1?e.forEach(t,function(u){u.listen(k,function(E){E.active=m,g.indexOf(k)>-1?r.call(u,E):++o===q&&r.call(u,E)})}):(this.events[k]||(this.events[k]={}),t=r.name||e.guid("__"+k),this.events[k][t]=r),this},unlisten:function(){},trigger:function(k,r){var m=this;if(!(e.Events.Natives.indexOf(k)>-1))return this.events[k]&&e.forEach(this.events[k],function(t){t.call(m,{type:k},r)}),this}}),e.forEach(e.manifest,function(k,r){e.sequence.prototype[r]=function(m){var t={},q=[],o,u,E,C,f;for(o=0;o<this.inOuts.ofClips.length;o++)q=this.inOuts.ofClips[o],u=i(q["in"],q.out),E=u.indexOf(m.start),
C=u.indexOf(m.end),E>-1&&(t[o]=e.extend({},q,{start:u[E],clipIdx:E})),C>-1&&(t[o]=e.extend({},q,{end:u[C],clipIdx:C}));o=Object.keys(t).map(function(A){return+A}),q=i(o[0],o[1]);for(o=0;o<q.length;o++){E={},C=q[o];var G=t[C];G?(f=this.inOuts.ofVideos[C],u=G.clipIdx,f=i(f["in"],f.out),G.start&&(E.start=f[u],E.end=f[f.length-1]),G.end&&(E.start=f[0],E.end=f[u])):(E.start=this.inOuts.ofVideos[C]["in"],E.end=this.inOuts.ofVideos[C].out),this.playlist[C][r](e.extend({},m,E))}return this}})}(this,Popcorn),function(p,e){function l(h){h=typeof h=="string"?h:[h.language,h.region].join("-");var i=h.split("-");return{iso6391:h,language:i[0]||"",region:i[1]||""}}var d=p.navigator,b=l(d.userLanguage||d.language);e.locale={get:function(){return b},set:function(h){return b=l(h),e.locale.broadcast(),b},broadcast:function(h){var i=e.instances,g=i.length,k=0,r;for(h=h||"locale:changed";k<g;k++)r=i[k],h in r.data.events&&r.trigger(h)}}}(this,this.Popcorn),function(p){document.addEventListener("DOMContentLoaded"
,function(){var e=document.querySelectorAll("[data-timeline-sources]");p.forEach(e,function(l,d){var b=e[d],h,i,g;b.id||(b.id=p.guid("__popcorn")),b.nodeType&&b.nodeType===1&&(g=p("#"+b.id),h=(b.getAttribute("data-timeline-sources")||"").split(","),h[0]&&p.forEach(h,function(k){i=k.split("!"),i.length===1&&(i=k.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split("."),i[0]="parse"+i[1].toUpperCase(),i[1]=k),h[0]&&g[i[0]]&&g[i[0]](i[1])}),g.autoplay()&&g.play())})},!1)}(Popcorn),function(p){var e=function(l,d){return l=l||p.nop,d=d||p.nop,function(){l.apply(this,arguments),d.apply(this,arguments)}};p.player=function(l,d){if(!p[l]){d=d||{};var b=function(h,i,g){g=g||{};var k=new Date/1e3,r=k,m=0,t=0,q=1,o=!1,u={},E=typeof h=="string"?p.dom.find(h):h,C={};Object.prototype.__defineGetter__||(C=E||document.createElement("div"));for(var f in E)f in C||(typeof E[f]=="object"?C[f]=E[f]:typeof E[f]=="function"?C[f]=function(A){return"length"in E[A]&&!E[A].call?E[A]:function(){return E[A].apply(E,arguments
)}}(f):p.player.defineProperty(C,f,{get:function(A){return function(){return E[A]}}(f),set:p.nop,configurable:!0}));var G=function(){k=new Date/1e3,C.paused||(C.currentTime+=k-r,C.dispatchEvent("timeupdate"),setTimeout(G,10)),r=k};return C.play=function(){this.paused=!1,C.readyState>=4&&(r=new Date/1e3,C.dispatchEvent("play"),G())},C.pause=function(){this.paused=!0,C.dispatchEvent("pause")},p.player.defineProperty(C,"currentTime",{get:function(){return m},set:function(A){return m=+A,C.dispatchEvent("timeupdate"),m},configurable:!0}),p.player.defineProperty(C,"volume",{get:function(){return q},set:function(A){return q=+A,C.dispatchEvent("volumechange"),q},configurable:!0}),p.player.defineProperty(C,"muted",{get:function(){return o},set:function(A){return o=+A,C.dispatchEvent("volumechange"),o},configurable:!0}),p.player.defineProperty(C,"readyState",{get:function(){return t},set:function(A){return t=A},configurable:!0}),C.addEventListener=function(A,O){return u[A]||(u[A]=[]),u[A].push(O)
,O},C.removeEventListener=function(A,O){var a,c=u[A];if(c){for(a=u[A].length-1;a>=0;a--)O===c[a]&&c.splice(a,1);return O}},C.dispatchEvent=function(A){var O,a=A.type;if(!a){a=A;if(A=p.events.getInterface(a))O=document.createEvent(A),O.initEvent(a,!0,!0,window,1)}if(u[a])for(A=u[a].length-1;A>=0;A--)u[a][A].call(this,O,this)},C.src=i||"",C.duration=0,C.paused=!0,C.ended=0,g&&g.events&&p.forEach(g.events,function(A,O){C.addEventListener(O,A,!1)}),d._canPlayType(E.nodeName,i)!==!1?d._setup?d._setup.call(C,g):(C.readyState=4,C.dispatchEvent("loadedmetadata"),C.dispatchEvent("loadeddata"),C.dispatchEvent("canplaythrough")):setTimeout(function(){C.dispatchEvent("error")},0),h=new p.p.init(C,g),d._teardown&&(h.destroy=e(h.destroy,function(){d._teardown.call(C,g)})),h};b.canPlayType=d._canPlayType=d._canPlayType||p.nop,p[l]=p.player.registry[l]=b}},p.player.registry={},p.player.defineProperty=Object.defineProperty||function(l,d,b){l.__defineGetter__(d,b.get||p.nop),l.__defineSetter__(d,b.set||p
.nop)},p.player.playerQueue=function(){var l=[],d=!1;return{next:function(){d=!1,l.shift(),l[0]&&l[0]()},add:function(b){l.push(function(){d=!0,b&&b()}),!d&&l[0]()}}},p.smart=function(l,d,b){var h=typeof l=="string"?p.dom.find(l):l,i,g,k,r,m,t="HTMLYouTubeVideoElement HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(h){d=typeof d=="string"?[d]:d,l=0;for(m=d.length;l<m;l++){i=d[l];for(g=0;g<t.length;g++)if((r=p[t[g]])&&r._canPlaySrc(i)==="probably")return k=r(h),b=p(k,b),setTimeout(function(){k.src=i},0),b;for(var q in p.player.registry)if(p.player.registry.hasOwnProperty(q)&&p.player.registry[q].canPlayType(h.nodeName,i))return p[q](h,i,b)}var o;q=p.guid("popcorn-video-"),g=document.createElement("div"),g.style.width="100%",g.style.height="100%";if(d.length===1)return o=document.createElement("video"),o.id=q,h.appendChild(o),setTimeout(function(){var u=document.createElement("div");u.innerHTML=d[0],o.src=u.firstChild.nodeValue},0),p("#"+q,b);h.appendChild
(g),t='<video id="'+q+'" preload=auto autobuffer>',l=0;for(m=d.length;l<m;l++)t+='<source src="'+d[l]+'">';return t+="</video>",g.innerHTML=t,b&&b.events&&b.events.error&&h.addEventListener("error",b.events.error,!1),p("#"+q,b)}p.error("Specified target `"+l+"` was not found.")}}(Popcorn),function(p){var e=Object.prototype.hasOwnProperty;p.parsers={},p.parser=function(l,d,b){if(p.protect.natives.indexOf(l.toLowerCase())>=0)p.error("'"+l+"' is a protected function name");else{typeof d=="function"&&!b&&(b=d,d="");if(typeof b=="function"&&typeof d=="string"){var h={};return h[l]=function(i,g,k){if(!i)return this;typeof g!="function"&&!k&&(k=g,g=null);var r=this;return p.xhr({url:i,dataType:d,success:function(m){var t,q,o=0;m=b(m,k).data||[];if(t=m.length){for(;o<t;o++){q=m[o];for(var u in q)e.call(q,u)&&r[u]&&r[u](q[u])}g&&g()}}}),this},p.extend(p.p,h),h}}}}(Popcorn),function(p,e){function l(b){var h=l.options;b=h.parser[h.strictMode?"strict":"loose"].exec(b);for(var i={},g=14;g--;)i[h.key
[g]]=b[g]||"";return i[h.q.name]={},i[h.key[12]].replace(h.q.parser,function(k,r,m){r&&(i[h.q.name][r]=m)}),i}l.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var d={length:0,start:p.nop,end:p.nop};window.MediaError=window.MediaError||function(){function b(h,i){this.code=h||null,this.message=i||""}return b.MEDIA_ERR_NONE_ACTIVE=0,b.MEDIA_ERR_ABORTED=1,b.MEDIA_ERR_NETWORK=2,b.MEDIA_ERR_DECODE=3,b.MEDIA_ERR_NONE_SUPPORTED=4,b}(),p._MediaElementProto=function(){var b={},h;return Object
.prototype.__defineGetter__||(b=e.createElement("div")),b._util={type:"HTML5",TIMEUPDATE_MS:250,MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(i){return typeof i=="string"||i===!0},parseUri:l},b.addEventListener=function(i,g,k){e.addEventListener(this._eventNamespace+i,g,k)},b.removeEventListener=function(i,g,k){e.removeEventListener(this._eventNamespace+i,g,k)},b.dispatchEvent=function(i){var g=e.createEvent("CustomEvent");g.initCustomEvent(this._eventNamespace+i,!1,!1,{type:i,target:this.parentNode,data:null}),e.dispatchEvent(g)},b.load=p.nop,b.canPlayType=function(){return""},b.getBoundingClientRect=function(){return h.getBoundingClientRect()},b.NETWORK_EMPTY=0,b.NETWORK_IDLE=1,b.NETWORK_LOADING=2,b.NETWORK_NO_SOURCE=3,b.HAVE_NOTHING=0,b.HAVE_METADATA=1,b.HAVE_CURRENT_DATA=2,b.HAVE_FUTURE_DATA=3,b.HAVE_ENOUGH_DATA=4,Object.defineProperties(b,{currentSrc:{get:function(){return this.src!==undefined?this.src:""},configurable:!0},parentNode:{get:function(){return h},set:function(i)
{h=i},configurable:!0},preload:{get:function(){return"auto"},set:p.nop,configurable:!0},controls:{get:function(){return!0},set:p.nop,configurable:!0},poster:{get:function(){return""},set:p.nop,configurable:!0},crossorigin:{get:function(){return""},configurable:!0},played:{get:function(){return d},configurable:!0},seekable:{get:function(){return d},configurable:!0},buffered:{get:function(){return d},configurable:!0},defaultMuted:{get:function(){return!1},configurable:!0},defaultPlaybackRate:{get:function(){return 1},configurable:!0},style:{get:function(){return this.parentNode.style},configurable:!0},id:{get:function(){return this.parentNode.id},configurable:!0}}),b}}(Popcorn,window.document),function(p,e,l){function d(){if(e.jwplayer){k=!0;for(var t=m.length;t--;)m[t](),delete m[t]}else setTimeout(d,100)}function b(){if(!r){if(!e.jwplayer){var t=l.createElement("script");t.src="https://jwpsrv.com/library/zaIF4JI9EeK2FSIACpYGxA.js";var q=l.getElementsByTagName("script")[0];q.parentNode.insertBefore
(t,q)}r=!0,d()}return k}function h(t){m.unshift(t)}function i(t){function q(P){D.unshift(P)}function o(){setTimeout(function(){v.duration=K.getDuration(),z.dispatchEvent("durationchange"),v.readyState=z.HAVE_METADATA,z.dispatchEvent("loadedmetadata"),z.dispatchEvent("loadeddata"),v.readyState=z.HAVE_FUTURE_DATA,z.dispatchEvent("canplay");for(B=!0;D.length;)D[0](),D.shift();v.readyState=z.HAVE_ENOUGH_DATA,z.dispatchEvent("canplaythrough")},0)}function u(){y?y=!1:I?(I=!1,o()):n()}function E(){v.seeking&&(v.ended=!1,v.seeking=!1,z.dispatchEvent("timeupdate"),z.dispatchEvent("seeked"),z.dispatchEvent("canplay"),z.dispatchEvent("canplaythrough"))}function C(){K.onPause(u),K.onTime(function(){!v.ended&&!v.seeking&&(v.currentTime=K.getPosition(),z.dispatchEvent("timeupdate"))}),K.onSeek(E),K.onPlay(function(){v.ended||(T?(T=!1,v.autoplay||!v.paused?(v.paused=!1,q(a),o()):(s=I=!0,K.pause(!0))):s?(s=!1,y=!0,K.pause(!0)):a())}),K.onBufferChange(c),K.onComplete(j),K.play(!0)}function f(P){var S={name
:"MediaError"};S.message=P.message,S.code=P.code||5,v.error=S,z.dispatchEvent("error")}function G(P){if(z._canPlaySrc(P)){var S=z._util.parseUri(P).queryKey;v.controls=S.controls=S.controls||v.controls,v.src=P,b()?(L&&L&&K&&K.destroy(),jwplayer(F.id).setup({file:P,width:"100%",height:"100%",controls:v.controls}),K=jwplayer(F.id),K.onReady(C),K.onError(f),jwplayer.utils.log=function(H,V){typeof console!="undefined"&&typeof console.log!="undefined"&&(V?console.log(H,V):console.log(H)),H==="No suitable players found and fallback enabled"&&f({message:H,code:4})},v.networkState=z.NETWORK_LOADING,z.dispatchEvent("loadstart"),z.dispatchEvent("progress")):h(function(){G(P)})}else v.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},z.dispatchEvent("error")}function A(P){v.currentTime=P,B?(O(),K.seek(P)):q(function(){O(),K.seek(P)})}function O(){v.seeking=!0,v.paused&&(s=!0),z.dispatchEvent("seeking")}function a(){v.paused=!1;if(M){M=!1;if(
v.loop&&!Q||!v.loop)Q=!0,z.dispatchEvent("play");z.dispatchEvent("playing")}}function c(){z.dispatchEvent("progress")}function n(){v.paused=!0,M||(M=!0,z.dispatchEvent("pause"))}function j(){v.loop?A(0):(v.ended=!0,n(),z.dispatchEvent("timeupdate"),z.dispatchEvent("ended"))}function w(P){v.volume=P,B?(K.setVolume(v.volume*100),z.dispatchEvent("volumechange")):q(function(){w(v.volume)})}function x(P){v.muted=P,B?(K.setMute(P),z.dispatchEvent("volumechange")):q(function(){x(v.muted)})}if(!e.postMessage)throw"ERROR: HTMLJWPlayerVideoElement requires window.postMessage";var z=new p._MediaElementProto,F=typeof t=="string"?l.querySelector(t):t,v={src:g,networkState:z.NETWORK_EMPTY,readyState:z.HAVE_NOTHING,seeking:!1,autoplay:g,preload:g,controls:!1,loop:!1,poster:g,volume:1,muted:!1,currentTime:0,duration:NaN,ended:!1,paused:!0,error:null},L=!1,y=!1,s=!1,B=!1,Q=!1,K,M=!0,D=[],T=!0,I=!1;return z._eventNamespace=p.guid("HTMLJWPlayerVideoElement::"),z.parentNode=F,z._util.type="JWPlayer",z.play=
function(){z.dispatchEvent("play"),v.paused=!1,B?(v.ended&&(A(0),v.ended=!1),K.play(!0)):q(function(){z.play()})},z.pause=function(){v.paused=!0,B?K.pause(!0):q(function(){z.pause()})},Object.defineProperties(z,{src:{get:function(){return v.src},set:function(P){P&&P!==v.src&&G(P)}},autoplay:{get:function(){return v.autoplay},set:function(P){v.autoplay=z._util.isAttributeSet(P)}},loop:{get:function(){return v.loop},set:function(P){v.loop=z._util.isAttributeSet(P)}},width:{get:function(){return z.parentNode.offsetWidth}},height:{get:function(){return z.parentNode.offsetHeight}},currentTime:{get:function(){return v.currentTime},set:function(P){A(P)}},duration:{get:function(){return K.getDuration()}},ended:{get:function(){return v.ended}},paused:{get:function(){return v.paused}},seeking:{get:function(){return v.seeking}},readyState:{get:function(){return v.readyState}},networkState:{get:function(){return v.networkState}},volume:{get:function(){return v.volume},set:function(P){if(P<0||P>1)throw"Volume value must be between 0.0 and 1.0"
;w(P)}},muted:{get:function(){return v.muted},set:function(P){x(z._util.isAttributeSet(P))}},error:{get:function(){return v.error}},buffered:{get:function(){var P={start:function(S){if(S===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1"},end:function(S){if(S===0)return S=K.getDuration(),S?S*(K.getBuffer()/100):0;throw"INDEX_SIZE_ERR: DOM Exception 1"}};return Object.defineProperties(P,{length:{get:function(){return 1}}}),P}}}),z._canPlaySrc=p.HTMLJWPlayerVideoElement._canPlaySrc,z.canPlayType=p.HTMLJWPlayerVideoElement.canPlayType,z}var g="",k=!1,r=!1,m=[];p.HTMLJWPlayerVideoElement=function(t){return new i(t)},p.HTMLJWPlayerVideoElement._canPlaySrc=function(){return"probably"},p.HTMLJWPlayerVideoElement.canPlayType=function(){return"probably"}}(Popcorn,window,document),function(p,e){function l(i){this.startTime=0,this.currentTime=i.currentTime||0,this.duration=i.duration||NaN,this.playInterval=null,this.paused=!0,this.playbackRate=this.defaultPlaybackRate=1,this.ended=i.endedCallback||
p.nop}function d(i){function g(a){A.push(a)}function k(){return C?f.currentTime:0}function r(a){a!==k()&&(C?(G.seeking=!0,o.dispatchEvent("seeking"),f.seekTo(a),G.ended=!1,G.seeking=!1,o.dispatchEvent("timeupdate"),o.dispatchEvent("seeked"),o.dispatchEvent("canplay"),o.dispatchEvent("canplaythrough")):g(function(){r(a)}))}function m(){o.dispatchEvent("timeupdate")}function t(){G.paused=!0,clearInterval(O),o.dispatchEvent("pause")}function q(){G.loop?(r(0),o.play()):(G.ended=!0,t(),o.dispatchEvent("timeupdate"),o.dispatchEvent("ended"))}var o=new p._MediaElementProto,u=typeof i=="string"?e.querySelector(i):i,E=e.createElement("div"),C=!1,f,G={src:b,networkState:o.NETWORK_EMPTY,readyState:o.HAVE_NOTHING,autoplay:b,preload:b,controls:b,loop:!1,poster:b,volume:1,muted:!1,width:u.width|0?u.width:o._util.MIN_WIDTH,height:u.height|0?u.height:o._util.MIN_HEIGHT,seeking:!1,ended:!1,paused:1,error:null},A=[],O;return o._eventNamespace=p.guid("HTMLNullVideoElement::"),o.parentNode=u,o._util.type="NullVideo"
,o.play=function(){C?(f.play(),G.paused&&(G.paused===1?(G.paused=!1,o.dispatchEvent("play"),o.dispatchEvent("playing")):(G.ended&&(r(0),G.ended=!1),G.paused&&(G.paused=!1,G.loop||o.dispatchEvent("play"),o.dispatchEvent("playing"))),O=setInterval(m,o._util.TIMEUPDATE_MS))):g(function(){o.play()})},o.pause=function(){C?(f.pause(),G.paused||t()):g(function(){o.pause()})},Object.defineProperties(o,{src:{get:function(){return G.src},set:function(a){if(a&&a!==G.src)if(o._canPlaySrc(a)){G.src=a,C&&C&&f&&(f.pause(),f=null,u.removeChild(E),E=e.createElement("div")),E.width=G.width,E.height=G.height,u.appendChild(E),a=h.exec(a),f=new l({currentTime:+a[1],duration:+a[2],endedCallback:q}),o.dispatchEvent("loadstart"),o.dispatchEvent("progress"),o.dispatchEvent("durationchange"),C=!0,G.networkState=o.NETWORK_IDLE,G.readyState=o.HAVE_METADATA,o.dispatchEvent("loadedmetadata"),o.dispatchEvent("loadeddata"),G.readyState=o.HAVE_FUTURE_DATA,o.dispatchEvent("canplay"),G.readyState=o.HAVE_ENOUGH_DATA;for(o
.dispatchEvent("canplaythrough");A.length;)a=A.shift(),a();G.autoplay&&o.play()}else G.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},o.dispatchEvent("error")}},autoplay:{get:function(){return G.autoplay},set:function(a){G.autoplay=o._util.isAttributeSet(a)}},loop:{get:function(){return G.loop},set:function(a){G.loop=o._util.isAttributeSet(a)}},width:{get:function(){return E.width},set:function(a){E.width=a,G.width=E.width}},height:{get:function(){return E.height},set:function(a){E.height=a,G.height=E.height}},currentTime:{get:function(){return k()},set:function(a){r(a)}},duration:{get:function(){return f?f.duration:NaN}},ended:{get:function(){return G.ended}},paused:{get:function(){return G.paused}},seeking:{get:function(){return G.seeking}},readyState:{get:function(){return G.readyState}},networkState:{get:function(){return G.networkState}},volume:{get:function(){return G.volume},set:function(a){if(a<0||a>1)throw"Volume value must be between 0.0 and 1.0"
;G.volume=a,o.dispatchEvent("volumechange")}},muted:{get:function(){return G.muted},set:function(a){a=o._util.isAttributeSet(a),G.muted=a,o.dispatchEvent("volumechange")}},playbackRate:{get:function(){return f.playbackRate},set:function(a){f.playbackRate=a,o.dispatchEvent("ratechange")}},error:{get:function(){return G.error}}}),o._canPlaySrc=p.HTMLNullVideoElement._canPlaySrc,o.canPlayType=p.HTMLNullVideoElement.canPlayType,o}var b="",h=/#t=(\d+\.?\d*)?,?(\d+\.?\d*)/;l.prototype={play:function(){var i=this;this.paused&&(this.paused=!1,this.startTime=Date.now(),this.playInterval=setInterval(function(){i.currentTime+=(Date.now()-i.startTime)/(1e3/i.playbackRate),i.startTime=Date.now(),i.currentTime>=i.duration&&(i.pause(i.duration),i.ended()),i.currentTime<0&&i.pause(0)},16))},pause:function(){this.paused||(this.paused=!0,clearInterval(this.playInterval))},seekTo:function(i){i=i<0?0:i,this.currentTime=i=i>this.duration?this.duration:i}},p.HTMLNullVideoElement=function(i){return new d(i)},
p.HTMLNullVideoElement._canPlaySrc=function(i){return h.test(i)?"probably":b},p.HTMLNullVideoElement.canPlayType=function(i){return i==="video/x-nullvideo"?"probably":b}}(Popcorn,document),function(p,e,l){function d(k){var r=this,m=k.src.split("?")[0];m.substr(0,2)==="//"&&(m=e.location.protocol+m),"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(t){r[t]=function(q){q=JSON.stringify({method:t,value:q}),k.contentWindow&&k.contentWindow.postMessage(q,m)}})}function b(k){function r(y){z.unshift(y)}function m(y){var s=c.duration;if(s!==y){c.duration=y,A.dispatchEvent("durationchange");if(isNaN(s)){c.networkState=A.NETWORK_IDLE,c.readyState=A.HAVE_METADATA,A.dispatchEvent("loadedmetadata"),A.dispatchEvent("loadeddata"),c.readyState=A.HAVE_FUTURE_DATA,A.dispatchEvent("canplay"),c.readyState=A.HAVE_ENOUGH_DATA,A.dispatchEvent("canplaythrough"
),c.autoplay&&A.play();for(y=z.length;y--;)z[y](),delete z[y]}}}function t(y){n?(c.seeking=!0,A.dispatchEvent("seeking"),w.seekTo(y)):r(function(){t(y)})}function q(){A.dispatchEvent("timeupdate")}function o(y){(c.currentTime=y)!==L&&A.dispatchEvent("timeupdate"),L=c.currentTime}function u(y){if(y.origin===g){var s;try{s=JSON.parse(y.data)}catch(B){console.warn(B)}if(s.player_id==j)switch(s.event){case"ready":w=new d(a),w.addEventListener("loadProgress"),w.addEventListener("pause"),w.setVolume(0),w.play();break;case"loadProgress":parseFloat(s.data.duration)>0&&!n&&(n=!0,w.pause());break;case"pause":w.setVolume(1),e.removeEventListener("message",u,!1),e.addEventListener("message",E,!1),w.addEventListener("loadProgress"),w.addEventListener("playProgress"),w.addEventListener("play"),w.addEventListener("pause"),w.addEventListener("finish"),w.addEventListener("seek"),w.getDuration(),c.networkState=A.NETWORK_LOADING,A.dispatchEvent("loadstart"),A.dispatchEvent("progress")}}}function E(y){if(y
.origin===g){var s;try{s=JSON.parse(y.data)}catch(B){console.warn(B)}if(s.player_id==j){switch(s.method){case"getCurrentTime":o(parseFloat(s.value));break;case"getDuration":m(parseFloat(s.value));break;case"getVolume":y=parseFloat(s.value),c.volume!==y&&(c.volume=y,A.dispatchEvent("volumechange"))}switch(s.event){case"loadProgress":A.dispatchEvent("progress"),m(parseFloat(s.data.duration));break;case"playProgress":o(parseFloat(s.data.seconds));break;case"play":c.ended&&t(0),v||(v=setInterval(C,h),c.loop&&A.dispatchEvent("play")),F=setInterval(q,A._util.TIMEUPDATE_MS),c.paused=!1,x&&(x=!1,c.loop||A.dispatchEvent("play"),A.dispatchEvent("playing"));break;case"pause":c.paused=!0,x||(x=!0,clearInterval(F),A.dispatchEvent("pause"));break;case"finish":c.loop?(t(0),A.play()):(c.ended=!0,A.dispatchEvent("ended"));break;case"seek":o(parseFloat(s.data.seconds)),c.seeking=!1,A.dispatchEvent("timeupdate"),A.dispatchEvent("seeked"),A.dispatchEvent("canplay"),A.dispatchEvent("canplaythrough")}}}}function C
(){w.getCurrentTime()}function f(y){c.volume=y,n?(w.setVolume(y),A.dispatchEvent("volumechange")):r(function(){f(y)})}function G(y){n?y?(c.muted=c.volume,f(0)):(c.muted=0,f(c.muted)):(c.muted=y?1:0,r(function(){G(y)}))}if(!e.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var A=new p._MediaElementProto,O=typeof k=="string"?p.dom.find(k):k,a=l.createElement("iframe"),c={src:i,networkState:A.NETWORK_EMPTY,readyState:A.HAVE_NOTHING,seeking:!1,autoplay:i,preload:i,controls:!1,loop:!1,poster:i,volume:1,muted:0,currentTime:0,duration:NaN,ended:!1,paused:!0,error:null},n=!1,j=p.guid(),w,x=!0,z=[],F,v,L=0;return A._eventNamespace=p.guid("HTMLVimeoVideoElement::"),A.parentNode=O,A._util.type="Vimeo",A.play=function(){c.paused=!1,n?w.play():r(function(){A.play()})},A.pause=function(){c.paused=!0,n?w.pause():r(function(){A.pause()})},Object.defineProperties(A,{src:{get:function(){return c.src},set:function(y){if(y&&y!==c.src)if(A._canPlaySrc(y)){c.src=y,n&&n&&w&&(clearInterval
(v),w.pause(),e.removeEventListener("message",E,!1),O.removeChild(a),a=l.createElement("iframe")),n=!1,y=A._util.parseUri(y);var s=y.queryKey,B,Q=["api=1","player_id="+j,"title=0","byline=0","portrait=0"];c.loop=s.loop==="1"||c.loop,delete s.loop,c.autoplay=s.autoplay==="1"||c.autoplay,delete s.autoplay,y=g+"/video/"+/\d+$/.exec(y.path)+"?";for(B in s)s.hasOwnProperty(B)&&Q.push(encodeURIComponent(B)+"="+encodeURIComponent(s[B]));y+=Q.join("&"),a.id=j,a.style.width="100%",a.style.height="100%",a.frameBorder=0,a.webkitAllowFullScreen=!0,a.mozAllowFullScreen=!0,a.allowFullScreen=!0,O.appendChild(a),a.src=y,e.addEventListener("message",u,!1)}else c.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},A.dispatchEvent("error")}},autoplay:{get:function(){return c.autoplay},set:function(y){c.autoplay=A._util.isAttributeSet(y)}},loop:{get:function(){return c.loop},set:function(y){c.loop=A._util.isAttributeSet(y)}},width:{get:function(){return A
.parentNode.offsetWidth}},height:{get:function(){return A.parentNode.offsetHeight}},currentTime:{get:function(){return c.currentTime},set:function(y){t(y)}},duration:{get:function(){return c.duration}},ended:{get:function(){return c.ended}},paused:{get:function(){return c.paused}},seeking:{get:function(){return c.seeking}},readyState:{get:function(){return c.readyState}},networkState:{get:function(){return c.networkState}},volume:{get:function(){return c.muted>0?c.muted:c.volume},set:function(y){if(y<0||y>1)throw"Volume value must be between 0.0 and 1.0";f(y)}},muted:{get:function(){return c.muted>0},set:function(y){G(A._util.isAttributeSet(y))}},error:{get:function(){return c.error}}}),A._canPlaySrc=p.HTMLVimeoVideoElement._canPlaySrc,A.canPlayType=p.HTMLVimeoVideoElement.canPlayType,A}var h=16,i="",g="https://player.vimeo.com";p.HTMLVimeoVideoElement=function(k){return new b(k)},p.HTMLVimeoVideoElement._canPlaySrc=function(k){return/player.vimeo.com\/video\/\d+/.test(k)||/vimeo.com\/\d+/
.test(k)?"probably":i},p.HTMLVimeoVideoElement.canPlayType=function(k){return k==="video/x-vimeo"?"probably":i}}(Popcorn,window,document),function(p,e){function l(){return"maybe"}function d(b,h){var i=typeof b=="string"?e.querySelector(b):b,g=e.createElement(h);return i.appendChild(g),g._canPlaySrc=l,g}p.HTMLVideoElement=function(b){return d(b,"video")},p.HTMLVideoElement._canPlaySrc=l,p.HTMLAudioElement=function(b){return d(b,"audio")},p.HTMLAudioElement._canPlaySrc=l}(Popcorn,window.document),function(p,e,l){function d(){var u;if(YT.loaded)for(t=!0;o.length;)u=o.shift(),u();else setTimeout(d,250)}function b(){var u;return q||(e.YT?d():(u=l.createElement("script"),u.addEventListener("load",d,!1),u.src="https://www.youtube.com/iframe_api",l.head.appendChild(u)),q=!0),t}function h(u){o.push(u)}function i(u){function E(J){W.push(J)}function C(){R.pauseVideo(),j("play",C),n("play",K)}function f(){n("pause",M),j("pause",f)}function G(){var J=function(){R.isMuted()?(n("play",c),R.playVideo()
):setTimeout(J,0)};V=!0,R.mute(),J()}function A(J){var N={name:"MediaError"};switch(J.data){case 2:N.message="Invalid video parameter.",N.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:N.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",N.code=MediaError.MEDIA_ERR_DECODE;case 100:N.message="Video not found.",N.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:N.message="Video not usable.",N.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:N.message="Unknown error.",N.code=5}H.error=N,I.dispatchEvent("error")}function O(){n("play",K),n("pause",M);if(H.autoplay||!H.paused)j("play",O),H.paused=!1,E(function(){H.paused||K()});H.muted||R.unMute(),H.readyState=I.HAVE_METADATA,I.dispatchEvent("loadedmetadata"),aa=setInterval(v,g),I.dispatchEvent("loadeddata"),H.readyState=I.HAVE_FUTURE_DATA,I.dispatchEvent("canplay"),U=!0;for(ba=setInterval(L,50);W.length;)W[0](),W.shift();H.readyState=I.HAVE_ENOUGH_DATA
,I.dispatchEvent("canplaythrough")}function a(){j("pause",a),R.getCurrentTime()>0?setTimeout(a,0):H.autoplay||!H.paused?(n("play",O),R.playVideo()):O()}function c(){j("play",c),R.getCurrentTime()===0?setTimeout(c,0):(n("pause",a),R.seekTo(0),R.pauseVideo())}function n(J,N){I.addEventListener("youtube-"+J,N,!1)}function j(J,N){I.removeEventListener("youtube-"+J,N,!1)}function w(J){I.dispatchEvent("youtube-"+J)}function x(){H.networkState=I.NETWORK_LOADING,I.dispatchEvent("waiting")}function z(J){switch(J.data){case YT.PlayerState.ENDED:w("ended");break;case YT.PlayerState.PLAYING:w("play");break;case YT.PlayerState.PAUSED:R.getDuration()!==R.getCurrentTime()&&w("pause");break;case YT.PlayerState.BUFFERING:w("buffering")}J.data!==YT.PlayerState.BUFFERING&&ca===YT.PlayerState.BUFFERING&&I.dispatchEvent("progress"),ca=J.data}function F(J){if(I._canPlaySrc(J)){H.src=J;if(b()){if(V){if(!U){E(function(){F(J)});return}V&&R&&(j("buffering",x),j("ended",D),j("play",K),j("pause",M),M(),Z=U=!1,H.currentTime=0
,W=[],clearInterval(aa),clearInterval(ba),R.stopVideo(),R.clearVideo(),R.destroy(),S=l.createElement("div"))}P.appendChild(S);var N=I._util.parseUri(J).queryKey;delete N.v,H.autoplay=N.autoplay==="1"||H.autoplay,delete N.autoplay,H.loop=N.loop==="1"||H.loop,delete N.loop,N.rel=N.rel||0,N.modestbranding=N.modestbranding||1,N.iv_load_policy=N.iv_load_policy||3,N.disablekb=N.disablekb||1,N.showinfo=N.showinfo||0;var ea=e.location.protocol==="file:"?"*":e.location.protocol+"//"+e.location.host;N.origin=N.origin||ea,N.controls=N.controls||H.controls?2:0,H.controls=N.controls,N.wmode=N.wmode||"opaque",J=r.exec(J)[1],p.getJSONP("https://gdata.youtube.com/feeds/api/videos/"+J+"?v=2&alt=jsonc&callback=?",function(X){X.error?console.warn("failed to retreive duration data, reason: "+X.error.message):X.data?(H.duration=X.data.duration,I.dispatchEvent("durationchange"),R=new YT.Player(S,{width:"100%",height:"100%",wmode:N.wmode,videoId:J,playerVars:N,events:{onReady:G,onError:A,onStateChange:z}}),H.
networkState=I.NETWORK_LOADING,I.dispatchEvent("loadstart"),I.dispatchEvent("progress")):console.warn("failed to retreive duration data, reason: no response data")})}else h(function(){F(J)})}else H.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},I.dispatchEvent("error")}function v(){var J=R.getCurrentTime();H.seeking?m(J-H.currentTime)<1&&Q():(m(H.currentTime-J)>g&&(B(),Q()),H.currentTime=J)}function L(){var J=R.getVideoLoadedFraction();J&&$!==J&&($=J,I.dispatchEvent("progress"))}function y(J){J!==H.currentTime&&(H.currentTime=J,U?(B(),R.seekTo(J)):E(function(){B(),R.seekTo(J)}))}function s(){I.dispatchEvent("timeupdate")}function B(){n("pause",f),j("pause",M),H.seeking=!0,I.dispatchEvent("seeking")}function Q(){H.ended=!1,H.seeking=!1,I.dispatchEvent("timeupdate"),I.dispatchEvent("seeked"),I.dispatchEvent("canplay"),I.dispatchEvent("canplaythrough")}function K(){H.ended&&(y(0),H.ended=!1),da=setInterval(s,I._util.TIMEUPDATE_MS)
,H.paused=!1;if(Y){Y=!1;if(H.loop&&!Z||!H.loop)Z=!0,I.dispatchEvent("play");I.dispatchEvent("playing")}}function M(){H.paused=!0,Y||(Y=!0,clearInterval(da),I.dispatchEvent("pause"))}function D(){H.loop?(y(0),I.play()):(H.ended=!0,M(),n("play",C),j("play",K),I.dispatchEvent("timeupdate"),I.dispatchEvent("ended"))}function T(J){H.muted=J,U?(R[J?"mute":"unMute"](),I.dispatchEvent("volumechange")):E(function(){T(H.muted)})}if(!e.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var I=new p._MediaElementProto,P=typeof u=="string"?l.querySelector(u):u,S=l.createElement("div"),H={src:k,networkState:I.NETWORK_EMPTY,readyState:I.HAVE_NOTHING,seeking:!1,autoplay:k,preload:k,controls:!1,loop:!1,poster:k,volume:1,muted:!1,currentTime:0,duration:NaN,ended:!1,paused:!0,error:null},V=!1,U=!1,Z=!1,R,Y=!0,W=[],ca=-1,ba,$=0,aa,da;return I._eventNamespace=p.guid("HTMLYouTubeVideoElement::"),I.parentNode=P,I._util.type="YouTube",n("buffering",x),n("ended",D),I.play=function(){H.
paused=!1,U?R.playVideo():E(function(){I.play()})},I.pause=function(){H.paused=!0,U?(f(),R.pauseVideo()):E(function(){I.pause()})},Object.defineProperties(I,{src:{get:function(){return H.src},set:function(J){J&&J!==H.src&&F(J)}},autoplay:{get:function(){return H.autoplay},set:function(J){H.autoplay=I._util.isAttributeSet(J)}},loop:{get:function(){return H.loop},set:function(J){H.loop=I._util.isAttributeSet(J)}},width:{get:function(){return I.parentNode.offsetWidth}},height:{get:function(){return I.parentNode.offsetHeight}},currentTime:{get:function(){return H.currentTime},set:function(J){y(J)}},duration:{get:function(){return H.duration}},ended:{get:function(){return H.ended}},paused:{get:function(){return H.paused}},seeking:{get:function(){return H.seeking}},readyState:{get:function(){return H.readyState}},networkState:{get:function(){return H.networkState}},volume:{get:function(){return H.volume},set:function(J){if(J<0||J>1)throw"Volume value must be between 0.0 and 1.0";H.volume=J,U?
(R.setVolume(H.volume*100),I.dispatchEvent("volumechange")):E(function(){I.volume=J})}},muted:{get:function(){return H.muted},set:function(J){T(I._util.isAttributeSet(J))}},error:{get:function(){return H.error}},buffered:{get:function(){var J={start:function(N){if(N===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1"},end:function(N){if(N===0)return H.duration?H.duration*$:0;throw"INDEX_SIZE_ERR: DOM Exception 1"}};return Object.defineProperties(J,{length:{get:function(){return 1}}}),J},configurable:!0}}),I._canPlaySrc=p.HTMLYouTubeVideoElement._canPlaySrc,I.canPlayType=p.HTMLYouTubeVideoElement.canPlayType,I}var g=10,k="",r=/^.*(?:\/|v=)(.{11})/,m=Math.abs,t=!1,q=!1,o=[];p.HTMLYouTubeVideoElement=function(u){return new i(u)},p.HTMLYouTubeVideoElement._canPlaySrc=function(u){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu).*(?:\/|v=)(.{11})/.test(u)?"probably":k},p.HTMLYouTubeVideoElement.canPlayType=function(u){return u==="video/x-youtube"?"probably":k}}(Popcorn,window,document),function(
p,e,l){function d(){return r||(p.getScript("https://w.soundcloud.com/player/api.js",function(){p.getScript("https://connect.soundcloud.com/sdk.js",function(){k=!0,SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var t=m.length;t--;)m[t](),delete m[t]})}),r=!0),k}function b(t){m.unshift(t)}function h(t){function q(D){B.unshift(D)}function o(){s.bind(SC.Widget.Events.LOAD_PROGRESS,function(D){O({type:"loadProgress",data:D.currentPosition/1e3})}),s.bind(SC.Widget.Events.PLAY_PROGRESS,function(D){O({type:"playProgress",data:D.currentPosition/1e3})}),s.bind(SC.Widget.Events.PLAY,function(){O({type:"play"})}),s.bind(SC.Widget.Events.PAUSE,function(){O({type:"pause"})}),s.bind(SC.Widget.Events.SEEK,function(){s.getPosition(function(D){D/=1e3,v.seeking?Math.floor(D)!==Math.floor(v.currentTime)?s.seekTo(v.currentTime*1e3):(v.ended=!1,v.seeking=!1,x.dispatchEvent("timeupdate"),x.dispatchEvent("seeked"),x.dispatchEvent("canplay"),x.dispatchEvent("canplaythrough")):O({type:"seek",data:D})})}
),s.bind(SC.Widget.Events.FINISH,function(){O({type:"finish"})}),L=!0,s.getDuration(E)}function u(){s.bind(SC.Widget.Events.PLAY_PROGRESS,function(D){s.setVolume(0),D.currentPosition>0&&(s.unbind(SC.Widget.Events.PLAY_PROGRESS),s.bind(SC.Widget.Events.PAUSE,function(){s.unbind(SC.Widget.Events.PAUSE),s.setVolume(100),s.bind(SC.Widget.Events.SEEK,function(){s.unbind(SC.Widget.Events.SEEK),o()}),s.seekTo(0)}),s.pause())}),s.play()}function E(D){D/=1e3;var T=v.duration;if(T!==D){v.duration=D,x.dispatchEvent("durationchange");if(isNaN(T)){v.networkState=x.NETWORK_IDLE,v.readyState=x.HAVE_METADATA,x.dispatchEvent("loadedmetadata"),x.dispatchEvent("loadeddata"),v.readyState=x.HAVE_FUTURE_DATA,x.dispatchEvent("canplay"),v.readyState=x.HAVE_ENOUGH_DATA,x.dispatchEvent("canplaythrough");for(D=B.length;D--;)B[D](),delete B[D];v.paused&&v.autoplay&&x.play()}}}function C(D){function T(){v.seeking=!0,x.dispatchEvent("seeking"),s.seekTo(D)}v.currentTime=D,D*=1e3,L?T():addMediaReadyCallback(T)}function f
(){v.paused=!0,y||(y=!0,clearInterval(Q),x.dispatchEvent("pause"))}function G(){x.dispatchEvent("timeupdate")}function A(D){v.currentTime=D,D!==M&&x.dispatchEvent("timeupdate"),M=D}function O(D){switch(D.type){case"loadProgress":x.dispatchEvent("progress");break;case"playProgress":A(D.data);break;case"play":K||(K=setInterval(a,i),v.loop&&x.dispatchEvent("play")),Q=setInterval(G,x._util.TIMEUPDATE_MS),v.paused=!1,y&&(y=!1,v.loop||x.dispatchEvent("play"),x.dispatchEvent("playing"));break;case"pause":f();break;case"finish":v.loop?(C(0),x.play()):(v.ended=!0,x.pause(),f(),x.dispatchEvent("timeupdate"),x.dispatchEvent("ended"));break;case"seek":A(D.data)}}function a(){v.ended||s.getPosition(function(D){A(D/1e3)})}function c(D){x._canPlaySrc(D)?(v.src=D,L&&L&&s&&(clearInterval(K),s.pause(),s.unbind(SC.Widget.Events.READY),s.unbind(SC.Widget.Events.LOAD_PROGRESS),s.unbind(SC.Widget.Events.PLAY_PROGRESS),s.unbind(SC.Widget.Events.PLAY),s.unbind(SC.Widget.Events.PAUSE),s.unbind(SC.Widget.Events.
SEEK),s.unbind(SC.Widget.Events.FINISH),z.removeChild(F),F=l.createElement("iframe")),d()?(L=!1,SC.get("/resolve",{url:D},function(T){var I;T.errors&&(I={name:"MediaError"},T.errors[0]&&T.errors[0].error_message==="404 - Not Found"&&(I.message="Video not found.",I.code=MediaError.MEDIA_ERR_NETWORK),v.error=I,x.dispatchEvent("error")),F.id=p.guid("soundcloud-"),F.width=v.width,F.height=v.height,F.frameBorder=0,F.webkitAllowFullScreen=!0,F.mozAllowFullScreen=!0,F.allowFullScreen=!0,w(v.controls),z.appendChild(F),F.onload=function(){F.onload=null,s=SC.Widget(F),s.bind(SC.Widget.Events.READY,u),v.networkState=x.NETWORK_LOADING,x.dispatchEvent("loadstart"),x.dispatchEvent("progress")},F.src="https://w.soundcloud.com/player/?url="+T.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=false&show_comments=false&show_user=false&single_active=false"})):b(function(){c(D)})):(v.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED
},x.dispatchEvent("error"))}function n(D){v.volume=D,L?(s.setVolume(D),x.dispatchEvent("volumechange")):q(function(){n(D)})}function j(D){L?D?(v.muted=v.volume,n(0)):(v.muted=0,n(v.muted)):(v.muted=D?1:0,q(function(){j(D)}))}function w(D){L?(F.style.position="absolute",F.style.visibility=D?"visible":"hidden"):(F.style.opacity=D?"1":"0",F.style.pointerEvents=D?"auto":"none"),v.controls=D}if(!e.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";var x=new p._MediaElementProto,z=typeof t=="string"?p.dom.find(t):t,F=l.createElement("iframe"),v={src:g,networkState:x.NETWORK_EMPTY,readyState:x.HAVE_NOTHING,seeking:!1,autoplay:g,preload:g,controls:!1,loop:!1,poster:g,volume:100,muted:0,currentTime:0,duration:NaN,ended:!1,paused:!0,width:z.width|0?z.width:x._util.MIN_WIDTH,height:z.height|0?z.height:x._util.MIN_HEIGHT,error:null},L=!1,y=!0,s,B=[],Q,K,M=0;return x._eventNamespace=p.guid("HTMLSoundCloudAudioElement::"),x.parentNode=z,x._util.type="SoundCloud",x.play=function(
){v.paused=!1,L?(v.ended&&C(0),s.play()):q(function(){x.play()})},x.pause=function(){v.paused=!0,L?s.pause():q(function(){x.pause()})},Object.defineProperties(x,{src:{get:function(){return v.src},set:function(D){D&&D!==v.src&&c(D)}},autoplay:{get:function(){return v.autoplay},set:function(D){v.autoplay=x._util.isAttributeSet(D)}},loop:{get:function(){return v.loop},set:function(D){v.loop=x._util.isAttributeSet(D)}},width:{get:function(){return F.width},set:function(D){F.width=D,v.width=F.width}},height:{get:function(){return F.height},set:function(D){F.height=D,v.height=F.height}},currentTime:{get:function(){return v.currentTime},set:function(D){C(D)}},duration:{get:function(){return v.duration}},ended:{get:function(){return v.ended}},paused:{get:function(){return v.paused}},seeking:{get:function(){return v.seeking}},readyState:{get:function(){return v.readyState}},networkState:{get:function(){return v.networkState}},volume:{get:function(){return(v.muted>0?v.muted:v.volume)/100},set:function(
D){if(D<0||D>1)throw"Volume value must be between 0.0 and 1.0";D*=100,n(D)}},muted:{get:function(){return v.muted>0},set:function(D){j(x._util.isAttributeSet(D))}},error:{get:function(){return v.error}},controls:{get:function(){return v.controls},set:function(D){w(!!D)}}}),x._canPlaySrc=p.HTMLSoundCloudAudioElement._canPlaySrc,x.canPlayType=p.HTMLSoundCloudAudioElement.canPlayType,x}var i=16,g="",k=!1,r=!1,m=[];p.HTMLSoundCloudAudioElement=function(t){return new h(t)},p.HTMLSoundCloudAudioElement._canPlaySrc=function(t){return/(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)(soundcloud)/.test(t)?"probably":g},p.HTMLSoundCloudAudioElement.canPlayType=function(t){return t==="audio/x-soundcloud"?"probably":g}}(Popcorn,window,document),function(p){var e=function(l,d){var b=0,h=0,i;p.forEach(d.classes,function(g,k){i=[],g==="parent"?i[0]=document.querySelectorAll("#"+d.target)[0].parentNode:i=document.querySelectorAll("#"+d.target+" "+g),b=0;for(h=i.length;b<h;b++)i[b].classList.toggle(k)})};p.compose
("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(l){l.classes={},l.applyclass=l.applyclass||"";for(var d=l.applyclass.replace(/\s/g,"").split(","),b=[],h=0,i=d.length;h<i;h++)b=d[h].split(":"),b[0]&&(l.classes[b[0]]=b[1]||"")},start:e,end:e})}(Popcorn),function(p){function e(d,b){d.map?d.map.div.style.display=b:setTimeout(function(){e(d,b)},10)}var l=1;p.plugin("openmap",function(d){var b,h,i,g,k,r,m,t,q=document.getElementById(d.target);return b=document.createElement("div"),b.id="openmapdiv"+l,b.style.width="100%",b.style.height="100%",l++,q&&q.appendChild(b),t=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){d.location?(location=new OpenLayers.LonLat(0,0),p.getJSONP("//tinygeocoder.com/create-api.php?q="+d.location+"&callback=jsonp",function(u){h=new OpenLayers.LonLat(u[1],u[0])})):h=new OpenLayers.LonLat(d.lng,d.lat),d.type=d.type||"ROADMAP";switch(d.type
){case"SATELLITE":d.map=new OpenLayers.Map({div:b,maxResolution:.28125,tileSize:new OpenLayers.Size(512,512)});var o=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});d.map.addLayer(o),g=new OpenLayers.Projection("EPSG:4326"),i=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":g=new OpenLayers.Projection("EPSG:4326"),i=new OpenLayers.Projection("EPSG:4326"),d.map=new OpenLayers.Map({div:b,projection:i}),o=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"}),d.map.addLayer(o);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":o=d.type.replace("STAMEN-","").toLowerCase(),o=new OpenLayers.Layer.Stamen(o),g=new OpenLayers.Projection("EPSG:4326"),i=new OpenLayers.Projection("EPSG:900913"),h=h.transform(g,i),d.map=new OpenLayers.Map({div:b,projection:i,displayProjection:g,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.
ZoomPanel]}),d.map.addLayer(o);break;default:i=new OpenLayers.Projection("EPSG:900913"),g=new OpenLayers.Projection("EPSG:4326"),h=h.transform(g,i),d.map=new OpenLayers.Map({div:b,projection:i,displayProjection:g}),o=new OpenLayers.Layer.OSM,d.map.addLayer(o)}d.map&&(d.map.setCenter(h,d.zoom||10),d.map.div.style.display="none")}else setTimeout(function(){t()},50)},t(),{_setup:function(o){window.OpenLayers||p.getScript("//openlayers.org/api/OpenLayers.js",function(){p.getScript("//maps.stamen.com/js/tile.stamen.js")});var u=function(){if(o.map){o.zoom=o.zoom||2,o.zoom&&typeof o.zoom!="number"&&(o.zoom=+o.zoom),o.map.setCenter(h,o.zoom);if(o.markers){var E=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),C=function(j){clickedFeature=j.feature,clickedFeature.attributes.text&&(m=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,!0,function(){r.unselect(this
.feature)}),clickedFeature.popup=m,m.feature=clickedFeature,o.map.addPopup(m))},f=function(j){feature=j.feature,feature.popup&&(m.feature=null,o.map.removePopup(feature.popup),feature.popup.destroy(),feature.popup=null)},G=function(j){p.getJSONP("//tinygeocoder.com/create-api.php?q="+j.location+"&callback=jsonp",function(w){w=(new OpenLayers.Geometry.Point(w[1],w[0])).transform(g,i);var x=OpenLayers.Util.extend({},E);if(!j.size||isNaN(j.size))j.size=14;x.pointRadius=j.size,x.graphicOpacity=1,x.externalGraphic=j.icon,w=new OpenLayers.Feature.Vector(w,null,x),j.text&&(w.attributes={text:j.text}),k.addFeatures([w])})};k=new OpenLayers.Layer.Vector("Point Layer",{style:E}),o.map.addLayer(k);for(var A=0,O=o.markers.length;A<O;A++){var a=o.markers[A];a.text&&(r||(r=new OpenLayers.Control.SelectFeature(k),o.map.addControl(r),r.activate(),k.events.on({featureselected:C,featureunselected:f})));if(a.location)G(a);else{var c=(new OpenLayers.Geometry.Point(a.lng,a.lat)).transform(g,i),n=OpenLayers.
Util.extend({},E);if(!a.size||isNaN(a.size))a.size=14;n.pointRadius=a.size,n.graphicOpacity=1,n.externalGraphic=a.icon,c=new OpenLayers.Feature.Vector(c,null,n),a.text&&(c.attributes={text:a.text}),k.addFeatures([c])}}}}else setTimeout(function(){u()},13)};u()},start:function(o,u){e(u,"block")},end:function(o,u){e(u,"none")},_teardown:function(){q&&q.removeChild(b),b=map=h=i=g=k=r=m=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type
:"text",label:"List Markers",optional:!0}}})}(Popcorn);var wikiCallback;(function(p){p.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:!0},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:!0},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:!0},target:"wikipedia-container"}},_setup:function(e){var l,d=p.guid();e.lang||(e.lang="en"),e.numberofwords=e.numberofwords||200,window["wikiCallback"+d]=function(b){e._link=document.createElement("a"),e._link.setAttribute("href",e.src),e._link.setAttribute("target","_blank"),e._link.innerHTML=e.title||b.parse.displaytitle,e._desc=
document.createElement("p"),l=b.parse.text["*"].substr(b.parse.text["*"].indexOf("<p>")),l=l.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,""),l=l.split(" "),e._desc.innerHTML=l.slice(0,l.length>=e.numberofwords?e.numberofwords:l.length).join(" ")+" ...",e._fired=!0},e.src&&p.getScript("//"+e.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+e.src.slice(e.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d),e.toString=function(){return e.src||e._natives.manifest.options.src["default"]}},start:function(e,l){var d=function(){l._fired?l._link&&l._desc&&document.getElementById(l.target)&&(document.getElementById(l.target).appendChild(l._link),document.getElementById(l.target).appendChild(l._desc),l._added=!0):setTimeout(function(){d()},13)};d()},end:function(e,l){l._added&&(document.getElementById(l.target).removeChild(l._link),document.getElementById(l.target).removeChild(l._desc))},_teardown:function(e){e._added&&(e._link.parentNode&&document.getElementById
(e.target).removeChild(e._link),e._desc.parentNode&&document.getElementById(e.target).removeChild(e._desc),delete e.target)}})})(Popcorn),function(p){var e=0,l=function(d,b){var h=d.container=document.createElement("div"),i=h.style,g=d.media,k=function(){var r=d.position();i.fontSize="18px",i.width=g.offsetWidth+"px",i.top=r.top+g.offsetHeight-h.offsetHeight-40+"px",i.left=r.left+"px",setTimeout(k,10)};return h.id=b||p.guid(),i.position="absolute",i.color="white",i.textShadow="black 2px 2px 6px",i.fontWeight="bold",i.textAlign="center",k(),d.media.parentNode.appendChild(h),h};p.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(d){var b=document.createElement("div");b.id="subtitle-"+e++,b.style.display="none"
,!this.container&&(!d.target||d.target==="subtitle-container")&&l(this),d.container=d.target&&d.target!=="subtitle-container"?document.getElementById(d.target)||l(this,d.target):this.container,document.getElementById(d.container.id)&&document.getElementById(d.container.id).appendChild(b),d.innerContainer=b,d.showSubtitle=function(){d.innerContainer.innerHTML=d.text||""}},start:function(d,b){b.innerContainer.style.display="inline",b.showSubtitle(b,b.text)},end:function(d,b){b.innerContainer.style.display="none",b.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})}(Popcorn),function(p,e){var l={};p.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:!0
},height:{elem:"input",type:"text",label:"Height",optional:!0},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":!0},page:{elem:"input",type:"number",label:"Page Number",optional:!0},aid:{elem:"input",type:"number",label:"Annotation Id",optional:!0}}},_setup:function(d){function b(){function m(j){d._key=j.api.getId(),d._changeView=function(w){d.aid?w.pageSet.showAnnotation(w.api.getAnnotation(d.aid)):w.api.setCurrentPage(d.page)}}function t(){l[d._key]={num:1,id:d._containerId},i.loaded=!0}i.loaded=!1;var q=d.url.replace(/\.html$/,".js"),o=d.target,u=e.getElementById(o),E=e.createElement("div"),C=p.position(u),f=d.width||C.width;C=d.height||C.height;var G=d.sidebar||!0,A=d.text||!0,O=d.pdf||!0,a=d.showAnnotations||!0,c=d.zoom||700,n=d.search||!0;if(!function(j){var w=!1;return p.forEach(i.viewers,function(x){x.api.getSchema().canonicalURL===j&&
(m(x),x=l[d._key],d._containerId=x.id,x.num+=1,w=!0,i.loaded=!0)}),w}(d.url))E.id=d._containerId=p.guid(o),o="#"+E.id,u.appendChild(E),g.trigger("documentready"),i.load(q,{width:f,height:C,sidebar:G,text:A,pdf:O,showAnnotations:a,zoom:c,search:n,container:o,afterLoad:d.page||d.aid?function(j){m(j),d._changeView(j),E.style.visibility="hidden",j.elements.pages.hide(),t()}:function(j){m(j),t(),E.style.visibility="hidden",j.elements.pages.hide()}})}function h(){window.DV.loaded?b():setTimeout(h,25)}var i=window.DV=window.DV||{},g=this;if(i.loading)h();else{i.loading=!0,i.recordHit="//www.documentcloud.org/pixel.gif";var k=e.createElement("link"),r=e.getElementsByTagName("head")[0];k.rel="stylesheet",k.type="text/css",k.media="screen",k.href="//s3.documentcloud.org/viewer/viewer-datauri.css",r.appendChild(k),i.loaded=!1,p.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){i.loading=!1,b()})}d.toString=function(){return d.src||d._natives.manifest.options.src["default"]}},start
:function(d,b){var h=e.getElementById(b._containerId),i=DV.viewers[b._key];(b.page||b.aid)&&i&&b._changeView(i),h&&i&&(h.style.visibility="visible",i.elements.pages.show())},end:function(d,b){var h=e.getElementById(b._containerId);h&&DV.viewers[b._key]&&(h.style.visibility="hidden",DV.viewers[b._key].elements.pages.hide())},_teardown:function(d){var b=e.getElementById(d._containerId);if((d=d._key)&&DV.viewers[d]&&--l[d].num===0){for(DV.viewers[d].api.unload();b.hasChildNodes();)b.removeChild(b.lastChild);b.parentNode.removeChild(b)}}})}(Popcorn,window.document),function(p){var e=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,l={},d={vimeo:!1,youtube:!1,soundcloud:!1,module:!1};Object.defineProperty(l,void 0,{get:function(){return d[void 0]},set:function(b){d[void 0]=b}}),p.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input"
,type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:!0},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:!0},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:!0},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:!0}}},_setup:function(b){function h(){function t(){k!=="HTML5"&&!window.Popcorn[k]?setTimeout(function(){t()},300):(b.id=b._container.id,b._container.style.width=b.width+"px",b._container.style.height=b.height+"px",b.popcorn=p.smart("#"+b.id,b.source),k==="HTML5"&&b.popcorn.controls(!0),b._container.style.width="0px",b._container.style.height="0px",b._container.style.visibility="hidden",b._container.style.overflow="hidden")}k!=="HTML5"&&!
window.Popcorn[k]&&!l[k]?(l[k]=!0,p.getScript("http://popcornjs.org/code/players/"+k+"/popcorn."+k+".js",function(){t()})):t()}function i(){window.Popcorn.player?h():setTimeout(function(){i()},300)}var g=document.getElementById(b.target)||{},k,r,m;(r=e.exec(b.source))?(k=r[1],k==="youtu"&&(k="youtube")):k="HTML5",b._type=k,b._container=document.createElement("div"),r=b._container,r.id="mediaSpawnerdiv-"+p.guid(),b.width=b.width||400,b.height=b.height||200,b.caption&&(m=document.createElement("div"),m.innerHTML=b.caption,m.style.display="none",b._capCont=m,r.appendChild(m)),g&&g.appendChild(r),!window.Popcorn.player&&!l.module?(l.module=!0,p.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",i)):i(),b.toString=function(){return b.source||b._natives.manifest.options.source["default"]}},start:function(b,h){h._capCont&&(h._capCont.style.display=""),h._container.style.width=h.width+"px",h._container.style.height=h.height+"px",h._container.style.visibility="visible",h._container
.style.overflow="visible",h.autoplay&&h.popcorn.play()},end:function(b,h){h._capCont&&(h._capCont.style.display="none"),h._container.style.width="0px",h._container.style.height="0px",h._container.style.visibility="hidden",h._container.style.overflow="hidden",h.popcorn.pause()},_teardown:function(b){b.popcorn&&b.popcorn.destory&&b.popcorn.destroy(),document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._container)}})}(Popcorn,this),function(p){var e=1;p.plugin("timeline",function(l){var d=document.getElementById(l.target),b=document.createElement("div"),h,i=!0;return d&&!d.firstChild?(d.appendChild(h=document.createElement("div")),h.style.width="inherit",h.style.height="inherit",h.style.overflow="auto"):h=d.firstChild,b.style.display="none",b.id="timelineDiv"+e,l.direction=l.direction||"up",l.direction.toLowerCase()==="down"&&(i=!1),d&&h&&(i?h.insertBefore(b,h.firstChild):h.appendChild(b)),e++,b.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
l.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+l.text+"</span><br />"+l.innerHTML,{start:function(g,k){b.style.display="block",k.direction==="down"&&(h.scrollTop=h.scrollHeight)},end:function(){b.style.display="none"},_teardown:function(){h&&b&&h.removeChild(b)&&!h.firstChild&&d.removeChild(h)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:!0},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:!0}}})}(Popcorn),function(p){var e=0;p.plugin("flickr",function(l){var d,b=document.getElementById(l.target),h,i,g,k,r=l.numberofimages||4,m=l.height||"50px",t=l.width||"50px",q=l.padding||"5px",o=l.border||"0px"
;d=document.createElement("div"),d.id="flickr"+e,d.style.width="100%",d.style.height="100%",d.style.display="none",e++,b&&b.appendChild(d);var u=function(){h?setTimeout(function(){u()},5):(i="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",i+="username="+l.username+"&api_key="+l.apikey+"&format=json&jsoncallback=flickr",p.getJSONP(i,function(C){h=C.user.nsid,E()}))},E=function(){i="http://api.flickr.com/services/feeds/photos_public.gne?",h&&(i+="id="+h+"&"),l.tags&&(i+="tags="+l.tags+"&"),i+="lang=en-us&format=json&jsoncallback=flickr",p.xhr.getJSONP(i,function(C){var f=document.createElement("div");f.innerHTML="<p style='padding:"+q+";'>"+C.title+"<p/>",p.forEach(C.items,function(G,A){if(!(A<r))return!1;g=document.createElement("a"),g.setAttribute("href",G.link),g.setAttribute("target","_blank"),k=document.createElement("img"),k.setAttribute("src",G.media.m),k.setAttribute("height",m),k.setAttribute("width",t),k.setAttribute("style","border:"+o+";padding:"+q)
,g.appendChild(k),f.appendChild(g)}),d.appendChild(f)})};return l.username&&l.apikey?u():(h=l.userid,E()),l.toString=function(){return l.tags||l.username||"Flickr"},{start:function(){d.style.display="inline"},end:function(){d.style.display="none"},_teardown:function(C){document.getElementById(C.target)&&document.getElementById(C.target).removeChild(d)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:!0},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:!0},apikey:{elem:"input",type:"text",label:"API Key",optional:!0},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:!0},width:{elem:"input",type:"text",label:"Width","default":"50px"
,optional:!0},padding:{elem:"input",type:"text",label:"Padding",optional:!0},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:!0},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})}(Popcorn),function(p){p.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:!0},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(e){var l=document.getElementById(e.target);e.src=e.src.replace(/^(https?:)?(\/\/)?/,"//"),e._iframe=document.createElement("iframe"),e._iframe.setAttribute("width","100%"),e._iframe.setAttribute("height","100%"),e._iframe.id=e.id,e._iframe.src=e.src,e._iframe.style.display="none",l&&l.appendChild(e._iframe)},start:function(
e,l){l._iframe.src=l.src,l._iframe.style.display="inline"},end:function(e,l){l._iframe.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(e._iframe)}})}(Popcorn),function(p){var e={},l=0,d=document.createElement("span"),b=["webkit","Moz","ms","O",""],h=["Transform","TransitionDuration","TransitionTimingFunction"],i={},g;document.getElementsByTagName("head")[0].appendChild(d);for(var k=0,r=h.length;k<r;k++)for(var m=0,t=b.length;m<t;m++){g=b[m]+h[k];if(g in d.style){i[h[k].toLowerCase()]=g;break}}document.getElementsByTagName("head")[0].appendChild(d),p.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:!0}}},_setup:function(q){
q._duration=q.end-q.start;var o;if(!(o=e[q.target])){o=q.target,e[o]=document.createElement("div");var u=document.getElementById(o);u&&u.appendChild(e[o]),e[o].style.height="100%",e[o].style.position="relative",o=e[o]}q._container=o,q.word=document.createElement("span"),q.word.style.position="absolute",q.word.style.whiteSpace="nowrap",q.word.style.opacity=0,q.word.style.MozTransitionProperty="opacity, -moz-transform",q.word.style.webkitTransitionProperty="opacity, -webkit-transform",q.word.style.OTransitionProperty="opacity, -o-transform",q.word.style.transitionProperty="opacity, transform",q.word.style[i.transitionduration]="1s, "+q._duration+"s",q.word.style[i.transitiontimingfunction]="linear",q.word.innerHTML=q.text,q.word.style.color=q.color||"black"},start:function(q,o){o._container.appendChild(o.word),o.word.style[i.transform]="",o.word.style.fontSize=~~(30+20*Math.random())+"px",l%=o._container.offsetWidth-o.word.offsetWidth,o.word.style.left=l+"px",l+=o.word.offsetWidth+10,o.word
.style[i.transform]="translateY("+(o._container.offsetHeight-o.word.offsetHeight)+"px)",o.word.style.opacity=1,setTimeout(function(){o.word.style.opacity=0},(o.end-o.start-1||1)*1e3)},end:function(q,o){o.word.style.opacity=0},_teardown:function(q){var o=document.getElementById(q.target);q.word.parentNode&&q._container.removeChild(q.word),e[q.target]&&!e[q.target].childElementCount&&o&&o.removeChild(e[q.target])&&delete e[q.target]}})}(Popcorn);var googleCallback;(function(p){function e(g,k,r){g=g.type?g.type.toUpperCase():"HYBRID";var m;if(g==="STAMEN-WATERCOLOR"||g==="STAMEN-TERRAIN"||g==="STAMEN-TONER")m=g.replace("STAMEN-","").toLowerCase();return r=new google.maps.Map(r,{mapTypeId:m?m:google.maps.MapTypeId[g],mapTypeControlOptions:{mapTypeIds:[]}}),m&&r.mapTypes.set(m,new google.maps.StamenMapType(m)),r.getDiv().style.display="none",r}var l=1,d=!1,b=!1,h,i;googleCallback=function(g){typeof google!="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng?(h=new google.maps.
Geocoder,p.getScript("//maps.stamen.com/js/tile.stamen.js",function(){b=!0})):setTimeout(function(){googleCallback(g)},1)},i=function(){document.body?(d=!0,p.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){i()},1)},p.plugin("googlemap",function(g){var k,r,m,t=document.getElementById(g.target);g.type=g.type||"ROADMAP",g.zoom=g.zoom||1,g.lat=g.lat||0,g.lng=g.lng||0,d||i(),k=document.createElement("div"),k.id="actualmap"+l,k.style.width=g.width||"100%",k.style.height=g.height?g.height:t&&t.clientHeight?t.clientHeight+"px":"100%",l++,t&&t.appendChild(k);var q=function(){b?k&&(g.location?h.geocode({address:g.location},function(o,u){k&&u===google.maps.GeocoderStatus.OK&&(g.lat=o[0].geometry.location.lat(),g.lng=o[0].geometry.location.lng(),m=new google.maps.LatLng(g.lat,g.lng),r=e(g,m,k))}):(m=new google.maps.LatLng(g.lat,g.lng),r=e(g,m,k))):setTimeout(function(){q()},5)};return q(),g.toString=function(){return g.location||(g.lat&&g.lng?g
.lat+", "+g.lng:g._natives.manifest.options.location["default"])},{start:function(o,u){var E=this,C,f=function(){if(r){u._map=r,r.getDiv().style.display="block",google.maps.event.trigger(r,"resize"),r.setCenter(m),u.zoom&&typeof u.zoom!="number"&&(u.zoom=+u.zoom),r.setZoom(u.zoom),u.heading&&typeof u.heading!="number"&&(u.heading=+u.heading),u.pitch&&typeof u.pitch!="number"&&(u.pitch=+u.pitch);if(u.type==="STREETVIEW"){r.setStreetView(C=new google.maps.StreetViewPanorama(k,{position:m,pov:{heading:u.heading=u.heading||0,pitch:u.pitch=u.pitch||0,zoom:u.zoom}}));var G=function(w,x){var z=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var F=E.media.currentTime;if(typeof u.tween=="object"){for(var v=0,L=w.length;v<L;v++){var y=w[v];F>=y.interval*(v+1)/1e3&&(F<=y.interval*(v+2)/1e3||F>=y.interval*L/1e3)&&(n.setPosition(new google.maps.LatLng(y.position.lat,y.position.lng)),n.setPov({heading:y.pov.heading||z(y,w[v+1])||0,zoom:y.pov.zoom||0,pitch:y.pov.pitch||0}))}G(w,w[0
].interval)}else{v=0;for(L=w.length;v<L;v++)y=u.interval,F>=y*(v+1)/1e3&&(F<=y*(v+2)/1e3||F>=y*L/1e3)&&(A.setPov({heading:z(w[v],w[v+1])||0,zoom:u.zoom,pitch:u.pitch||0}),A.setPosition(O[v]));G(O,u.interval)}},x)};if(u.location&&typeof u.tween=="string"){var A=C,O=[],a=new google.maps.DirectionsService,c=new google.maps.DirectionsRenderer(A);a.route({origin:u.location,destination:u.tween,travelMode:google.maps.TravelMode.DRIVING},function(w,x){if(x==google.maps.DirectionsStatus.OK){c.setDirections(w);for(var z=w.routes[0].overview_path,F=0,v=z.length;F<v;F++)O.push(new google.maps.LatLng(z[F].lat(),z[F].lng()));u.interval=u.interval||1e3,G(O,10)}})}else if(typeof u.tween=="object"){var n=C;a=0;for(var j=u.tween.length;a<j;a++)u.tween[a].interval=u.tween[a].interval||1e3,G(u.tween,10)}}u.onmaploaded&&u.onmaploaded(u,r)}else setTimeout(function(){f()},13)};f()},end:function(){r&&(r.getDiv().style.display="none")},_teardown:function(o){var u=document.getElementById(o.target);u&&u.removeChild
(k),k=r=m=null,o._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:!0},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:!0},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:!0}}})})(Popcorn),function(p){p.plugin("mustache",function(e){var l,d,b,h;p.getScript("http://mustache.github.com/extras/mustache.js");var i=!!e.dynamic,g=typeof e.
template,k=typeof e.data,r=document.getElementById(e.target);return e.container=r||document.createElement("div"),g==="function"?i?b=e.template:h=e.template(e):h=g==="string"?e.template:"",k==="function"?i?l=e.data:d=e.data(e):d=k==="string"?JSON.parse(e.data):k==="object"?e.data:"",{start:function(m,t){var q=function(){if(window.Mustache){l&&(d=l(t)),b&&(h=b(t));var o=Mustache.to_html(h,d).replace(/^\s*/mg,"");t.container.innerHTML=o}else setTimeout(function(){q()},10)};q()},end:function(m,t){t.container.innerHTML=""},_teardown:function(){l=d=b=h=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":!0}}})}(Popcorn),document
.addEventListener("click",function(p){p=p.target,(p.nodeName==="A"||p.parentNode&&p.parentNode.nodeName==="A")&&Popcorn.instances.forEach(function(e){e.options.pauseOnLinkClicked&&e.pause()})},!1),function(p){p.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(e){var l=p.dom.find(e.target);e._container=document.createElement("div"),e._container.style.display="none",e._container.innerHTML=e.text,l.appendChild(e._container)},start:function(e,l){l._container.style.display="inline"},end:function(e,l){l._container.style.display="none"},_teardown:function(e){var l=p.dom.find(e.target);l&&l.removeChild(e._container)}})}(Popcorn),function(p){var e=1,l=!1;p.plugin("googlefeed",function(d){var b=function(){var k=!1
,r=0,m=document.getElementsByTagName("link"),t=m.length,q=document.head||document.getElementsByTagName("head")[0],o=document.createElement("link");window.GFdynamicFeedControl?l=!0:p.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){l=!0});for(;r<t;r++)m[r].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"&&(k=!0);k||(o.type="text/css",o.rel="stylesheet",o.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css",q.insertBefore(o,q.firstChild))};window.google?b():p.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){b()}})});var h=document.createElement("div"),i=document.getElementById(d.target),g=function(){l?d.feed=new GFdynamicFeedControl(d.url,h,{vertical:d.orientation.toLowerCase()==="vertical"?!0:!1,horizontal:d.orientation.toLowerCase()==="horizontal"?!0:!1,title:d.title=d.title||"Blog"}):setTimeout(function(){g()},5)};if(!d.orientation||d.orientation.toLowerCase
()!=="vertical"&&d.orientation.toLowerCase()!=="horizontal")d.orientation="vertical";return h.style.display="none",h.id="_feed"+e,h.style.width="100%",h.style.height="100%",e++,i&&i.appendChild(h),g(),d.toString=function(){return d.url||d._natives.manifest.options.url["default"]},{start:function(){h.setAttribute("style","display:inline")},end:function(){h.setAttribute("style","display:none")},_teardown:function(k){document.getElementById(k.target)&&document.getElementById(k.target).removeChild(h),delete k.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:!0},orientation:{elem:"select",options:["Vertical","Horizontal"
],label:"Orientation","default":"Vertical",optional:!0}}})}(Popcorn),function(p){function e(b){return String(b).replace(/&(?!\w+;)|[<>"']/g,function(h){return d[h]||h})}function l(b,h){var i=b.container=document.createElement("div"),g=i.style,k=b.media,r=function(){var m=b.position();g.fontSize="18px",g.width=k.offsetWidth+"px",g.top=m.top+k.offsetHeight-i.offsetHeight-40+"px",g.left=m.left+"px",setTimeout(r,10)};return i.id=h||"",g.position="absolute",g.color="white",g.textShadow="black 2px 2px 6px",g.fontWeight="bold",g.textAlign="center",r(),b.media.parentNode.appendChild(i),i}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};p.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox"
,label:"Multiline"}}},_setup:function(b){var h,i,g=b._container=document.createElement("div");g.style.display="none",b.target?(h=p.dom.find(b.target))?["VIDEO","AUDIO"].indexOf(h.nodeName)>-1&&(h=l(this,b.target+"-overlay")):h=l(this,b.target):h=this.container?this.container:l(this),b._target=h,i=b.escape?e(b.text):b.text,i=b.multiline?i.replace(/\r?\n/gm,"<br>"):i,g.innerHTML=i||"",h.appendChild(g),b.toString=function(){return b.text||b._natives.manifest.options.text["default"]}},start:function(b,h){h._container.style.display="inline"},end:function(b,h){h._container.style.display="none"},_teardown:function(b){var h=b._target;h&&h.removeChild(b._container)}})}(Popcorn),function(p){p.plugin("code",function(e){var l=!1,d=this,b=function(){var h=function(i){return function(g,k){var r=function(){l&&g.call(d,k),l&&i(r)};r()}};return window.webkitRequestAnimationFrame?h(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?h(window.mozRequestAnimationFrame):h(function(i){window.
setTimeout(i,16)})}();if(!e.onStart||typeof e.onStart!="function")e.onStart=p.nop;return e.onEnd&&typeof e.onEnd!="function"&&(e.onEnd=undefined),e.onFrame&&typeof e.onFrame!="function"&&(e.onFrame=undefined),{start:function(h,i){i.onStart.call(d,i),i.onFrame&&(l=!0,b(i.onFrame,i))},end:function(h,i){i.onFrame&&(l=!1),i.onEnd&&i.onEnd.call(d,i)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:!0},onEnd:{elem:"input",type:"function",label:"onEnd"}}})}(Popcorn),function(p){function e(b){function h(){var r=b.getBoundingClientRect(),m=g.getBoundingClientRect();m.left!==r.left&&(g.style.left=r.left+"px"),m.top!==r.top&&(g.style.top=r.top+"px")}var i=-1,g=document.createElement("div"),k=getComputedStyle(b
).zIndex;return g.setAttribute("data-popcorn-helper-container",!0),g.style.position="absolute",g.style.zIndex=isNaN(k)?l:k+1,document.body.appendChild(g),{element:g,start:function(){i=setInterval(h,d)},stop:function(){clearInterval(i),i=-1},destroy:function(){document.body.removeChild(g),i!==-1&&clearInterval(i)}}}var l=2e3,d=10;p.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:!0},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:!0}}},_setup:function(b){var h=document
.createElement("img"),i=document.getElementById(b.target);b.anchor=document.createElement("a"),b.anchor.style.position="relative",b.anchor.style.textDecoration="none",b.anchor.style.display="none",i&&(["VIDEO","AUDIO"].indexOf(i.nodeName)>-1?(b.trackedContainer=e(i),b.trackedContainer.element.appendChild(b.anchor)):i&&i.appendChild(b.anchor)),h.addEventListener("load",function(){h.style.borderStyle="none",b.anchor.href=b.href||b.src||"#",b.anchor.target="_blank";var g,k;h.style.height=i.style.height,h.style.width=i.style.width,b.anchor.appendChild(h),b.text&&(g=h.height/12+"px",k=document.createElement("div"),p.extend(k.style,{color:"black",fontSize:g,fontWeight:"bold",position:"relative",textAlign:"center",width:h.style.width||h.width+"px",zIndex:"10"}),k.innerHTML=b.text||"",k.style.top=(h.style.height.replace("px","")||h.height)/2-k.offsetHeight/2+"px",b.anchor.insertBefore(k,h))},!1),h.src=b.src,b.toString=function(){var g=b.src||b._natives.manifest.options.src["default"],k=g.replace
(/.*\//g,"");return k.length?k:g}},start:function(b,h){h.anchor.style.display="inline",h.trackedContainer&&h.trackedContainer.start()},end:function(b,h){h.anchor.style.display="none",h.trackedContainer&&h.trackedContainer.stop()},_teardown:function(b){b.trackedContainer?b.trackedContainer.destroy():b.anchor.parentNode&&b.anchor.parentNode.removeChild(b.anchor)}})}(Popcorn),function(p){p.parser("parseXML","XML",function(e){var l={title:"",remote:"",data:[]},d={},b=function(m){m=m.split(":");if(m.length===1)return parseFloat(m[0],10);if(m.length===2)return parseFloat(m[0],10)+parseFloat(m[1]/12,10);if(m.length===3)return parseInt(m[0]*60,10)+parseFloat(m[1],10)+parseFloat(m[2]/12,10);if(m.length===4)return parseInt(m[0]*3600,10)+parseInt(m[1]*60,10)+parseFloat(m[2],10)+parseFloat(m[3]/12,10)},h=function(m){for(var t={},q=0,o=m.length;q<o;q++){var u=m.item(q).nodeName,E=m.item(q).nodeValue,C=d[E];if(u==="in")t.start=b(E);else if(u==="out")t.end=b(E);else if(u==="resourceid")for(var f in C)
C.hasOwnProperty(f)&&!t[f]&&f!=="id"&&(t[f]=C[f]);else t[u]=E}return t},i=function(m,t){var q={};return q[m]=t,q},g=function(m,t,q){var o={};p.extend(o,t,h(m.attributes),{text:m.textContent||m.text}),t=m.childNodes;if(t.length<1||t.length===1&&t[0].nodeType===3)q?d[o.id]=o:l.data.push(i(m.nodeName,o));else for(m=0;m<t.length;m++)t[m].nodeType===1&&g(t[m],o,q)};e=e.documentElement.childNodes;for(var k=0,r=e.length;k<r;k++)e[k].nodeType===1&&(e[k].nodeName==="manifest"?g(e[k],{},!0):g(e[k],{},!1));return l})}(Popcorn),function(p){p.parser("parseSBV",function(e){var l={title:"",remote:"",data:[]},d=[],b=0,h=0,i=function(q){q=q.split(":");var o=q.length-1,u;try{u=parseInt(q[o-1],10)*60+parseFloat(q[o],10),o===2&&(u+=parseInt(q[0],10)*3600)}catch(E){throw"Bad cue"}return u},g=function(q,o){var u={};return u[q]=o,u};e=e.text.split(/(?:\r\n|\r|\n)/gm);for(h=e.length;b<h;){var k={},r=[],m=e[b++].split(",");try{k.start=i(m[0]);for(k.end=i(m[1]);b<h&&e[b];)r.push(e[b++]);k.text=r.join("<br />"),d
.push(g("subtitle",k))}catch(t){for(;b<h&&e[b];)b++}for(;b<h&&!e[b];)b++}return l.data=d,l})}(Popcorn),function(p){p.parser("parseJSON","JSON",function(e){var l={title:"",remote:"",data:[]};return p.forEach(e.data,function(d){l.data.push(d)}),l})}(Popcorn),function(p){p.parser("parseTTXT",function(e){var l={title:"",remote:"",data:[]},d=function(k){k=k.split(":");var r=0;try{return parseFloat(k[0],10)*60*60+parseFloat(k[1],10)*60+parseFloat(k[2],10)}catch(m){r=0}return r},b=function(k,r){var m={};return m[k]=r,m};e=e.xml.lastChild.lastChild;for(var h=Number.MAX_VALUE,i=[];e;){if(e.nodeType===1&&e.nodeName==="TextSample"){var g={};g.start=d(e.getAttribute("sampleTime")),g.text=e.getAttribute("text"),g.text&&(g.end=h-.001,i.push(b("subtitle",g))),h=g.start}e=e.previousSibling}return l.data=i.reverse(),l})}(Popcorn),function(p){function e(g,k,r){var m=g.firstChild;g=l(g,r),r=[];for(var t;m;)m.nodeType===1&&(m.nodeName==="p"?r.push(d(m,k,g)):m.nodeName==="div"&&(t=b(m.getAttribute("begin"))
,t<0&&(t=k),r.push.apply(r,e(m,t,g)))),m=m.nextSibling;return r}function l(g,k){var r=g.getAttribute("region");return r!==null?r:k||""}function d(g,k,r){var m={};return m.text=(g.textContent||g.text).replace(h,"").replace(i,"<br />"),m.id=g.getAttribute("xml:id")||g.getAttribute("id"),m.start=b(g.getAttribute("begin"),k),m.end=b(g.getAttribute("end"),k),m.target=l(g,r),m.end<0&&(m.end=b(g.getAttribute("duration"),0),m.end>=0?m.end+=m.start:m.end=Number.MAX_VALUE),{subtitle:m}}function b(g,k){var r;if(!g)return-1;try{return p.util.toSeconds(g)}catch(m){for(var t=g.length-1;t>=0&&g[t]<="9"&&g[t]>="0";)t--;return r=t,t=parseFloat(g.substring(0,r)),r=g.substring(r),t*({h:3600,m:60,s:1,ms:.001}[r]||-1)+(k||0)}}var h=/^[\s]+|[\s]+$/gm,i=/(?:\r\n|\r|\n)/gm;p.parser("parseTTML",function(g){var k={title:"",remote:"",data:[]};if(!g.xml||!g.xml.documentElement)return k;g=g.xml.documentElement.firstChild;if(!g)return k;for(;g.nodeName!=="body";)g=g.nextSibling;return g&&(k.data=e(g,0)),k})}(Popcorn
),function(p){function e(d){var b=d.split(":");d=d.length;var h;if(d!==12&&d!==9)throw"Bad cue";d=b.length-1;try{h=parseInt(b[d-1],10)*60+parseFloat(b[d],10),d===2&&(h+=parseInt(b[0],10)*3600)}catch(i){throw"Bad cue"}return h}function l(d,b){var h={};return h[d]=b,h}p.parser("parseVTT",function(d){var b={title:"",remote:"",data:[]},h=[],i=0,g=0,k,r;d=d.text.split(/(?:\r\n|\r|\n)/gm),g=d.length;if(g===0||d[0]!=="WEBVTT")return b;for(i++;i<g;){k=[];try{for(var m=i;m<g&&!d[m];)m++;i=m;var t=d[i++];m=void 0;var q={};if(!t||t.indexOf("-->")===-1)throw"Bad cue";m=t.replace(/--\>/," --> ").split(/[\t ]+/);if(m.length<2)throw"Bad cue";q.id=t,q.start=e(m[0]),q.end=e(m[2]);for(r=q;i<g&&d[i];)k.push(d[i++]);r.text=k.join("<br />"),h.push(l("subtitle",r))}catch(o){for(i=i;i<g&&d[i];)i++;i=i}}return b.data=h,b})}(Popcorn),function(p){function e(b,h){var i=b.substr(10).split(","),g;g={start:l(i[h.start]),end:l(i[h.end])};if(g.start===-1||g.end===-1)throw"Invalid time";var k=q.call(m,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi
,""),r=k.replace,m;m=i.length,q=[];for(var t=h.text;t<m;t++)q.push(i[t]);m=q.join(",");var q=m.replace;return g.text=r.call(k,/\\N/gi,"<br />"),g}function l(b){var h=b.split(":");return b.length!==10||h.length<3?-1:parseInt(h[0],10)*3600+parseInt(h[1],10)*60+parseFloat(h[2],10)}function d(b,h){var i={};return i[b]=h,i}p.parser("parseSSA",function(b){var h={title:"",remote:"",data:[]},i=[],g=0,k;b=b.text.split(/(?:\r\n|\r|\n)/gm);for(k=b.length;g<k&&b[g]!=="[Events]";)g++;var r=b[++g].substr(8).split(", "),m={},t,q;q=0;for(t=r.length;q<t;q++)r[q]==="Start"?m.start=q:r[q]==="End"?m.end=q:r[q]==="Text"&&(m.text=q);for(;++g<k&&b[g]&&b[g][0]!=="[";)try{i.push(d("subtitle",e(b[g],m)))}catch(o){}return h.data=i,h})}(Popcorn),function(p){function e(d,b){var h={};return h[d]=b,h}function l(d){d=d.split(":");try{var b=d[2].split(",");return b.length===1&&(b=d[2].split(".")),parseFloat(d[0],10)*3600+parseFloat(d[1],10)*60+parseFloat(b[0],10)+parseFloat(b[1],10)/1e3}catch(h){return 0}}p.parser("parseSRT"
,function(d,b){var h={title:"",remote:"",data:[]},i=[],g=0,k=0,r,m,t,q,o;r=d.text.split(/(?:\r\n|\r|\n)/gm);for(t=r.length-1;t>=0&&!r[t];)t--;q=t+1;for(g=0;g<q;g++){o={},t=[];for(g=g;!r[g];)g++;g=g,o.id=parseInt(r[g++],10),m=r[g++].split(/[\t ]*--\>[\t ]*/),o.start=l(m[0]),k=m[1].indexOf(" "),k!==-1&&(m[1]=m[1].substr(0,k));for(o.end=l(m[1]);g<q&&r[g];)t.push(r[g++]);o.text=t.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),o.text=o.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),o.text=o.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),o.text=o.text.replace(/\\N/gi,"<br />"),b&&b.target&&(o.target=b.target),i.push(e("subtitle",o))}return h.data=i,h})}(Popcorn),function(p,e){e.player("vimeo",{_canPlayType:function(l,d){return typeof d=="string"&&e.HTMLVimeoVideoElement._canPlaySrc(d)}}),e.vimeo=function(l,d,b){typeof console!="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly."
);var h=e.HTMLVimeoVideoElement(l);return l=e(h,b),setTimeout(function(){h.src=d},0),l}}(window,Popcorn),function(p,e){var l=function(d,b){return typeof b=="string"&&e.HTMLYouTubeVideoElement._canPlaySrc(b)};e.player("youtube",{_canPlayType:l}),e.youtube=function(d,b,h){typeof console!="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var i=e.HTMLYouTubeVideoElement(d);return d=e(i,h),setTimeout(function(){i.src=b},0),d},e.youtube.canPlayType=l}(window,Popcorn),function(p,e){e.player("soundcloud",{_canPlayType:function(l,d){return typeof d=="string"&&e.HTMLSoundCloudAudioElement._canPlaySrc(d)&&l.toLowerCase()!=="audio"}}),e.soundcloud=function(l,d,b){typeof console!="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var h=e.HTMLSoundCloudAudioElement(l);return l=e(h,b),setTimeout(function(){h.src=d},0),l}}(window,Popcorn),define("popcorn"
,function(){}),define("views/streetwalk",["jquery","underscore","backbone","models/Ways","models/Sounds","utils/GeoUtils","utils/LocalParams","utils/Logger","utils/Localization","text!templates/streetwalk/streetWalkViewTemplate.html","popcorn"],function($,_,Backbone,Ways,Sounds,GeoUtils,LocalParams,LOGGER,Localization,streetWalkViewTemplate){var StreetWalkView=Backbone.View.extend({el:"#streetwalk",elImg:"#streetwalk .streetwalkImg",currentPosition:0,bodyHeight:5e3,fullscreen:!1,events:{"click .toggle-sounds ":"toggleSounds","submit #signup-mailchimp-form":"signUpMailChimp"},initialize:function(params){var self=this;self.wayName=params.wayName},initSounds:function(){var self=this;self.sounds=new Sounds,self.sounds.init()},prepare:function(){var self=this;self.firstScroll=!0,_.isUndefined(Localization.STR)?self.listenToOnce(Localization,"STRLoaded",function(){self.render()}):self.render(),self.initSounds(),window.scrollTo(0,0)},render:function(){var self=this,pathFirstStill="data/casapare/highres/way00.jpg"
;self.$el.html(_.template(streetWalkViewTemplate,{pathFirstStill:pathFirstStill,STR:Localization.STR,lang:Localization.translationLoaded})),$.ajax({url:"templates/svg/scrolltostart_"+Localization.translationLoaded+".html",success:function(data){self.$el.find(".scrolltostart").html(data),self.loadPath()},error:function(e){LOGGER.debug("Error while loading templates/svg/scrolltostart_"+Localization.translationLoaded+".html")}}),LocalParams.getBonusUnlocked()&&(self.$el.find(".launching-signup").hide(),self.$el.find(".launching-signup-thanks").addClass("show")),self.popcorn=Popcorn.smart(".launching-bonusvideo","http://player.vimeo.com/video/110573403"),self.popcorn.on("play",function(){self.muteSounds()}),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(e){self.fullscreen?(window.scrollTo(0,5e3),self.animating=!0,self.computeAnimation(!0)):self.animating=!1,self.fullscreen?self.fullscreen=!1:self.fullscreen=!0})},loadPath:function(){var self=this;self.
way=Ways.where({wayName:self.wayName})[0],self.way.fetch(),self.way.on("updatePercentageLoaded",function(){self.updateLoadingIndicator(self.way.percentageLoaded)}),self.way.on("loadingFinished",function(){self.animating=!0,self.currentStill=self.way.wayStills.first(),self.$el.css("height",self.bodyHeight+"px"),self.computeAnimation(!0),self.computeScrollableElements(),self.$el.find("#scrollToStartLoaded").show(),self.$el.find("#scrollToStartLoading").hide(),self.sounds&&self.sounds.updateSounds(self.way.wayPath[self.currentStill.id])})},updateLoadingIndicator:function(pourcentage){var self=this;self.$el.find(".loadingIndicator").text(pourcentage)},renderImg:function(imgNb){var self=this;LOGGER.debug("RENDER IMGNB"+imgNb);if(self.currentStill&&self.currentStill.id==imgNb)return;self.currentStill=self.way.wayStills.get(imgNb);if(!self.currentStill.loaded){LOGGER.debug("IMG NB NOT LOADED :"+imgNb);function sortNumber(a,b){return a-b}self.currentStill=self.way.wayStills.get(self.way.wayStills
.stillLoaded.push(imgNb)&&self.way.wayStills.stillLoaded.sort(sortNumber)[self.way.wayStills.stillLoaded.indexOf(imgNb)-1]),LOGGER.debug("Load IMG NB instead:"+self.currentStill.id)}$(self.elImg).attr("src",self.currentStill.get("srcLowRes"))},renderImgHighRes:function(){var self=this;LOGGER.debug("HIGH RES RENDER"),self.currentStill.loadHighRes(function(){$(self.elImg).attr("src",self.currentStill.get("srcHighRes"))})},renderElements:function(imgNb){var self=this},computeScrollableElements:function(){var self=this,lastElementPosition=self.bodyHeight-window.innerHeight;self.$el.find(".launching").css("bottom",-lastElementPosition+"px"),self.$el.find(".launching").show()},computeAnimation:function(firstStill){var self=this;if(self.animating){self.targetPosition=window.scrollY;if(Math.floor(self.targetPosition)!=Math.floor(self.currentPosition)||firstStill){var deaccelerate=Math.max(Math.min(Math.abs(self.targetPosition-self.currentPosition)*5e3,10),2);self.currentPosition+=(self.targetPosition-
self.currentPosition)/deaccelerate,self.targetPosition>self.currentPosition?self.currentPosition=Math.ceil(self.currentPosition):self.currentPosition=Math.floor(self.currentPosition);var availableHeigth=self.bodyHeight-window.innerHeight;LOGGER.debug("availableHeigth : "+availableHeigth);var imgNb=Math.floor(self.currentPosition/availableHeigth*self.way.wayStills.length);imgNb==self.currentStill.id?LOGGER.debug("DO NOT RENDER SAME STILL "+imgNb):(imgNb<0&&(imgNb=0),imgNb>=self.way.wayStills.length&&(imgNb=self.way.wayStills.length-1),self.renderImg(imgNb),self.renderElements(imgNb),$("body").removeClass("not-moving"),clearTimeout(self.highResLoadingInterval),self.highResLoadingInterval=setTimeout(function(){self.renderImgHighRes(),$("body").addClass("not-moving")},100),self.sounds&&self.sounds.updateSounds(self.way.wayPath[self.currentStill.id]))}window.requestAnimationFrame(function(){self.computeAnimation()})}},toggleSounds:function(e){var self=this,state=$(e.currentTarget).attr("data-state"
);state=="normal"?($(e.currentTarget).attr("data-state","muted"),self.sounds.mute()):($(e.currentTarget).attr("data-state","normal"),self.sounds.unmute())},muteSounds:function(){var self=this;self.$el.find(".toggle-sounds").attr("data-state","muted"),self.sounds.mute()},signUpMailChimp:function(e){var self=this;e.preventDefault(),$.ajax({url:self.$el.find("#signup-mailchimp-form").attr("action"),type:"POST",data:self.$el.find("#signup-mailchimp-form").serialize(),dataType:"json",contentType:"application/json; charset=utf-8",success:function(data){data["result"]!="success"?LOGGER.debug(data.msg):(self.$el.find(".launching-signup").hide(),self.$el.find(".launching-signup-thanks").addClass("show"),LocalParams.setBonusUnlocked())}})},onClose:function(){this.undelegateEvents(),this.way.clear(),this.animating=!1}});return StreetWalkView}),define("routers/router",["jquery","underscore","backbone","utils/AppView","utils/Localization","views/streetwalk"],function($,_,Backbone,AppView,Localization
,StreetWalkView){var Router=Backbone.Router.extend({routes:{"":"streetwalk",":lang":"streetwalk",":lang/streetwalk":"streetwalk",":lang/streetwalk/:way":"streetwalk"},initialize:function(){var self=this},streetwalk:function(lang,wayName){var self=this;Localization.on("STRSuccess",function(){self.navigate("#"+Localization.translationLoaded,{trigger:!1,replace:!0})}),Localization.init(lang),_.isUndefined(wayName)&&(wayName="casapare");var streetWalkView=new StreetWalkView({wayName:wayName});streetWalkView=AppView.show(streetWalkView),AppView.changePage(streetWalkView)}});return Router}),require.config({baseUrl:"app",paths:{jquery:"libs/vendor/jquery-2.0.3.min",json:"libs/vendor/json-0.3.1",underscore:"libs/vendor/lodash-2.2.1.min",backbone:"libs/vendor/backbone-1.1.0.min",popcorn:"libs/vendor/popcorn-1.5.6.min",howl:"libs/vendor/howler-1.1.14",text:"libs/vendor/text-2.0.10",fastclick:"libs/vendor/fastclick.min",models:"models",views:"views",utils:"utils",templates:"../templates",data:"../data"
},shim:{backbone:{deps:["underscore","jquery"],exports:"Backbone",init:function(){Backbone.$=window.$}},underscore:{exports:"_"}},waitSeconds:0}),define("main",["jquery","underscore","backbone","fastclick","utils/Logger","routers/router"],function($,_,Backbone,FastClick,LOGGER,Router){$(document).ready(function(){FastClick.attach(document.body);var router=new Router;Backbone.history.start()})});